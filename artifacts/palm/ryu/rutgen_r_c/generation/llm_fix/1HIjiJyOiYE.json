{
  "name": "ryu::buffer::buffer::Buffer::format",
  "name_with_impl": "ryu::buffer::{impl#0}::format",
  "mod_info": {
    "name": "buffer",
    "loc": "src/lib.rs:106:1:106:12"
  },
  "visible": true,
  "loc": "src/buffer/mod.rs:47:5:53:6",
  "fn_tests": [
    {
      "chain_id": 1,
      "prompt_conds": [
        "// constraint: f.is_nonfinite() is true\n",
        "// expected return value/type: f.format_nonfinite()\n"
      ],
      "input_infer": "",
      "answers": [
        {
          "uses": [],
          "has_test_mod": false,
          "common": [],
          "chain_tests": [
            {
              "attrs": [],
              "prefix": [],
              "oracles": [],
              "codes": [
                [
                  "{",
                  "   #[derive(Clone)]",
                  "   struct NaNStruct;",
                  "   impl Copy for NaNStruct {}",
                  "   ",
                  "   impl Sealed for NaNStruct {",
                  "       fn is_nonfinite(self) -> bool {",
                  "           true",
                  "       }",
                  "       ",
                  "       fn format_nonfinite(self) -> &'static str {",
                  "           \"NaN\"",
                  "       }",
                  "       ",
                  "       unsafe fn write_to_ryu_buffer(self, _: *mut u8) -> usize {",
                  "           0 // No need to write anything, we are testing non-finite values.",
                  "       }",
                  "   }",
                  "   ",
                  "   let mut buffer = Buffer::new();",
                  "   let result = buffer.format(NaNStruct);",
                  "}"
                ]
              ],
              "can_compile": [
                {
                  "Err": "   Compiling ryu v1.0.20 (/home/abezbm/rust-utgen-test-crates-new/ryu)\nerror[E0277]: the trait bound `NaNStruct: Float` is not satisfied\n   --> src/buffer/mod.rs:201:31\n    |\n201 |    let result = buffer.format(NaNStruct);\n    |                        ------ ^^^^^^^^^ the trait `Float` is not implemented for `NaNStruct`\n    |                        |\n    |                        required by a bound introduced by this call\n    |\n    = help: the following other types implement trait `Float`:\n              f32\n              f64\nnote: required by a bound in `buffer::Buffer::format`\n   --> src/buffer/mod.rs:47:22\n    |\n47  |     pub fn format<F: Float>(&mut self, f: F) -> &str {\n    |                      ^^^^^ required by this bound in `Buffer::format`\n\nFor more information about this error, try `rustc --explain E0277`.\nerror: could not compile `ryu` (lib test) due to 1 previous error\n"
                }
              ],
              "repaired": [
                true
              ]
            },
            {
              "attrs": [],
              "prefix": [],
              "oracles": [],
              "codes": [
                [
                  "{",
                  "    #[derive(Clone)]  ",
                  "    struct InfinityStruct;  ",
                  "    impl Copy for InfinityStruct {}  ",
                  "    ",
                  "    impl Sealed for InfinityStruct {  ",
                  "        fn is_nonfinite(self) -> bool {  ",
                  "            true  ",
                  "        }  ",
                  "        ",
                  "        fn format_nonfinite(self) -> &'static str {  ",
                  "            \"inf\"  ",
                  "        }  ",
                  "        ",
                  "        unsafe fn write_to_ryu_buffer(self, _: *mut u8) -> usize {  ",
                  "            0 // No need to write anything, we are testing non-finite values.  ",
                  "        }  ",
                  "    }  ",
                  " ",
                  "    let mut buffer = Buffer::new();  ",
                  "    let result = buffer.format(InfinityStruct);  ",
                  "}"
                ]
              ],
              "can_compile": [
                {
                  "Err": "   Compiling ryu v1.0.20 (/home/abezbm/rust-utgen-test-crates-new/ryu)\nerror[E0277]: the trait bound `InfinityStruct: Float` is not satisfied\n   --> src/buffer/mod.rs:201:32\n    |\n201 |     let result = buffer.format(InfinityStruct);  \n    |                         ------ ^^^^^^^^^^^^^^ the trait `Float` is not implemented for `InfinityStruct`\n    |                         |\n    |                         required by a bound introduced by this call\n    |\n    = help: the following other types implement trait `Float`:\n              f32\n              f64\nnote: required by a bound in `buffer::Buffer::format`\n   --> src/buffer/mod.rs:47:22\n    |\n47  |     pub fn format<F: Float>(&mut self, f: F) -> &str {\n    |                      ^^^^^ required by this bound in `Buffer::format`\n\nFor more information about this error, try `rustc --explain E0277`.\nerror: could not compile `ryu` (lib test) due to 1 previous error\n"
                }
              ],
              "repaired": [
                true
              ]
            },
            {
              "attrs": [],
              "prefix": [],
              "oracles": [],
              "codes": [
                [
                  "{",
                  "   #[derive(Clone)]",
                  "   struct NegativeInfinityStruct;",
                  "   impl Copy for NegativeInfinityStruct {}",
                  "   ",
                  "   impl Sealed for NegativeInfinityStruct {",
                  "       fn is_nonfinite(self) -> bool {",
                  "           true",
                  "       }",
                  "       ",
                  "       fn format_nonfinite(self) -> &'static str {",
                  "           \"-inf\"",
                  "       }",
                  "       ",
                  "       unsafe fn write_to_ryu_buffer(self, _: *mut u8) -> usize {",
                  "           0 // No need to write anything, we are testing non-finite values.",
                  "       }",
                  "   }",
                  "   ",
                  "   let mut buffer = Buffer::new();",
                  "   let result = buffer.format(NegativeInfinityStruct);",
                  "}"
                ]
              ],
              "can_compile": [
                {
                  "Err": "   Compiling ryu v1.0.20 (/home/abezbm/rust-utgen-test-crates-new/ryu)\nerror[E0277]: the trait bound `NegativeInfinityStruct: Float` is not satisfied\n   --> src/buffer/mod.rs:201:31\n    |\n201 |    let result = buffer.format(NegativeInfinityStruct);\n    |                        ------ ^^^^^^^^^^^^^^^^^^^^^^ the trait `Float` is not implemented for `NegativeInfinityStruct`\n    |                        |\n    |                        required by a bound introduced by this call\n    |\n    = help: the following other types implement trait `Float`:\n              f32\n              f64\nnote: required by a bound in `buffer::Buffer::format`\n   --> src/buffer/mod.rs:47:22\n    |\n47  |     pub fn format<F: Float>(&mut self, f: F) -> &str {\n    |                      ^^^^^ required by this bound in `Buffer::format`\n\nFor more information about this error, try `rustc --explain E0277`.\nerror: could not compile `ryu` (lib test) due to 1 previous error\n"
                }
              ],
              "repaired": [
                true
              ]
            }
          ]
        }
      ]
    },
    {
      "chain_id": 2,
      "prompt_conds": [
        "// constraint: f.is_nonfinite() is false\n",
        "// expected return value/type: self.format_finite(f)\n"
      ],
      "input_infer": "",
      "answers": [
        {
          "uses": [],
          "has_test_mod": false,
          "common": [],
          "chain_tests": [
            {
              "attrs": [],
              "prefix": [],
              "oracles": [],
              "codes": [
                [
                  "{",
                  "  #[derive(Clone)]  ",
                  "  struct TestFloat(f64);  ",
                  " ",
                  "  impl Copy for TestFloat {}  ",
                  " ",
                  "  impl Sealed for TestFloat {  ",
                  "      fn is_nonfinite(self) -> bool {  ",
                  "          self.0.is_nan() || self.0.is_infinite()  ",
                  "      }  ",
                  " ",
                  "      fn format_nonfinite(self) -> &'static str {  ",
                  "          NAN // Not used here since we are testing finite  ",
                  "      }  ",
                  " ",
                  "      unsafe fn write_to_ryu_buffer(self, result: *mut u8) -> usize {  ",
                  "          let formatted = format!(\"{}\", self.0);  ",
                  "          let bytes = formatted.as_bytes();  ",
                  "          let len = bytes.len();  ",
                  "          std::ptr::copy_nonoverlapping(bytes.as_ptr(), result, len);  ",
                  "          len  ",
                  "      }  ",
                  "  }  ",
                  " ",
                  "   let float_value = TestFloat(3.14);  ",
                  "   let mut buffer = [0u8; 24];  ",
                  "   let result = unsafe { float_value.write_to_ryu_buffer(buffer.as_mut_ptr()) };  ",
                  "   assert_eq!(std::str::from_utf8(&buffer[..result]).unwrap(), \"3.14\");  ",
                  "}"
                ]
              ],
              "can_compile": [
                {
                  "Ok": null
                }
              ],
              "repaired": [
                true
              ]
            },
            {
              "attrs": [],
              "prefix": [],
              "oracles": [],
              "codes": [
                [
                  "{",
                  "   #[derive(Clone)]  ",
                  "   struct TestFloat(f64);  ",
                  " ",
                  "   impl Copy for TestFloat {}  ",
                  "",
                  "    impl Sealed for TestFloat {",
                  "        fn is_nonfinite(self) -> bool {",
                  "            self.0.is_nan() || self.0.is_infinite()",
                  "        }",
                  "",
                  "        fn format_nonfinite(self) -> &'static str {",
                  "            NAN // Not used here since we are testing finite",
                  "        }",
                  "",
                  "        unsafe fn write_to_ryu_buffer(self, result: *mut u8) -> usize {",
                  "            let formatted = format!(\"{}\", self.0);",
                  "            let bytes = formatted.as_bytes();",
                  "            let len = bytes.len();",
                  "           std::ptr::copy_nonoverlapping(bytes.as_ptr(), result, len);  ",
                  "           len  ",
                  "       }  ",
                  "    }",
                  "",
                  "    let mut buffer = Buffer::new();",
                  "    let float_value = TestFloat(-2.71);",
                  "    ",
                  "    let result = buffer.format(float_value);",
                  "    assert_eq!(result, \"-2.71\");",
                  "}"
                ]
              ],
              "can_compile": [
                {
                  "Err": "   Compiling ryu v1.0.20 (/home/abezbm/rust-utgen-test-crates-new/ryu)\nerror[E0277]: the trait bound `TestFloat: Float` is not satisfied\n   --> src/buffer/mod.rs:208:32\n    |\n208 |     let result = buffer.format(float_value);\n    |                         ------ ^^^^^^^^^^^ the trait `Float` is not implemented for `TestFloat`\n    |                         |\n    |                         required by a bound introduced by this call\n    |\n    = help: the following other types implement trait `Float`:\n              f32\n              f64\nnote: required by a bound in `buffer::Buffer::format`\n   --> src/buffer/mod.rs:47:22\n    |\n47  |     pub fn format<F: Float>(&mut self, f: F) -> &str {\n    |                      ^^^^^ required by this bound in `Buffer::format`\n\nFor more information about this error, try `rustc --explain E0277`.\nerror: could not compile `ryu` (lib test) due to 1 previous error\n"
                }
              ],
              "repaired": [
                true
              ]
            },
            {
              "attrs": [],
              "prefix": [],
              "oracles": [],
              "codes": [
                [
                  "{",
                  "  #[derive(Clone)]  ",
                  "  struct TestFloat(f64);  ",
                  " ",
                  "  impl Copy for TestFloat {}  ",
                  " ",
                  "  impl Sealed for TestFloat {  ",
                  "      fn is_nonfinite(self) -> bool {  ",
                  "          self.0.is_nan() || self.0.is_infinite()  ",
                  "      }  ",
                  " ",
                  "      fn format_nonfinite(self) -> &'static str {  ",
                  "          NAN // Not used here since we are testing finite  ",
                  "      }  ",
                  " ",
                  "      unsafe fn write_to_ryu_buffer(self, result: *mut u8) -> usize {  ",
                  "          let formatted = format!(\"{}\", self.0);  ",
                  "          let bytes = formatted.as_bytes();  ",
                  "          let len = bytes.len();  ",
                  "          std::ptr::copy_nonoverlapping(bytes.as_ptr(), result, len);  ",
                  "          len  ",
                  "      }  ",
                  "  }  ",
                  " ",
                  "   let mut buffer = Buffer::new();  ",
                  "   let float_value = TestFloat(1e+10);  ",
                  "   ",
                  "   let result = buffer.format(float_value);  ",
                  "}"
                ]
              ],
              "can_compile": [
                {
                  "Err": "   Compiling ryu v1.0.20 (/home/abezbm/rust-utgen-test-crates-new/ryu)\nerror[E0277]: the trait bound `TestFloat: Float` is not satisfied\n   --> src/buffer/mod.rs:208:31\n    |\n208 |    let result = buffer.format(float_value);  \n    |                        ------ ^^^^^^^^^^^ the trait `Float` is not implemented for `TestFloat`\n    |                        |\n    |                        required by a bound introduced by this call\n    |\n    = help: the following other types implement trait `Float`:\n              f32\n              f64\nnote: required by a bound in `buffer::Buffer::format`\n   --> src/buffer/mod.rs:47:22\n    |\n47  |     pub fn format<F: Float>(&mut self, f: F) -> &str {\n    |                      ^^^^^ required by this bound in `Buffer::format`\n\nFor more information about this error, try `rustc --explain E0277`.\nerror: could not compile `ryu` (lib test) due to 1 previous error\n"
                }
              ],
              "repaired": [
                true
              ]
            }
          ]
        }
      ]
    }
  ]
}