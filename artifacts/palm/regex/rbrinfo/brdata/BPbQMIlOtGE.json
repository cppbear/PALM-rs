{
  "name": "regex::re_unicode::re_unicode::Regex::replacen",
  "name_with_impl": "regex::re_unicode::{impl#6}::replacen",
  "mod_info": {
    "name": "re_unicode",
    "loc": "src/lib.rs:665:1:665:16"
  },
  "visible": true,
  "loc": "src/re_unicode.rs:537:5:591:6",
  "doc": "/// Replaces at most `limit` non-overlapping matches in `text` with the\n/// replacement provided. If `limit` is 0, then all non-overlapping matches\n/// are replaced.\n///\n/// See the documentation for `replace` for details on how to access\n/// capturing group matches in the replacement string.\n",
  "code": [
    "pub fn replacen<'t, R: Replacer>(",
    "    &self,",
    "    text: &'t str,",
    "    limit: usize,",
    "    mut rep: R,",
    ") -> Cow<'t, str> {",
    "    // If we know that the replacement doesn't have any capture expansions,",
    "    // then we can fast path. The fast path can make a tremendous",
    "    // difference:",
    "    //",
    "    //   1) We use `find_iter` instead of `captures_iter`. Not asking for",
    "    //      captures generally makes the regex engines faster.",
    "    //   2) We don't need to look up all of the capture groups and do",
    "    //      replacements inside the replacement string. We just push it",
    "    //      at each match and be done with it.",
    "    if let Some(rep) = rep.no_expansion() {",
    "        let mut it = self.find_iter(text).enumerate().peekable();",
    "        if it.peek().is_none() {",
    "            return Cow::Borrowed(text);",
    "        }",
    "        let mut new = String::with_capacity(text.len());",
    "        let mut last_match = 0;",
    "        for (i, m) in it {",
    "            if limit > 0 && i >= limit {",
    "                break",
    "            }",
    "            new.push_str(&text[last_match..m.start()]);",
    "            new.push_str(&rep);",
    "            last_match = m.end();",
    "        }",
    "        new.push_str(&text[last_match..]);",
    "        return Cow::Owned(new);",
    "    }",
    "",
    "    // The slower path, which we use if the replacement needs access to",
    "    // capture groups.",
    "    let mut it = self.captures_iter(text).enumerate().peekable();",
    "    if it.peek().is_none() {",
    "        return Cow::Borrowed(text);",
    "    }",
    "    let mut new = String::with_capacity(text.len());",
    "    let mut last_match = 0;",
    "    for (i, cap) in it {",
    "        if limit > 0 && i >= limit {",
    "            break",
    "        }",
    "        // unwrap on 0 is OK because captures only reports matches",
    "        let m = cap.get(0).unwrap();",
    "        new.push_str(&text[last_match..m.start()]);",
    "        rep.replace_append(&cap, &mut new);",
    "        last_match = m.end();",
    "    }",
    "    new.push_str(&text[last_match..]);",
    "    Cow::Owned(new)",
    "}"
  ],
  "size": {
    "chain": 10,
    "contra": 4,
    "min_set": 10
  },
  "cond_chains": [
    {
      "id": 1,
      "conds": [
        {
          "cond": "let Some(rep) = rep.no_expansion()",
          "norm": null,
          "value": "true",
          "line": 552,
          "bound": null,
          "may_panic": false
        },
        {
          "cond": "it.peek().is_none()",
          "norm": null,
          "value": "true",
          "line": 574,
          "bound": null,
          "may_panic": false
        }
      ],
      "ret": "Cow::Borrowed(text)",
      "path": [
        0,
        1,
        36,
        37,
        38,
        39,
        40,
        41,
        42,
        43,
        79,
        84,
        85
      ],
      "may_contra": false,
      "min_set": true
    },
    {
      "id": 2,
      "conds": [
        {
          "cond": "let Some(rep) = rep.no_expansion()",
          "norm": null,
          "value": "true",
          "line": 552,
          "bound": null,
          "may_panic": false
        },
        {
          "cond": "it.peek().is_none()",
          "norm": null,
          "value": "false",
          "line": 574,
          "bound": null,
          "may_panic": false
        },
        {
          "cond": "(i, cap) in it",
          "norm": null,
          "value": "true",
          "line": 579,
          "bound": null,
          "may_panic": false
        },
        {
          "cond": "limit > 0",
          "norm": "0 < limit",
          "value": "true",
          "line": 580,
          "bound": null,
          "may_panic": false
        },
        {
          "cond": "i >= limit",
          "norm": null,
          "value": "true",
          "line": 580,
          "bound": "i == limit",
          "may_panic": false
        },
        {
          "cond": "text[last_match..]",
          "norm": null,
          "value": "",
          "line": 589,
          "bound": null,
          "may_panic": true
        }
      ],
      "ret": "Cow::Owned(new)",
      "path": [
        0,
        1,
        36,
        37,
        38,
        39,
        40,
        41,
        42,
        44,
        45,
        46,
        47,
        48,
        49,
        50,
        53,
        55,
        56,
        69,
        70,
        71,
        72,
        73,
        74,
        75,
        76,
        77,
        78,
        85
      ],
      "may_contra": false,
      "min_set": true
    },
    {
      "id": 3,
      "conds": [
        {
          "cond": "let Some(rep) = rep.no_expansion()",
          "norm": null,
          "value": "true",
          "line": 552,
          "bound": null,
          "may_panic": false
        },
        {
          "cond": "it.peek().is_none()",
          "norm": null,
          "value": "false",
          "line": 574,
          "bound": null,
          "may_panic": false
        },
        {
          "cond": "(i, cap) in it",
          "norm": null,
          "value": "true",
          "line": 579,
          "bound": null,
          "may_panic": false
        },
        {
          "cond": "limit > 0",
          "norm": "0 < limit",
          "value": "true",
          "line": 580,
          "bound": null,
          "may_panic": false
        },
        {
          "cond": "i >= limit",
          "norm": null,
          "value": "false",
          "line": 580,
          "bound": null,
          "may_panic": false
        },
        {
          "cond": "cap.get(0).unwrap()",
          "norm": null,
          "value": "",
          "line": 584,
          "bound": null,
          "may_panic": true
        },
        {
          "cond": "text[last_match..m.start()]",
          "norm": null,
          "value": "",
          "line": 585,
          "bound": null,
          "may_panic": true
        },
        {
          "cond": "(i, cap) in it",
          "norm": null,
          "value": "false",
          "line": 579,
          "bound": null,
          "may_panic": false
        },
        {
          "cond": "text[last_match..]",
          "norm": null,
          "value": "",
          "line": 589,
          "bound": null,
          "may_panic": true
        }
      ],
      "ret": "Cow::Owned(new)",
      "path": [
        0,
        1,
        36,
        37,
        38,
        39,
        40,
        41,
        42,
        44,
        45,
        46,
        47,
        48,
        49,
        50,
        53,
        55,
        57,
        59,
        60,
        61,
        62,
        63,
        64,
        65,
        66,
        67,
        68,
        48,
        49,
        50,
        52,
        54,
        70,
        71,
        72,
        73,
        74,
        75,
        76,
        77,
        78,
        85
      ],
      "may_contra": true,
      "min_set": true
    },
    {
      "id": 4,
      "conds": [
        {
          "cond": "let Some(rep) = rep.no_expansion()",
          "norm": null,
          "value": "true",
          "line": 552,
          "bound": null,
          "may_panic": false
        },
        {
          "cond": "it.peek().is_none()",
          "norm": null,
          "value": "false",
          "line": 574,
          "bound": null,
          "may_panic": false
        },
        {
          "cond": "(i, cap) in it",
          "norm": null,
          "value": "true",
          "line": 579,
          "bound": null,
          "may_panic": false
        },
        {
          "cond": "limit > 0",
          "norm": "0 < limit",
          "value": "false",
          "line": 580,
          "bound": "limit == 0",
          "may_panic": false
        },
        {
          "cond": "cap.get(0).unwrap()",
          "norm": null,
          "value": "",
          "line": 584,
          "bound": null,
          "may_panic": true
        },
        {
          "cond": "text[last_match..m.start()]",
          "norm": null,
          "value": "",
          "line": 585,
          "bound": null,
          "may_panic": true
        },
        {
          "cond": "(i, cap) in it",
          "norm": null,
          "value": "false",
          "line": 579,
          "bound": null,
          "may_panic": false
        },
        {
          "cond": "text[last_match..]",
          "norm": null,
          "value": "",
          "line": 589,
          "bound": null,
          "may_panic": true
        }
      ],
      "ret": "Cow::Owned(new)",
      "path": [
        0,
        1,
        36,
        37,
        38,
        39,
        40,
        41,
        42,
        44,
        45,
        46,
        47,
        48,
        49,
        50,
        53,
        58,
        59,
        60,
        61,
        62,
        63,
        64,
        65,
        66,
        67,
        68,
        48,
        49,
        50,
        52,
        54,
        70,
        71,
        72,
        73,
        74,
        75,
        76,
        77,
        78,
        85
      ],
      "may_contra": true,
      "min_set": true
    },
    {
      "id": 5,
      "conds": [
        {
          "cond": "let Some(rep) = rep.no_expansion()",
          "norm": null,
          "value": "true",
          "line": 552,
          "bound": null,
          "may_panic": false
        },
        {
          "cond": "it.peek().is_none()",
          "norm": null,
          "value": "false",
          "line": 574,
          "bound": null,
          "may_panic": false
        },
        {
          "cond": "(i, cap) in it",
          "norm": null,
          "value": "false",
          "line": 579,
          "bound": null,
          "may_panic": false
        },
        {
          "cond": "text[last_match..]",
          "norm": null,
          "value": "",
          "line": 589,
          "bound": null,
          "may_panic": true
        }
      ],
      "ret": "Cow::Owned(new)",
      "path": [
        0,
        1,
        36,
        37,
        38,
        39,
        40,
        41,
        42,
        44,
        45,
        46,
        47,
        48,
        49,
        50,
        52,
        54,
        70,
        71,
        72,
        73,
        74,
        75,
        76,
        77,
        78,
        85
      ],
      "may_contra": false,
      "min_set": true
    },
    {
      "id": 6,
      "conds": [
        {
          "cond": "let Some(rep) = rep.no_expansion()",
          "norm": null,
          "value": "true",
          "line": 552,
          "bound": null,
          "may_panic": false
        },
        {
          "cond": "it.peek().is_none()",
          "norm": null,
          "value": "true",
          "line": 554,
          "bound": null,
          "may_panic": false
        }
      ],
      "ret": "Cow::Borrowed(text)",
      "path": [
        0,
        1,
        2,
        3,
        4,
        5,
        6,
        7,
        8,
        9,
        81,
        82,
        83,
        84,
        85
      ],
      "may_contra": false,
      "min_set": true
    },
    {
      "id": 7,
      "conds": [
        {
          "cond": "let Some(rep) = rep.no_expansion()",
          "norm": null,
          "value": "true",
          "line": 552,
          "bound": null,
          "may_panic": false
        },
        {
          "cond": "it.peek().is_none()",
          "norm": null,
          "value": "false",
          "line": 554,
          "bound": null,
          "may_panic": false
        },
        {
          "cond": "(i, m) in it",
          "norm": null,
          "value": "true",
          "line": 559,
          "bound": null,
          "may_panic": false
        },
        {
          "cond": "limit > 0",
          "norm": "0 < limit",
          "value": "true",
          "line": 560,
          "bound": null,
          "may_panic": false
        },
        {
          "cond": "i >= limit",
          "norm": null,
          "value": "true",
          "line": 560,
          "bound": "i == limit",
          "may_panic": false
        },
        {
          "cond": "text[last_match..]",
          "norm": null,
          "value": "",
          "line": 567,
          "bound": null,
          "may_panic": true
        }
      ],
      "ret": "Cow::Owned(new)",
      "path": [
        0,
        1,
        2,
        3,
        4,
        5,
        6,
        7,
        8,
        10,
        11,
        12,
        13,
        14,
        15,
        16,
        19,
        21,
        22,
        32,
        33,
        34,
        35,
        80,
        81,
        82,
        83,
        84,
        85
      ],
      "may_contra": false,
      "min_set": true
    },
    {
      "id": 8,
      "conds": [
        {
          "cond": "let Some(rep) = rep.no_expansion()",
          "norm": null,
          "value": "true",
          "line": 552,
          "bound": null,
          "may_panic": false
        },
        {
          "cond": "it.peek().is_none()",
          "norm": null,
          "value": "false",
          "line": 554,
          "bound": null,
          "may_panic": false
        },
        {
          "cond": "(i, m) in it",
          "norm": null,
          "value": "true",
          "line": 559,
          "bound": null,
          "may_panic": false
        },
        {
          "cond": "limit > 0",
          "norm": "0 < limit",
          "value": "true",
          "line": 560,
          "bound": null,
          "may_panic": false
        },
        {
          "cond": "i >= limit",
          "norm": null,
          "value": "false",
          "line": 560,
          "bound": null,
          "may_panic": false
        },
        {
          "cond": "text[last_match..m.start()]",
          "norm": null,
          "value": "",
          "line": 563,
          "bound": null,
          "may_panic": true
        },
        {
          "cond": "(i, m) in it",
          "norm": null,
          "value": "false",
          "line": 559,
          "bound": null,
          "may_panic": false
        },
        {
          "cond": "text[last_match..]",
          "norm": null,
          "value": "",
          "line": 567,
          "bound": null,
          "may_panic": true
        }
      ],
      "ret": "Cow::Owned(new)",
      "path": [
        0,
        1,
        2,
        3,
        4,
        5,
        6,
        7,
        8,
        10,
        11,
        12,
        13,
        14,
        15,
        16,
        19,
        21,
        23,
        25,
        26,
        27,
        28,
        29,
        30,
        31,
        14,
        15,
        16,
        18,
        20,
        32,
        33,
        34,
        35,
        80,
        81,
        82,
        83,
        84,
        85
      ],
      "may_contra": true,
      "min_set": true
    },
    {
      "id": 9,
      "conds": [
        {
          "cond": "let Some(rep) = rep.no_expansion()",
          "norm": null,
          "value": "true",
          "line": 552,
          "bound": null,
          "may_panic": false
        },
        {
          "cond": "it.peek().is_none()",
          "norm": null,
          "value": "false",
          "line": 554,
          "bound": null,
          "may_panic": false
        },
        {
          "cond": "(i, m) in it",
          "norm": null,
          "value": "true",
          "line": 559,
          "bound": null,
          "may_panic": false
        },
        {
          "cond": "limit > 0",
          "norm": "0 < limit",
          "value": "false",
          "line": 560,
          "bound": "limit == 0",
          "may_panic": false
        },
        {
          "cond": "text[last_match..m.start()]",
          "norm": null,
          "value": "",
          "line": 563,
          "bound": null,
          "may_panic": true
        },
        {
          "cond": "(i, m) in it",
          "norm": null,
          "value": "false",
          "line": 559,
          "bound": null,
          "may_panic": false
        },
        {
          "cond": "text[last_match..]",
          "norm": null,
          "value": "",
          "line": 567,
          "bound": null,
          "may_panic": true
        }
      ],
      "ret": "Cow::Owned(new)",
      "path": [
        0,
        1,
        2,
        3,
        4,
        5,
        6,
        7,
        8,
        10,
        11,
        12,
        13,
        14,
        15,
        16,
        19,
        24,
        25,
        26,
        27,
        28,
        29,
        30,
        31,
        14,
        15,
        16,
        18,
        20,
        32,
        33,
        34,
        35,
        80,
        81,
        82,
        83,
        84,
        85
      ],
      "may_contra": true,
      "min_set": true
    },
    {
      "id": 10,
      "conds": [
        {
          "cond": "let Some(rep) = rep.no_expansion()",
          "norm": null,
          "value": "true",
          "line": 552,
          "bound": null,
          "may_panic": false
        },
        {
          "cond": "it.peek().is_none()",
          "norm": null,
          "value": "false",
          "line": 554,
          "bound": null,
          "may_panic": false
        },
        {
          "cond": "(i, m) in it",
          "norm": null,
          "value": "false",
          "line": 559,
          "bound": null,
          "may_panic": false
        },
        {
          "cond": "text[last_match..]",
          "norm": null,
          "value": "",
          "line": 567,
          "bound": null,
          "may_panic": true
        }
      ],
      "ret": "Cow::Owned(new)",
      "path": [
        0,
        1,
        2,
        3,
        4,
        5,
        6,
        7,
        8,
        10,
        11,
        12,
        13,
        14,
        15,
        16,
        18,
        20,
        32,
        33,
        34,
        35,
        80,
        81,
        82,
        83,
        84,
        85
      ],
      "may_contra": false,
      "min_set": true
    }
  ]
}