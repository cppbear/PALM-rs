{"function_name":"bytes::bytes_mut::bytes_mut::BytesMut::promote_to_shared","file_path":"/home/abezbm/rust-utgen-test-crates-new/bytes/src/bytes_mut.rs","work_dir":"/home/abezbm/rust-utgen-test-crates-new/bytes","tests":78,"tests_lines":[9,9,9,9,9,9,9,9,9,9,8,8,8,8,8,8,8,15,15,15,16,16,16,16,18,19,18,18,16,16,16,16,12,12,12,12,12,12,16,16,16,16,16,16,19,19,19,11,11,11,11,8,8,8,11,11,11,8,8,8,8,12,8,8,8,8,8,8,12,12,12,12,21,19,19,19,19,16],"oracles":18,"oracles_compiled":15,"oracles_compiled_rate":83.33333333333334,"tests_compiled":68,"tests_compiled_rate":87.17948717948718,"oracles_run":15,"oracles_passed":8,"oracles_passed_rate":53.333333333333336,"tests_run":68,"tests_passed":35,"tests_passed_rate":51.470588235294116,"lines":30,"lines_covered":30,"lines_coveraged_rate":100.0,"branches":4,"branches_covered":4,"branches_coverage_rate":100.0,"codes_lines":[1018,1019,1020,1022,1023,1024,1025,1026,1027,1028,1029,1030,1031,1032,1033,1034,1035,1036,1037,1038,1039,1040,1041,1042,1043,1044,1045,1046,1048,1049],"codes_lines_covered":[[["{","    let mut bytes_mut = unsafe { BytesMut::with_capacity(16) };","    let ref_cnt = 1; // This should not panic due to the constraint (ref_cnt == 1 is false)","    unsafe { bytes_mut.promote_to_shared(ref_cnt) };","    let mut bytes_mut = unsafe { BytesMut::with_capacity(16) };","    let ref_cnt = 1;","    unsafe { bytes_mut.promote_to_shared(ref_cnt) };","    assert_eq!(bytes_mut.kind(), KIND_VEC);","}"],[1018,1019,1020,1022,1023,1024,1025,1026,1027,1028,1029,1030,1031,1032,1033,1034,1035,1036,1037,1038,1039,1040,1041,1042,1043,1044,1045,1046,1048,1049]],[["{","    let mut bytes_mut = unsafe { BytesMut::with_capacity(16) };","    let ref_cnt = 1; // This should not panic due to the constraint (ref_cnt == 1 is false)","    unsafe { bytes_mut.promote_to_shared(ref_cnt) };","    let mut bytes_mut = unsafe { BytesMut::with_capacity(16) };","    let ref_cnt = 1;","    unsafe { bytes_mut.promote_to_shared(ref_cnt) };","    assert!(ref_cnt == 1 || ref_cnt == 2);","}"],[1018,1019,1020,1022,1023,1024,1025,1026,1027,1028,1029,1030,1031,1032,1033,1034,1035,1036,1037,1038,1039,1040,1041,1042,1043,1044,1045,1046,1048,1049]],[["{","    let mut bytes_mut = unsafe { BytesMut::with_capacity(16) };","    let ref_cnt = 1; // This should not panic due to the constraint (ref_cnt == 1 is false)","    unsafe { bytes_mut.promote_to_shared(ref_cnt) };","    let mut bytes_mut = unsafe { BytesMut::with_capacity(16) };","    let ref_cnt = 1;","    unsafe { bytes_mut.promote_to_shared(ref_cnt) };","    assert!(!bytes_mut.data.is_null());","}"],[1018,1019,1020,1022,1023,1024,1025,1026,1027,1028,1029,1030,1031,1032,1033,1034,1035,1036,1037,1038,1039,1040,1041,1042,1043,1044,1045,1046,1048,1049]],[["{","    let mut bytes_mut = unsafe { BytesMut::with_capacity(16) };","    let ref_cnt = 1; // This should not panic due to the constraint (ref_cnt == 1 is false)","    unsafe { bytes_mut.promote_to_shared(ref_cnt) };","    let mut bytes_mut = unsafe { BytesMut::with_capacity(16) };","    let ref_cnt = 1;","    unsafe { bytes_mut.promote_to_shared(ref_cnt) };","    assert_eq!(bytes_mut.len(), 0);","}"],[1018,1019,1020,1022,1023,1024,1025,1026,1027,1028,1029,1030,1031,1032,1033,1034,1035,1036,1037,1038,1039,1040,1041,1042,1043,1044,1045,1046,1048,1049]],[["{","    let mut bytes_mut = unsafe { BytesMut::with_capacity(16) };","    let ref_cnt = 2; // This should pass without panic","    unsafe { bytes_mut.promote_to_shared(ref_cnt) };","    let mut bytes_mut = unsafe { BytesMut::with_capacity(16) };","    let ref_cnt = 2;","    unsafe { bytes_mut.promote_to_shared(ref_cnt) };","    assert_eq!(bytes_mut.kind(), KIND_ARC);","}"],[1018,1019,1020,1022,1023,1024,1025,1026,1027,1028,1029,1030,1031,1032,1033,1034,1035,1036,1037,1038,1039,1040,1041,1042,1043,1044,1045,1046,1048,1049]],[["{","    let mut bytes_mut = unsafe { BytesMut::with_capacity(16) };","    let ref_cnt = 2; // This should pass without panic","    unsafe { bytes_mut.promote_to_shared(ref_cnt) };","    let mut bytes_mut = unsafe { BytesMut::with_capacity(16) };","    let ref_cnt = 2;","    unsafe { bytes_mut.promote_to_shared(ref_cnt) };","    assert!(bytes_mut.data.is_null() == false);","}"],[1018,1019,1020,1022,1023,1024,1025,1026,1027,1028,1029,1030,1031,1032,1033,1034,1035,1036,1037,1038,1039,1040,1041,1042,1043,1044,1045,1046,1048,1049]],[["{","    let mut bytes_mut = unsafe { BytesMut::with_capacity(16) };","    let ref_cnt = 2; // This should pass without panic","    unsafe { bytes_mut.promote_to_shared(ref_cnt) };","    let mut bytes_mut = unsafe { BytesMut::with_capacity(16) };","    let ref_cnt = 2;","    unsafe { bytes_mut.promote_to_shared(ref_cnt) };","    assert!(bytes_mut.len() > 0);","}"],[1018,1019,1020,1022,1023,1024,1025,1026,1027,1028,1029,1030,1031,1032,1033,1034,1035,1036,1037,1038,1039,1040,1041,1042,1043,1044,1045,1046,1048,1049]],[["{","    let mut bytes_mut = unsafe { BytesMut::with_capacity(16) };","    let ref_cnt = 2; // This should pass without panic","    unsafe { bytes_mut.promote_to_shared(ref_cnt) };","    let mut bytes_mut = unsafe { BytesMut::with_capacity(16) };","    let ref_cnt = 2;","    unsafe { bytes_mut.promote_to_shared(ref_cnt) };","    assert!(bytes_mut.capacity() >= 16);","}"],[1018,1019,1020,1022,1023,1024,1025,1026,1027,1028,1029,1030,1031,1032,1033,1034,1035,1036,1037,1038,1039,1040,1041,1042,1043,1044,1045,1046,1048,1049]],[["{","    let mut bytes_mut = unsafe { BytesMut::with_capacity(16) };","    let ref_cnt = 2; // This should pass without panic","    unsafe { bytes_mut.promote_to_shared(ref_cnt) };","    let mut bytes_mut = unsafe { BytesMut::with_capacity(16) };","    let ref_cnt = 2;","    unsafe { bytes_mut.promote_to_shared(ref_cnt) };","    assert!(bytes_mut.spare_capacity_mut().len() > 0);","}"],[1018,1019,1020,1022,1023,1024,1025,1026,1027,1028,1029,1030,1031,1032,1033,1034,1035,1036,1037,1038,1039,1040,1041,1042,1043,1044,1045,1046,1048,1049]],[["{","   let mut bytes_mut = unsafe { BytesMut::with_capacity(16) };","   let ref_cnt = 2; // This should pass without panic","   unsafe { bytes_mut.promote_to_shared(ref_cnt) };","   let mut bytes_mut = unsafe { BytesMut::with_capacity(16) };","   let ref_cnt = 2;","   unsafe { bytes_mut.promote_to_shared(ref_cnt) };","   assert!(unsafe { (*bytes_mut.data).ref_count.load(Ordering::SeqCst) } == ref_cnt);","}"],[1018,1019,1020,1022,1023,1024,1025,1026,1027,1028,1029,1030,1031,1032,1033,1034,1035,1036,1037,1038,1039,1040,1041,1042,1043,1044,1045,1046,1048,1049]],[["{","    let mut bytes_mut = unsafe { BytesMut::new() };","    let ref_cnt = 2; // Testing edge case with a zero-length BytesMut","    unsafe { bytes_mut.promote_to_shared(ref_cnt) };","    let mut bytes_mut = unsafe { BytesMut::new() };","    let ref_cnt = 2;","    assert_eq!(bytes_mut.len(), 0);","}"],[1018,1019,1020,1022,1023,1024,1025,1026,1027,1028,1029,1030,1031,1032,1033,1034,1035,1036,1037,1038,1039,1040,1041,1042,1043,1044,1045,1046,1048,1049]],[["{","    let mut bytes_mut = unsafe { BytesMut::new() };","    let ref_cnt = 2; // Testing edge case with a zero-length BytesMut","    unsafe { bytes_mut.promote_to_shared(ref_cnt) };","    let mut bytes_mut = unsafe { BytesMut::new() };","    let ref_cnt = 2;","    assert_eq!(bytes_mut.capacity(), 0);","}"],[1018,1019,1020,1022,1023,1024,1025,1026,1027,1028,1029,1030,1031,1032,1033,1034,1035,1036,1037,1038,1039,1040,1041,1042,1043,1044,1045,1046,1048,1049]],[["{","    let mut bytes_mut = unsafe { BytesMut::new() };","    let ref_cnt = 2; // Testing edge case with a zero-length BytesMut","    unsafe { bytes_mut.promote_to_shared(ref_cnt) };","    let mut bytes_mut = unsafe { BytesMut::new() };","    let ref_cnt = 2;","    assert!(bytes_mut.is_empty());","}"],[1018,1019,1020,1022,1023,1024,1025,1026,1027,1028,1029,1030,1031,1032,1033,1034,1035,1036,1037,1038,1039,1040,1041,1042,1043,1044,1045,1046,1048,1049]],[["{","    let mut bytes_mut = unsafe { BytesMut::new() };","    let ref_cnt = 2; // Testing edge case with a zero-length BytesMut","    unsafe { bytes_mut.promote_to_shared(ref_cnt) };","    let mut bytes_mut = unsafe { BytesMut::new() };","    let ref_cnt = 2;","    assert_eq!(bytes_mut.kind(), KIND_VEC);","}"],[1018,1019,1020,1022,1023,1024,1025,1026,1027,1028,1029,1030,1031,1032,1033,1034,1035,1036,1037,1038,1039,1040,1041,1042,1043,1044,1045,1046,1048,1049]],[["{","    let mut bytes_mut = unsafe { BytesMut::new() };","    let ref_cnt = 2; // Testing edge case with a zero-length BytesMut","    unsafe { bytes_mut.promote_to_shared(ref_cnt) };","    let mut bytes_mut = unsafe { BytesMut::new() };","    let ref_cnt = 2;","    assert!(unsafe { bytes_mut.data as usize & KIND_MASK } == KIND_VEC);","}"],[1018,1019,1020,1022,1023,1024,1025,1026,1027,1028,1029,1030,1031,1032,1033,1034,1035,1036,1037,1038,1039,1040,1041,1042,1043,1044,1045,1046,1048,1049]],[["{","    let mut bytes_mut = unsafe { BytesMut::new() };","    let ref_cnt = 2; // Testing edge case with a zero-length BytesMut","    unsafe { bytes_mut.promote_to_shared(ref_cnt) };","    let mut bytes_mut = unsafe { BytesMut::new() };","    let ref_cnt = 2;","    assert!(unsafe { bytes_mut.data as usize & ORIGINAL_CAPACITY_MASK } >> ORIGINAL_CAPACITY_OFFSET == 0);","}"],[1018,1019,1020,1022,1023,1024,1025,1026,1027,1028,1029,1030,1031,1032,1033,1034,1035,1036,1037,1038,1039,1040,1041,1042,1043,1044,1045,1046,1048,1049]],[["{","    let mut bytes_mut = unsafe { BytesMut::new() };","    let ref_cnt = 2; // Testing edge case with a zero-length BytesMut","    unsafe { bytes_mut.promote_to_shared(ref_cnt) };","    let mut bytes_mut = unsafe { BytesMut::new() };","    let ref_cnt = 2;","    assert!(unsafe { bytes_mut.data as usize >> VEC_POS_OFFSET } == 0);","}"],[1018,1019,1020,1022,1023,1024,1025,1026,1027,1028,1029,1030,1031,1032,1033,1034,1035,1036,1037,1038,1039,1040,1041,1042,1043,1044,1045,1046,1048,1049]],[["{","    let mut bytes_mut = unsafe { BytesMut::with_capacity(32) };","    let ref_cnt = 2; // Testing after modifying the contents","    unsafe {","        bytes_mut.split_off(16);","        bytes_mut.promote_to_shared(ref_cnt);","    }","    let mut bytes_mut = unsafe { BytesMut::with_capacity(32) };","    let ref_cnt = 2;","    unsafe {","    bytes_mut.split_off(16);","    bytes_mut.promote_to_shared(ref_cnt);","    }","    assert_eq!(bytes_mut.len(), 16);","}"],[1018,1019,1020,1022,1023,1024,1025,1026,1027,1028,1029,1030,1031,1032,1033,1034,1035,1036,1037,1038,1039,1040,1041,1042,1043,1044,1045,1046,1048,1049]],[["{","    let mut bytes_mut = unsafe { BytesMut::with_capacity(32) };","    let ref_cnt = 2; // Testing after modifying the contents","    unsafe {","        bytes_mut.split_off(16);","        bytes_mut.promote_to_shared(ref_cnt);","    }","    let mut bytes_mut = unsafe { BytesMut::with_capacity(32) };","    let ref_cnt = 2;","    unsafe {","    bytes_mut.split_off(16);","    bytes_mut.promote_to_shared(ref_cnt);","    }","    assert_eq!(bytes_mut.capacity(), 32);","}"],[1018,1019,1020,1022,1023,1024,1025,1026,1027,1028,1029,1030,1031,1032,1033,1034,1035,1036,1037,1038,1039,1040,1041,1042,1043,1044,1045,1046,1048,1049]],[["{","    let mut bytes_mut = unsafe { BytesMut::with_capacity(32) };","    let ref_cnt = 2; // Testing after modifying the contents","    unsafe {","        bytes_mut.split_off(16);","        bytes_mut.promote_to_shared(ref_cnt);","    }","    let mut bytes_mut = unsafe { BytesMut::with_capacity(32) };","    let ref_cnt = 2;","    unsafe {","    bytes_mut.split_off(16);","    bytes_mut.promote_to_shared(ref_cnt);","    }","    assert!(bytes_mut.data as usize & KIND_MASK == KIND_ARC);","}"],[1018,1019,1020,1022,1023,1024,1025,1026,1027,1028,1029,1030,1031,1032,1033,1034,1035,1036,1037,1038,1039,1040,1041,1042,1043,1044,1045,1046,1048,1049]],[["{","  let mut bytes_mut = BytesMut::with_capacity(10);  ","  bytes_mut.ptr = NonNull::new(Box::into_raw(Box::new(vec![0u8; 10])) as *mut u8).unwrap();  ","  bytes_mut.len = 10;  ","  bytes_mut.cap = 10;  ","  bytes_mut.data = ((2 << ORIGINAL_CAPACITY_OFFSET) | (0 << VEC_POS_OFFSET)) as *mut Shared;  ","  unsafe {  ","      bytes_mut.promote_to_shared(1);  ","  }  ","  let mut bytes_mut = BytesMut::with_capacity(10);  ","  bytes_mut.ptr = NonNull::new(Box::into_raw(Box::new(vec![0u8; 10])) as *mut u8).unwrap();  ","  bytes_mut.len = 10;  ","  bytes_mut.cap = 10;  ","  bytes_mut.data = ((2 << ORIGINAL_CAPACITY_OFFSET) | (0 << VEC_POS_OFFSET)) as *mut Shared;  ","   assert_eq!(bytes_mut.kind(), KIND_ARC);","}"],[]],[["{","  let mut bytes_mut = BytesMut::with_capacity(10);","  bytes_mut.ptr = NonNull::new(Box::into_raw(Box::new(vec![0u8; 10])) as *mut u8).unwrap();","  bytes_mut.len = 10;","  bytes_mut.cap = 10;","  bytes_mut.data = (2 << ORIGINAL_CAPACITY_OFFSET) as *mut Shared; // Cast to *mut Shared","   unsafe {","       bytes_mut.promote_to_shared(1);","   }","   let mut bytes_mut = BytesMut::with_capacity(10);","   bytes_mut.ptr = NonNull::new(Box::into_raw(Box::new(vec![0u8; 10])) as *mut u8).unwrap();","   bytes_mut.len = 10;","   bytes_mut.cap = 10;","  bytes_mut.data = ((2 << ORIGINAL_CAPACITY_OFFSET) | (0 << VEC_POS_OFFSET)) as *mut Shared;","   assert_eq!(bytes_mut.len, 10);","}"],[]],[["{","  let mut bytes_mut = BytesMut::with_capacity(10);","  bytes_mut.ptr = NonNull::new(Box::into_raw(Box::new([0u8; 10])) as *mut u8).unwrap();","  bytes_mut.len = 10;","  bytes_mut.cap = 10;","  bytes_mut.data = ((2 << ORIGINAL_CAPACITY_OFFSET) | (0 << VEC_POS_OFFSET)) as *mut Shared;","  unsafe {","      bytes_mut.promote_to_shared(1);","  }","  let mut bytes_mut = BytesMut::with_capacity(10);","  bytes_mut.ptr = NonNull::new(Box::into_raw(Box::new([0u8; 10])) as *mut u8).unwrap();","  bytes_mut.len = 10;","  bytes_mut.cap = 10;","  bytes_mut.data = ((2 << ORIGINAL_CAPACITY_OFFSET) | (0 << VEC_POS_OFFSET)) as *mut Shared;","  assert_eq!(bytes_mut.cap, 10);","}"],[]],[["{","  let mut bytes_mut = BytesMut::with_capacity(10);  ","  bytes_mut.ptr = NonNull::new(Box::into_raw(Box::new(vec![0u8; 10])) as *mut u8).unwrap();  ","  bytes_mut.len = 10;  ","  bytes_mut.cap = 10;  ","  bytes_mut.data = ((2 << ORIGINAL_CAPACITY_OFFSET) | (0 << VEC_POS_OFFSET)) as *mut Shared;  ","   unsafe {  ","       bytes_mut.promote_to_shared(1);  ","   }  ","  let mut bytes_mut = BytesMut::with_capacity(10);  ","  bytes_mut.ptr = NonNull::new(Box::into_raw(Box::new(vec![0u8; 10])) as *mut u8).unwrap();  ","  bytes_mut.len = 10;  ","  bytes_mut.cap = 10;  ","  bytes_mut.data = ((2 << ORIGINAL_CAPACITY_OFFSET) | (0 << VEC_POS_OFFSET)) as *mut Shared;  ","   assert_eq!(unsafe { (*bytes_mut.data).ref_count.load(Ordering::SeqCst) }, 1);  ","}"],[]],[["{","  let mut bytes_mut = BytesMut::with_capacity(15);","  bytes_mut.ptr = NonNull::new(Box::into_raw(Vec::into_boxed_slice(vec![1u8; 15])) as *mut u8).unwrap();","  bytes_mut.len = 15;","  bytes_mut.cap = 15;","  bytes_mut.data = ((3 << ORIGINAL_CAPACITY_OFFSET) | (1 << VEC_POS_OFFSET)) as *mut Shared;","   unsafe {","       bytes_mut.promote_to_shared(1);","   }","   let mut bytes_mut = BytesMut::with_capacity(15);","   let ptr: *mut u8 = Box::into_raw(Vec::into_boxed_slice(vec![1u8; 15])) as *mut u8;","   bytes_mut.ptr = NonNull::new(ptr).unwrap();","   bytes_mut.len = 15;","   bytes_mut.cap = 15;","  bytes_mut.data = (((3 << ORIGINAL_CAPACITY_OFFSET) | (1 << VEC_POS_OFFSET)) as *mut Shared).cast();","  let shared_ptr: *mut Shared = bytes_mut.data;","   assert_eq!(bytes_mut.kind(), KIND_VEC);","}"],[]],[["{","  let mut bytes_mut = BytesMut::with_capacity(15);","  bytes_mut.ptr = NonNull::new(Box::into_raw(Box::new(vec![1u8; 15])) as *mut u8).unwrap();","   bytes_mut.len = 15;","   bytes_mut.cap = 15;","   bytes_mut.data = ((3 << ORIGINAL_CAPACITY_OFFSET) | (1 << VEC_POS_OFFSET)) as *mut Shared;","    unsafe {","        bytes_mut.promote_to_shared(1);","    }","   let mut bytes_mut = BytesMut::with_capacity(15);","   let ptr: *mut u8 = Box::into_raw(Box::new(vec![1u8; 15])) as *mut u8;","   bytes_mut.ptr = NonNull::new(ptr).unwrap();","    bytes_mut.len = 15;","    bytes_mut.cap = 15;","   bytes_mut.data = ((3 << ORIGINAL_CAPACITY_OFFSET) | (1 << VEC_POS_OFFSET)) as *mut Shared;","   let shared_ptr: *mut Shared = bytes_mut.data;","   assert_eq!(unsafe { (*shared_ptr).ref_count.load(Ordering::SeqCst) }, 1);","    assert_eq!(unsafe { (*shared_ptr).ref_count.load(Ordering::SeqCst) }, 1);","}"],[]],[["{","  let mut bytes_mut = BytesMut::with_capacity(15);","  bytes_mut.ptr = NonNull::new(Box::into_raw(Box::new(vec![1u8; 15])) as *mut u8).unwrap();","  bytes_mut.len = 15;","  bytes_mut.cap = 15;","  bytes_mut.data = &mut bytes_mut as *mut _ as *mut Shared;","  unsafe {","      bytes_mut.promote_to_shared(1);","  }","  let mut bytes_mut = BytesMut::with_capacity(15);","  let ptr: *mut u8 = Box::into_raw(Box::new(vec![1u8; 15])) as *mut u8;","  bytes_mut.ptr = NonNull::new(ptr).unwrap();","  bytes_mut.len = 15;","  bytes_mut.cap = 15;","  bytes_mut.data = &mut bytes_mut as *mut _ as *mut Shared;","  let shared_ptr: *mut Shared = bytes_mut.data;","   assert_ne!(unsafe { (*shared_ptr).ref_count.load(Ordering::SeqCst) }, 2);","}"],[1018,1019]],[["{","  let mut bytes_mut = BytesMut::with_capacity(15);","  bytes_mut.ptr = NonNull::new(Box::into_raw(Box::new([1u8; 15])) as *mut u8).unwrap();","  bytes_mut.len = 15;","   bytes_mut.cap = 15;","   bytes_mut.data = ((3 << ORIGINAL_CAPACITY_OFFSET) | (1 << VEC_POS_OFFSET)) as *mut Shared; // cast to pointer type","   unsafe {","       bytes_mut.promote_to_shared(1);","   }","  let mut bytes_mut = BytesMut::with_capacity(15);","  let ptr: *mut u8 = Box::into_raw(Box::new([1u8; 15])) as *mut u8;","  bytes_mut.ptr = NonNull::new(ptr).unwrap();","  bytes_mut.len = 15;","  bytes_mut.cap = 15;","  bytes_mut.data = ((3 << ORIGINAL_CAPACITY_OFFSET) | (1 << VEC_POS_OFFSET)) as *mut Shared; // cast to pointer type","  let shared_ptr: *mut Shared = bytes_mut.data;","  assert_eq!(unsafe { (*shared_ptr).vec.as_slice() }, &[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1]);","}"],[]],[["{","   let mut bytes_mut = BytesMut::with_capacity(10);  ","  bytes_mut.ptr = NonNull::new(Box::into_raw(Box::new([0u8; 10])) as *mut u8).unwrap();  ","  bytes_mut.len = 10;  ","  bytes_mut.cap = 10;  ","  bytes_mut.data = ((2 << ORIGINAL_CAPACITY_OFFSET) | (2 << VEC_POS_OFFSET)) as *mut Shared;  ","  unsafe {  ","      bytes_mut.promote_to_shared(2);  ","  }  ","  let mut bytes_mut = BytesMut::with_capacity(10);  ","  bytes_mut.ptr = NonNull::new(Box::into_raw(Box::new([0u8; 10])) as *mut u8).unwrap();  ","  bytes_mut.len = 10;  ","  bytes_mut.cap = 10;  ","  bytes_mut.data = ((2 << ORIGINAL_CAPACITY_OFFSET) | (2 << VEC_POS_OFFSET)) as *mut Shared;  ","  assert_eq!(bytes_mut.kind(), KIND_VEC);  ","}"],[]],[["{","  let mut bytes_mut = BytesMut::with_capacity(10);  ","  bytes_mut.ptr = NonNull::new(Box::into_raw(Box::new([0u8; 10])) as *mut u8).unwrap();  ","  bytes_mut.len = 10;  ","  bytes_mut.cap = 10;  ","  bytes_mut.data = ((2 << ORIGINAL_CAPACITY_OFFSET) | (2 << VEC_POS_OFFSET)) as *mut Shared;  ","  unsafe {  ","      bytes_mut.promote_to_shared(2);  ","  }  ","  let mut bytes_mut = BytesMut::with_capacity(10);  ","  bytes_mut.ptr = NonNull::new(Box::into_raw(Box::new([0u8; 10])) as *mut u8).unwrap();  ","  bytes_mut.len = 10;  ","  bytes_mut.cap = 10;  ","  bytes_mut.data = ((2 << ORIGINAL_CAPACITY_OFFSET) | (2 << VEC_POS_OFFSET)) as *mut Shared;  ","  assert!(bytes_mut.data as usize & KIND_MASK == KIND_VEC);  ","}"],[]],[["{","  let mut bytes_mut = BytesMut::with_capacity(10);","  bytes_mut.ptr = NonNull::new(Box::into_raw(Box::new([0u8; 10])) as *mut u8).unwrap();","  bytes_mut.len = 10;","  bytes_mut.cap = 10;","  bytes_mut.data = Box::into_raw(Box::new((2 << ORIGINAL_CAPACITY_OFFSET) | (2 << VEC_POS_OFFSET))) as *mut Shared;","  unsafe {","      bytes_mut.promote_to_shared(2);","  }","  let mut bytes_mut = BytesMut::with_capacity(10);","  bytes_mut.ptr = NonNull::new(Box::into_raw(Box::new([0u8; 10])) as *mut u8).unwrap();","  bytes_mut.len = 10;","  bytes_mut.cap = 10;","  bytes_mut.data = Box::into_raw(Box::new((2 << ORIGINAL_CAPACITY_OFFSET) | (2 << VEC_POS_OFFSET))) as *mut Shared;","  assert!(bytes_mut.len == 10);","}"],[1018,1019]],[["{","  let mut bytes_mut = BytesMut::with_capacity(10);","  bytes_mut.ptr = NonNull::new(Box::into_raw(Box::new(vec![0u8; 10])) as *mut u8).unwrap();","  bytes_mut.len = 10;","  bytes_mut.cap = 10;","  bytes_mut.data = ((2 << ORIGINAL_CAPACITY_OFFSET) | (2 << VEC_POS_OFFSET)) as *mut Shared;","  unsafe {","      bytes_mut.promote_to_shared(2);","  }","  let mut bytes_mut = BytesMut::with_capacity(10);","  bytes_mut.ptr = NonNull::new(Box::into_raw(Box::new(vec![0u8; 10])) as *mut u8).unwrap();","  bytes_mut.len = 10;","  bytes_mut.cap = 10;","  bytes_mut.data = ((2 << ORIGINAL_CAPACITY_OFFSET) | (2 << VEC_POS_OFFSET)) as *mut Shared;","  assert!(bytes_mut.cap == 10);","}"],[]],[["{","  let mut bytes_mut = BytesMut::with_capacity(10);","  bytes_mut.ptr = NonNull::new(Box::into_raw(Box::new([0u8; 10])) as *mut u8).unwrap();","   bytes_mut.len = 10;","   bytes_mut.cap = 10;","   bytes_mut.data = (2 << ORIGINAL_CAPACITY_OFFSET) as *mut Shared;  // Ensure type matches","   unsafe {","       bytes_mut.promote_to_shared(1);","   }","   let bytes_mut = BytesMut::with_capacity(10);","   assert_eq!(bytes_mut.len, 10);","}"],[]],[["{","    let mut bytes_mut = BytesMut::with_capacity(10);","   bytes_mut.ptr = NonNull::new(Box::into_raw(Box::new([0u8; 10])) as *mut u8).unwrap();","   bytes_mut.len = 10;","   bytes_mut.cap = 10;","  bytes_mut.data = (Box::into_raw(Box::new((2 << ORIGINAL_CAPACITY_OFFSET) | (0 << VEC_POS_OFFSET))) as *mut Shared);","    unsafe {","        bytes_mut.promote_to_shared(1);","    }","    let bytes_mut = BytesMut::with_capacity(10);","    assert_eq!(bytes_mut.cap, 10);","}"],[1018,1019]],[["{","  let mut bytes_mut = BytesMut::with_capacity(10);  ","  bytes_mut.ptr = NonNull::new(Box::into_raw(Box::new(vec![0u8; 10])) as *mut u8).unwrap();  ","   bytes_mut.len = 10;","   bytes_mut.cap = 10;","   bytes_mut.data = (2 << ORIGINAL_CAPACITY_OFFSET) as *mut Shared; // correct type assignment","   unsafe {","       bytes_mut.promote_to_shared(1);","   }","   let bytes_mut = BytesMut::with_capacity(10);","   assert_eq!(bytes_mut.kind(), KIND_VEC);","}"],[]],[["{"," let mut bytes_mut = BytesMut::with_capacity(10);  "," bytes_mut.ptr = NonNull::new(Box::into_raw(Box::<[u8; 10]>::new([0u8; 10])) as *mut u8).unwrap();  ","  bytes_mut.len = 10;  ","  bytes_mut.cap = 10;  ","  bytes_mut.data = (2 << ORIGINAL_CAPACITY_OFFSET) as *mut Shared;  ","  unsafe {  ","      bytes_mut.promote_to_shared(1);  ","  }  ","  let mut bytes_mut = BytesMut::with_capacity(10);  ","  assert_eq!(bytes_mut.data as usize & ORIGINAL_CAPACITY_MASK, 2 << ORIGINAL_CAPACITY_OFFSET);  ","}"],[]],[["{"," let mut bytes_mut = BytesMut::with_capacity(10);"," bytes_mut.ptr = NonNull::new(Box::into_raw(Box::new([0u8; 10])) as *mut u8).unwrap();"," bytes_mut.len = 10;"," bytes_mut.cap = 10;","  bytes_mut.data = (2 << ORIGINAL_CAPACITY_OFFSET) as *mut Shared; // Cast to the correct type","   unsafe {","       bytes_mut.promote_to_shared(1);","   }","   let bytes_mut = BytesMut::with_capacity(10);","   assert_eq!(bytes_mut.data as usize & NOT_VEC_POS_MASK, 0);","}"],[]],[["{","  let mut bytes_mut = BytesMut::with_capacity(10);  ","  bytes_mut.ptr = NonNull::new(Box::into_raw(Box::new([0u8; 10])) as *mut u8).unwrap();  ","  bytes_mut.len = 10;  ","   bytes_mut.cap = 10;  ","   bytes_mut.data = (2 << ORIGINAL_CAPACITY_OFFSET) as *mut Shared;  ","   unsafe {  ","       bytes_mut.promote_to_shared(1);  ","   }  ","   let bytes_mut = BytesMut::with_capacity(10);  ","   assert!(!bytes_mut.data.is_null());  ","}"],[]],[["{","  let mut bytes_mut = BytesMut::with_capacity(17);  ","  bytes_mut.ptr = NonNull::new(Box::into_raw(Box::new(vec![1u8; 17])) as *mut u8).unwrap();  ","  bytes_mut.len = 17;  ","  bytes_mut.cap = 17;  ","  bytes_mut.data = ((3 << ORIGINAL_CAPACITY_OFFSET) | (0 << VEC_POS_OFFSET)) as *mut Shared;  ","   unsafe {","       bytes_mut.promote_to_shared(1);","   }","  let mut bytes_mut = BytesMut::with_capacity(17);  ","  bytes_mut.ptr = NonNull::new(Box::into_raw(Box::new(vec![1u8; 17])) as *mut u8).unwrap();  ","  bytes_mut.len = 17;  ","  bytes_mut.cap = 17;  ","  bytes_mut.data = ((3 << ORIGINAL_CAPACITY_OFFSET) | (0 << VEC_POS_OFFSET)) as *mut Shared;  ","  assert_eq!(bytes_mut.data as usize & KIND_MASK, KIND_ARC);  ","}"],[]],[["{","   let mut bytes_mut = BytesMut::with_capacity(17);","   bytes_mut.ptr = NonNull::new(Box::into_raw(Box::new(vec![1u8; 17])) as *mut u8).unwrap();","   bytes_mut.len = 17;","   bytes_mut.cap = 17;","  bytes_mut.data = ((3 << ORIGINAL_CAPACITY_OFFSET) | (0 << VEC_POS_OFFSET)) as *mut Shared;","   unsafe {","       bytes_mut.promote_to_shared(1);","   }","   let mut bytes_mut = BytesMut::with_capacity(17);","   bytes_mut.ptr = NonNull::new(Box::into_raw(Box::new(vec![1u8; 17])) as *mut u8).unwrap();","   bytes_mut.len = 17;","   bytes_mut.cap = 17;","  bytes_mut.data = ((3 << ORIGINAL_CAPACITY_OFFSET) | (0 << VEC_POS_OFFSET)) as *mut Shared;","   assert_eq!(bytes_mut.len, 17);","}"],[]],[["{","  let mut bytes_mut = BytesMut::with_capacity(17);","  bytes_mut.ptr = NonNull::new(Box::into_raw(Box::new(vec![1u8; 17])) as *mut u8).unwrap();","  bytes_mut.len = 17;","  bytes_mut.cap = 17;","  bytes_mut.data = Box::into_raw(Box::new((3 << ORIGINAL_CAPACITY_OFFSET) | (0 << VEC_POS_OFFSET))) as *mut Shared;","  unsafe {","      bytes_mut.promote_to_shared(1);","  }","  let mut bytes_mut = BytesMut::with_capacity(17);","  bytes_mut.ptr = NonNull::new(Box::into_raw(Box::new(vec![1u8; 17])) as *mut u8).unwrap();","  bytes_mut.len = 17;","  bytes_mut.cap = 17;","  bytes_mut.data = Box::into_raw(Box::new((3 << ORIGINAL_CAPACITY_OFFSET) | (0 << VEC_POS_OFFSET))) as *mut Shared;","  assert_eq!(bytes_mut.cap, 17);","}"],[1018,1019]],[["{","  let mut bytes_mut = BytesMut::with_capacity(17);","  bytes_mut.ptr = NonNull::new(Box::into_raw(Box::new([1u8; 17])) as *mut u8).unwrap();","  bytes_mut.len = 17;","  bytes_mut.cap = 17;","  bytes_mut.data = Box::into_raw(Box::new((3 << ORIGINAL_CAPACITY_OFFSET) | (0 << VEC_POS_OFFSET))) as *mut Shared;","  unsafe {","      bytes_mut.promote_to_shared(1);","  }","  let mut bytes_mut = BytesMut::with_capacity(17);","  bytes_mut.ptr = NonNull::new(Box::into_raw(Box::new([1u8; 17])) as *mut u8).unwrap();","  bytes_mut.len = 17;","  bytes_mut.cap = 17;","  bytes_mut.data = Box::into_raw(Box::new((3 << ORIGINAL_CAPACITY_OFFSET) | (0 << VEC_POS_OFFSET))) as *mut Shared;","   assert!(bytes_mut.ptr.as_ptr() == Box::into_raw(Box::new([1u8; 17])) as *mut u8);","}"],[1018,1019]],[["{","  let mut bytes_mut = BytesMut::with_capacity(17);  ","  bytes_mut.ptr = NonNull::new(Box::into_raw(Box::new(vec![1u8; 17])) as *mut u8).unwrap();  ","  bytes_mut.len = 17;  ","  bytes_mut.cap = 17;  ","  bytes_mut.data = (3 << ORIGINAL_CAPACITY_OFFSET) as *mut Shared;  ","  unsafe {  ","      bytes_mut.promote_to_shared(1);  ","  }  ","  let mut bytes_mut = BytesMut::with_capacity(17);  ","  bytes_mut.ptr = NonNull::new(Box::into_raw(Box::new(vec![1u8; 17])) as *mut u8).unwrap();  ","  bytes_mut.len = 17;  ","  bytes_mut.cap = 17;  ","  bytes_mut.data = (3 << ORIGINAL_CAPACITY_OFFSET) as *mut Shared;  ","  assert!(unsafe { bytes_mut.kind() } == KIND_VEC);  ","}"],[]],[["{","   let mut bytes_mut = BytesMut::with_capacity(10);","   bytes_mut.ptr = NonNull::new(Box::into_raw(Box::new(Vec::<u8>::from([7u8; 10]))) as *mut u8).unwrap();","   bytes_mut.len = 10;","   bytes_mut.cap = 10;","  bytes_mut.data = ((2 << ORIGINAL_CAPACITY_OFFSET) | (3 << VEC_POS_OFFSET)) as *mut Shared;","  unsafe {","      bytes_mut.promote_to_shared(1);","  }","  let mut bytes_mut = BytesMut::with_capacity(10);","  bytes_mut.ptr = NonNull::new(Box::into_raw(Box::new(Vec::<u8>::from([7u8; 10]))) as *mut u8).unwrap();","  bytes_mut.len = 10;","  bytes_mut.cap = 10;","  bytes_mut.data = ((2 << ORIGINAL_CAPACITY_OFFSET) | (3 << VEC_POS_OFFSET)) as *mut Shared;","   assert_eq!(bytes_mut.kind(), KIND_VEC);","}"],[]],[["{","   let mut bytes_mut = BytesMut::with_capacity(10);","   bytes_mut.ptr = NonNull::new(Box::into_raw(Box::new(vec![7u8; 10])) as *mut u8).unwrap();","   bytes_mut.len = 10;","   bytes_mut.cap = 10;","  bytes_mut.data = ((2 << ORIGINAL_CAPACITY_OFFSET) | (3 << VEC_POS_OFFSET)) as *mut Shared;","  unsafe {","      bytes_mut.promote_to_shared(1);","  }","  let mut bytes_mut = BytesMut::with_capacity(10);","  bytes_mut.ptr = NonNull::new(Box::into_raw(Box::new(vec![7u8; 10])) as *mut u8).unwrap();","  bytes_mut.len = 10;","  bytes_mut.cap = 10;","  bytes_mut.data = ((2 << ORIGINAL_CAPACITY_OFFSET) | (3 << VEC_POS_OFFSET)) as *mut Shared;","   unsafe {","   bytes_mut.promote_to_shared(1);","   }","   assert_eq!(bytes_mut.data as usize & KIND_MASK, KIND_ARC);","}"],[]],[["{"," let mut bytes_mut = BytesMut::with_capacity(10);  "," bytes_mut.ptr = NonNull::new(Box::into_raw(Box::new([7u8; 10])) as *mut u8).unwrap();  ","  bytes_mut.len = 10;","  bytes_mut.cap = 10;","  bytes_mut.data = ((2 << ORIGINAL_CAPACITY_OFFSET) | (3 << VEC_POS_OFFSET)) as *mut Shared;","   unsafe {","       bytes_mut.promote_to_shared(1);","   }","  let mut bytes_mut = BytesMut::with_capacity(10);  ","  bytes_mut.ptr = NonNull::new(Box::into_raw(Box::new([7u8; 10])) as *mut u8).unwrap();  ","  bytes_mut.len = 10;  ","  bytes_mut.cap = 10;  ","   bytes_mut.data = ((2 << ORIGINAL_CAPACITY_OFFSET) | (3 << VEC_POS_OFFSET)) as *mut Shared;","    unsafe {","    bytes_mut.promote_to_shared(1);","    }","    assert_eq!(bytes_mut.len, 10);","}"],[]],[["{","   let mut bytes_mut = BytesMut::with_capacity(10);","   bytes_mut.ptr = NonNull::new(Box::into_raw(Box::new(vec![7u8; 10])) as *mut u8).unwrap();","   bytes_mut.len = 10;","   bytes_mut.cap = 10;","  bytes_mut.data = ((2 << ORIGINAL_CAPACITY_OFFSET) | (3 << VEC_POS_OFFSET)) as *mut Shared;","  unsafe {","      bytes_mut.promote_to_shared(1);","  }","  let mut bytes_mut = BytesMut::with_capacity(10);","  bytes_mut.ptr = NonNull::new(Box::into_raw(Box::new(vec![7u8; 10])) as *mut u8).unwrap();","  bytes_mut.len = 10;","  bytes_mut.cap = 10;","  bytes_mut.data = ((2 << ORIGINAL_CAPACITY_OFFSET) | (3 << VEC_POS_OFFSET)) as *mut Shared;","   unsafe {","   bytes_mut.promote_to_shared(1);","   }","   assert_eq!(bytes_mut.cap, 10);","}"],[]],[["{","    let mut bytes_mut = BytesMut::with_capacity(16);","    unsafe {","        bytes_mut.promote_to_shared(1);","    }","    let mut bytes_mut = BytesMut::with_capacity(16);","    unsafe {","    bytes_mut.promote_to_shared(1);","    }","    assert_eq!(bytes_mut.kind(), KIND_ARC);","}"],[1018,1019,1020,1022,1023,1024,1025,1026,1027,1028,1029,1030,1031,1032,1033,1034,1035,1036,1037,1038,1039,1040,1041,1042,1043,1044,1045,1046,1048,1049]],[["{","    let mut bytes_mut = BytesMut::with_capacity(16);","    unsafe {","        bytes_mut.promote_to_shared(1);","    }","    let mut bytes_mut = BytesMut::with_capacity(16);","    unsafe {","    bytes_mut.promote_to_shared(1);","    }","    assert!(bytes_mut.len() > 0);","}"],[1018,1019,1020,1022,1023,1024,1025,1026,1027,1028,1029,1030,1031,1032,1033,1034,1035,1036,1037,1038,1039,1040,1041,1042,1043,1044,1045,1046,1048,1049]],[["{","    let mut bytes_mut = BytesMut::with_capacity(16);","    unsafe {","        bytes_mut.promote_to_shared(1);","    }","    let mut bytes_mut = BytesMut::with_capacity(16);","    unsafe {","    bytes_mut.promote_to_shared(1);","    }","    assert!(bytes_mut.capacity() >= 16);","}"],[1018,1019,1020,1022,1023,1024,1025,1026,1027,1028,1029,1030,1031,1032,1033,1034,1035,1036,1037,1038,1039,1040,1041,1042,1043,1044,1045,1046,1048,1049]],[["{","    let mut bytes_mut = BytesMut::with_capacity(16);","    unsafe {","        bytes_mut.promote_to_shared(1);","    }","    let mut bytes_mut = BytesMut::with_capacity(16);","    unsafe {","    bytes_mut.promote_to_shared(1);","    }","    assert!(unsafe { !bytes_mut.data.is_null() });","}"],[1018,1019,1020,1022,1023,1024,1025,1026,1027,1028,1029,1030,1031,1032,1033,1034,1035,1036,1037,1038,1039,1040,1041,1042,1043,1044,1045,1046,1048,1049]],[["{","    let mut bytes_mut = BytesMut::with_capacity(32);","    unsafe {","        bytes_mut.promote_to_shared(2);","    }","    let bytes_mut = BytesMut::with_capacity(32);","    assert_eq!(bytes_mut.len(), 0);","}"],[1018,1019,1020,1022,1023,1024,1025,1026,1027,1028,1029,1030,1031,1032,1033,1034,1035,1036,1037,1038,1039,1040,1041,1042,1043,1044,1045,1046,1048,1049]],[["{","    let mut bytes_mut = BytesMut::with_capacity(32);","    unsafe {","        bytes_mut.promote_to_shared(2);","    }","    let bytes_mut = BytesMut::with_capacity(32);","    assert_eq!(bytes_mut.capacity(), 32);","}"],[1018,1019,1020,1022,1023,1024,1025,1026,1027,1028,1029,1030,1031,1032,1033,1034,1035,1036,1037,1038,1039,1040,1041,1042,1043,1044,1045,1046,1048,1049]],[["{","    let mut bytes_mut = BytesMut::with_capacity(32);","    unsafe {","        bytes_mut.promote_to_shared(2);","    }","    let bytes_mut = BytesMut::with_capacity(32);","    assert!(bytes_mut.is_empty());","}"],[1018,1019,1020,1022,1023,1024,1025,1026,1027,1028,1029,1030,1031,1032,1033,1034,1035,1036,1037,1038,1039,1040,1041,1042,1043,1044,1045,1046,1048,1049]],[["{","   let mut bytes_mut = BytesMut::with_capacity(32);","   unsafe {","       bytes_mut.promote_to_shared(2);","   }","   let mut bytes_mut = BytesMut::with_capacity(32);","   unsafe {","       bytes_mut.promote_to_shared(2);","   }","   assert_eq!(bytes_mut.kind(), KIND_ARC);","}"],[1018,1019,1020,1022,1023,1024,1025,1026,1027,1028,1029,1030,1031,1032,1033,1034,1035,1036,1037,1038,1039,1040,1041,1042,1043,1044,1045,1046,1048,1049]],[["{","   let mut bytes_mut = BytesMut::with_capacity(32);","   unsafe {","       bytes_mut.promote_to_shared(2);","   }","   let mut bytes_mut = BytesMut::with_capacity(32);","   unsafe {","       bytes_mut.promote_to_shared(2);","    }","    assert_eq!(bytes_mut.data as usize & KIND_MASK, KIND_ARC);","}"],[1018,1019,1020,1022,1023,1024,1025,1026,1027,1028,1029,1030,1031,1032,1033,1034,1035,1036,1037,1038,1039,1040,1041,1042,1043,1044,1045,1046,1048,1049]],[["{","   let mut bytes_mut = BytesMut::with_capacity(32);","   unsafe {","       bytes_mut.promote_to_shared(2);","   }","   let mut bytes_mut = BytesMut::with_capacity(32);","   unsafe {","       bytes_mut.promote_to_shared(2);","   }","    assert_eq!(bytes_mut.data as usize & ORIGINAL_CAPACITY_MASK, 0);","}"],[1018,1019,1020,1022,1023,1024,1025,1026,1027,1028,1029,1030,1031,1032,1033,1034,1035,1036,1037,1038,1039,1040,1041,1042,1043,1044,1045,1046,1048,1049]],[["{","    let mut bytes_mut = BytesMut::new();","    unsafe {","        bytes_mut.promote_to_shared(0);","    }","    let mut bytes_mut = BytesMut::new();","    assert!(bytes_mut.kind() == KIND_VEC);","}"],[1018,1019,1020]],[["{","    let mut bytes_mut = BytesMut::new();","    unsafe {","        bytes_mut.promote_to_shared(0);","    }","    let mut bytes_mut = BytesMut::new();","    assert!(bytes_mut.capacity() == 0);","}"],[1018,1019,1020]],[["{","    let mut bytes_mut = BytesMut::new();","    unsafe {","        bytes_mut.promote_to_shared(0);","    }","    let mut bytes_mut = BytesMut::new();","    assert!(bytes_mut.len() == 0);","}"],[1018,1019,1020]],[["{","    let mut bytes_mut = BytesMut::new();","    unsafe {","        bytes_mut.promote_to_shared(0);","    }","    let mut bytes_mut = BytesMut::new();","    assert!(bytes_mut.is_empty() == true);","}"],[1018,1019,1020]],[["{","    let mut bytes_mut = BytesMut::new();","    unsafe {","        bytes_mut.promote_to_shared(3);","    }","    let mut bytes_mut = BytesMut::new();","    assert_eq!(bytes_mut.kind(), KIND_VEC);","}"],[1018,1019,1020]],[["{","    let mut bytes_mut = BytesMut::new();","    unsafe {","        bytes_mut.promote_to_shared(3);","    }","    let mut bytes_mut = BytesMut::new();","    assert!(bytes_mut.ptr.as_ptr().is_null());","}"],[1018,1019,1020]],[["{","    let mut bytes_mut = BytesMut::new();","    unsafe {","        bytes_mut.promote_to_shared(3);","    }","    let mut bytes_mut = BytesMut::new();","    assert_eq!(bytes_mut.len(), 0);","}"],[1018,1019,1020]],[["{","    let mut bytes_mut = BytesMut::new();","    unsafe {","        bytes_mut.promote_to_shared(3);","    }","    let mut bytes_mut = BytesMut::new();","    assert_eq!(bytes_mut.cap, 0);","}"],[1018,1019,1020]],[["{","    let mut bytes_mut = BytesMut::new();","    unsafe {","        bytes_mut.promote_to_shared(3);","    }","    let mut bytes_mut = BytesMut::new();","    assert!(bytes_mut.data as usize & KIND_MASK == KIND_VEC);","}"],[1018,1019,1020]],[["{","    let mut bytes_mut = BytesMut::new();","    unsafe {","        bytes_mut.promote_to_shared(3);","    }","    let mut bytes_mut = BytesMut::new();","    assert!(bytes_mut.data as usize & ORIGINAL_CAPACITY_MASK == 0);","}"],[1018,1019,1020]],[["{","  let mut bytes_mut = BytesMut::with_capacity(16);  ","  unsafe {  ","      bytes_mut.data = (KIND_VEC << VEC_POS_OFFSET) as *mut Shared; // Set kind to KIND_VEC  ","       bytes_mut.ptr = NonNull::new(bytes_mut.data as *mut _).unwrap(); // Assure it points to a valid memory  ","       bytes_mut.len = 5; // Set length  ","        bytes_mut.cap = 16; // Set capacity","        bytes_mut.promote_to_shared(1);","    }","    let mut bytes_mut = BytesMut::with_capacity(16);","    assert_eq!(bytes_mut.len, 5);","}"],[]]],"codes_branches":[{"start_line":1020,"start_column":23,"end_line":1020,"end_column":35,"positive":true,"negative":true},{"start_line":1020,"start_column":39,"end_line":1020,"end_column":51,"positive":true,"negative":true}],"codes_branches_covered":[[["{","    let mut bytes_mut = unsafe { BytesMut::with_capacity(16) };","    let ref_cnt = 1; // This should not panic due to the constraint (ref_cnt == 1 is false)","    unsafe { bytes_mut.promote_to_shared(ref_cnt) };","    let mut bytes_mut = unsafe { BytesMut::with_capacity(16) };","    let ref_cnt = 1;","    unsafe { bytes_mut.promote_to_shared(ref_cnt) };","    assert_eq!(bytes_mut.kind(), KIND_VEC);","}"],[{"start_line":1020,"start_column":23,"end_line":1020,"end_column":35,"positive":true,"negative":false},{"start_line":1020,"start_column":39,"end_line":1020,"end_column":51,"positive":false,"negative":false}]],[["{","    let mut bytes_mut = unsafe { BytesMut::with_capacity(16) };","    let ref_cnt = 1; // This should not panic due to the constraint (ref_cnt == 1 is false)","    unsafe { bytes_mut.promote_to_shared(ref_cnt) };","    let mut bytes_mut = unsafe { BytesMut::with_capacity(16) };","    let ref_cnt = 1;","    unsafe { bytes_mut.promote_to_shared(ref_cnt) };","    assert!(ref_cnt == 1 || ref_cnt == 2);","}"],[{"start_line":1020,"start_column":23,"end_line":1020,"end_column":35,"positive":true,"negative":false},{"start_line":1020,"start_column":39,"end_line":1020,"end_column":51,"positive":false,"negative":false}]],[["{","    let mut bytes_mut = unsafe { BytesMut::with_capacity(16) };","    let ref_cnt = 1; // This should not panic due to the constraint (ref_cnt == 1 is false)","    unsafe { bytes_mut.promote_to_shared(ref_cnt) };","    let mut bytes_mut = unsafe { BytesMut::with_capacity(16) };","    let ref_cnt = 1;","    unsafe { bytes_mut.promote_to_shared(ref_cnt) };","    assert!(!bytes_mut.data.is_null());","}"],[{"start_line":1020,"start_column":23,"end_line":1020,"end_column":35,"positive":true,"negative":false},{"start_line":1020,"start_column":39,"end_line":1020,"end_column":51,"positive":false,"negative":false}]],[["{","    let mut bytes_mut = unsafe { BytesMut::with_capacity(16) };","    let ref_cnt = 1; // This should not panic due to the constraint (ref_cnt == 1 is false)","    unsafe { bytes_mut.promote_to_shared(ref_cnt) };","    let mut bytes_mut = unsafe { BytesMut::with_capacity(16) };","    let ref_cnt = 1;","    unsafe { bytes_mut.promote_to_shared(ref_cnt) };","    assert_eq!(bytes_mut.len(), 0);","}"],[{"start_line":1020,"start_column":23,"end_line":1020,"end_column":35,"positive":true,"negative":false},{"start_line":1020,"start_column":39,"end_line":1020,"end_column":51,"positive":false,"negative":false}]],[["{","    let mut bytes_mut = unsafe { BytesMut::with_capacity(16) };","    let ref_cnt = 2; // This should pass without panic","    unsafe { bytes_mut.promote_to_shared(ref_cnt) };","    let mut bytes_mut = unsafe { BytesMut::with_capacity(16) };","    let ref_cnt = 2;","    unsafe { bytes_mut.promote_to_shared(ref_cnt) };","    assert_eq!(bytes_mut.kind(), KIND_ARC);","}"],[{"start_line":1020,"start_column":23,"end_line":1020,"end_column":35,"positive":false,"negative":true},{"start_line":1020,"start_column":39,"end_line":1020,"end_column":51,"positive":true,"negative":false}]],[["{","    let mut bytes_mut = unsafe { BytesMut::with_capacity(16) };","    let ref_cnt = 2; // This should pass without panic","    unsafe { bytes_mut.promote_to_shared(ref_cnt) };","    let mut bytes_mut = unsafe { BytesMut::with_capacity(16) };","    let ref_cnt = 2;","    unsafe { bytes_mut.promote_to_shared(ref_cnt) };","    assert!(bytes_mut.data.is_null() == false);","}"],[{"start_line":1020,"start_column":23,"end_line":1020,"end_column":35,"positive":false,"negative":true},{"start_line":1020,"start_column":39,"end_line":1020,"end_column":51,"positive":true,"negative":false}]],[["{","    let mut bytes_mut = unsafe { BytesMut::with_capacity(16) };","    let ref_cnt = 2; // This should pass without panic","    unsafe { bytes_mut.promote_to_shared(ref_cnt) };","    let mut bytes_mut = unsafe { BytesMut::with_capacity(16) };","    let ref_cnt = 2;","    unsafe { bytes_mut.promote_to_shared(ref_cnt) };","    assert!(bytes_mut.len() > 0);","}"],[{"start_line":1020,"start_column":23,"end_line":1020,"end_column":35,"positive":false,"negative":true},{"start_line":1020,"start_column":39,"end_line":1020,"end_column":51,"positive":true,"negative":false}]],[["{","    let mut bytes_mut = unsafe { BytesMut::with_capacity(16) };","    let ref_cnt = 2; // This should pass without panic","    unsafe { bytes_mut.promote_to_shared(ref_cnt) };","    let mut bytes_mut = unsafe { BytesMut::with_capacity(16) };","    let ref_cnt = 2;","    unsafe { bytes_mut.promote_to_shared(ref_cnt) };","    assert!(bytes_mut.capacity() >= 16);","}"],[{"start_line":1020,"start_column":23,"end_line":1020,"end_column":35,"positive":false,"negative":true},{"start_line":1020,"start_column":39,"end_line":1020,"end_column":51,"positive":true,"negative":false}]],[["{","    let mut bytes_mut = unsafe { BytesMut::with_capacity(16) };","    let ref_cnt = 2; // This should pass without panic","    unsafe { bytes_mut.promote_to_shared(ref_cnt) };","    let mut bytes_mut = unsafe { BytesMut::with_capacity(16) };","    let ref_cnt = 2;","    unsafe { bytes_mut.promote_to_shared(ref_cnt) };","    assert!(bytes_mut.spare_capacity_mut().len() > 0);","}"],[{"start_line":1020,"start_column":23,"end_line":1020,"end_column":35,"positive":false,"negative":true},{"start_line":1020,"start_column":39,"end_line":1020,"end_column":51,"positive":true,"negative":false}]],[["{","   let mut bytes_mut = unsafe { BytesMut::with_capacity(16) };","   let ref_cnt = 2; // This should pass without panic","   unsafe { bytes_mut.promote_to_shared(ref_cnt) };","   let mut bytes_mut = unsafe { BytesMut::with_capacity(16) };","   let ref_cnt = 2;","   unsafe { bytes_mut.promote_to_shared(ref_cnt) };","   assert!(unsafe { (*bytes_mut.data).ref_count.load(Ordering::SeqCst) } == ref_cnt);","}"],[{"start_line":1020,"start_column":23,"end_line":1020,"end_column":35,"positive":false,"negative":true},{"start_line":1020,"start_column":39,"end_line":1020,"end_column":51,"positive":true,"negative":false}]],[["{","    let mut bytes_mut = unsafe { BytesMut::new() };","    let ref_cnt = 2; // Testing edge case with a zero-length BytesMut","    unsafe { bytes_mut.promote_to_shared(ref_cnt) };","    let mut bytes_mut = unsafe { BytesMut::new() };","    let ref_cnt = 2;","    assert_eq!(bytes_mut.len(), 0);","}"],[{"start_line":1020,"start_column":23,"end_line":1020,"end_column":35,"positive":false,"negative":true},{"start_line":1020,"start_column":39,"end_line":1020,"end_column":51,"positive":true,"negative":false}]],[["{","    let mut bytes_mut = unsafe { BytesMut::new() };","    let ref_cnt = 2; // Testing edge case with a zero-length BytesMut","    unsafe { bytes_mut.promote_to_shared(ref_cnt) };","    let mut bytes_mut = unsafe { BytesMut::new() };","    let ref_cnt = 2;","    assert_eq!(bytes_mut.capacity(), 0);","}"],[{"start_line":1020,"start_column":23,"end_line":1020,"end_column":35,"positive":false,"negative":true},{"start_line":1020,"start_column":39,"end_line":1020,"end_column":51,"positive":true,"negative":false}]],[["{","    let mut bytes_mut = unsafe { BytesMut::new() };","    let ref_cnt = 2; // Testing edge case with a zero-length BytesMut","    unsafe { bytes_mut.promote_to_shared(ref_cnt) };","    let mut bytes_mut = unsafe { BytesMut::new() };","    let ref_cnt = 2;","    assert!(bytes_mut.is_empty());","}"],[{"start_line":1020,"start_column":23,"end_line":1020,"end_column":35,"positive":false,"negative":true},{"start_line":1020,"start_column":39,"end_line":1020,"end_column":51,"positive":true,"negative":false}]],[["{","    let mut bytes_mut = unsafe { BytesMut::new() };","    let ref_cnt = 2; // Testing edge case with a zero-length BytesMut","    unsafe { bytes_mut.promote_to_shared(ref_cnt) };","    let mut bytes_mut = unsafe { BytesMut::new() };","    let ref_cnt = 2;","    assert_eq!(bytes_mut.kind(), KIND_VEC);","}"],[{"start_line":1020,"start_column":23,"end_line":1020,"end_column":35,"positive":false,"negative":true},{"start_line":1020,"start_column":39,"end_line":1020,"end_column":51,"positive":true,"negative":false}]],[["{","    let mut bytes_mut = unsafe { BytesMut::new() };","    let ref_cnt = 2; // Testing edge case with a zero-length BytesMut","    unsafe { bytes_mut.promote_to_shared(ref_cnt) };","    let mut bytes_mut = unsafe { BytesMut::new() };","    let ref_cnt = 2;","    assert!(unsafe { bytes_mut.data as usize & KIND_MASK } == KIND_VEC);","}"],[{"start_line":1020,"start_column":23,"end_line":1020,"end_column":35,"positive":false,"negative":true},{"start_line":1020,"start_column":39,"end_line":1020,"end_column":51,"positive":true,"negative":false}]],[["{","    let mut bytes_mut = unsafe { BytesMut::new() };","    let ref_cnt = 2; // Testing edge case with a zero-length BytesMut","    unsafe { bytes_mut.promote_to_shared(ref_cnt) };","    let mut bytes_mut = unsafe { BytesMut::new() };","    let ref_cnt = 2;","    assert!(unsafe { bytes_mut.data as usize & ORIGINAL_CAPACITY_MASK } >> ORIGINAL_CAPACITY_OFFSET == 0);","}"],[{"start_line":1020,"start_column":23,"end_line":1020,"end_column":35,"positive":false,"negative":true},{"start_line":1020,"start_column":39,"end_line":1020,"end_column":51,"positive":true,"negative":false}]],[["{","    let mut bytes_mut = unsafe { BytesMut::new() };","    let ref_cnt = 2; // Testing edge case with a zero-length BytesMut","    unsafe { bytes_mut.promote_to_shared(ref_cnt) };","    let mut bytes_mut = unsafe { BytesMut::new() };","    let ref_cnt = 2;","    assert!(unsafe { bytes_mut.data as usize >> VEC_POS_OFFSET } == 0);","}"],[{"start_line":1020,"start_column":23,"end_line":1020,"end_column":35,"positive":false,"negative":true},{"start_line":1020,"start_column":39,"end_line":1020,"end_column":51,"positive":true,"negative":false}]],[["{","    let mut bytes_mut = unsafe { BytesMut::with_capacity(32) };","    let ref_cnt = 2; // Testing after modifying the contents","    unsafe {","        bytes_mut.split_off(16);","        bytes_mut.promote_to_shared(ref_cnt);","    }","    let mut bytes_mut = unsafe { BytesMut::with_capacity(32) };","    let ref_cnt = 2;","    unsafe {","    bytes_mut.split_off(16);","    bytes_mut.promote_to_shared(ref_cnt);","    }","    assert_eq!(bytes_mut.len(), 16);","}"],[{"start_line":1020,"start_column":23,"end_line":1020,"end_column":35,"positive":false,"negative":true},{"start_line":1020,"start_column":39,"end_line":1020,"end_column":51,"positive":true,"negative":false}]],[["{","    let mut bytes_mut = unsafe { BytesMut::with_capacity(32) };","    let ref_cnt = 2; // Testing after modifying the contents","    unsafe {","        bytes_mut.split_off(16);","        bytes_mut.promote_to_shared(ref_cnt);","    }","    let mut bytes_mut = unsafe { BytesMut::with_capacity(32) };","    let ref_cnt = 2;","    unsafe {","    bytes_mut.split_off(16);","    bytes_mut.promote_to_shared(ref_cnt);","    }","    assert_eq!(bytes_mut.capacity(), 32);","}"],[{"start_line":1020,"start_column":23,"end_line":1020,"end_column":35,"positive":false,"negative":true},{"start_line":1020,"start_column":39,"end_line":1020,"end_column":51,"positive":true,"negative":false}]],[["{","    let mut bytes_mut = unsafe { BytesMut::with_capacity(32) };","    let ref_cnt = 2; // Testing after modifying the contents","    unsafe {","        bytes_mut.split_off(16);","        bytes_mut.promote_to_shared(ref_cnt);","    }","    let mut bytes_mut = unsafe { BytesMut::with_capacity(32) };","    let ref_cnt = 2;","    unsafe {","    bytes_mut.split_off(16);","    bytes_mut.promote_to_shared(ref_cnt);","    }","    assert!(bytes_mut.data as usize & KIND_MASK == KIND_ARC);","}"],[{"start_line":1020,"start_column":23,"end_line":1020,"end_column":35,"positive":false,"negative":true},{"start_line":1020,"start_column":39,"end_line":1020,"end_column":51,"positive":true,"negative":false}]],[["{","  let mut bytes_mut = BytesMut::with_capacity(10);  ","  bytes_mut.ptr = NonNull::new(Box::into_raw(Box::new(vec![0u8; 10])) as *mut u8).unwrap();  ","  bytes_mut.len = 10;  ","  bytes_mut.cap = 10;  ","  bytes_mut.data = ((2 << ORIGINAL_CAPACITY_OFFSET) | (0 << VEC_POS_OFFSET)) as *mut Shared;  ","  unsafe {  ","      bytes_mut.promote_to_shared(1);  ","  }  ","  let mut bytes_mut = BytesMut::with_capacity(10);  ","  bytes_mut.ptr = NonNull::new(Box::into_raw(Box::new(vec![0u8; 10])) as *mut u8).unwrap();  ","  bytes_mut.len = 10;  ","  bytes_mut.cap = 10;  ","  bytes_mut.data = ((2 << ORIGINAL_CAPACITY_OFFSET) | (0 << VEC_POS_OFFSET)) as *mut Shared;  ","   assert_eq!(bytes_mut.kind(), KIND_ARC);","}"],[{"start_line":1020,"start_column":23,"end_line":1020,"end_column":35,"positive":false,"negative":false},{"start_line":1020,"start_column":39,"end_line":1020,"end_column":51,"positive":false,"negative":false}]],[["{","  let mut bytes_mut = BytesMut::with_capacity(10);","  bytes_mut.ptr = NonNull::new(Box::into_raw(Box::new(vec![0u8; 10])) as *mut u8).unwrap();","  bytes_mut.len = 10;","  bytes_mut.cap = 10;","  bytes_mut.data = (2 << ORIGINAL_CAPACITY_OFFSET) as *mut Shared; // Cast to *mut Shared","   unsafe {","       bytes_mut.promote_to_shared(1);","   }","   let mut bytes_mut = BytesMut::with_capacity(10);","   bytes_mut.ptr = NonNull::new(Box::into_raw(Box::new(vec![0u8; 10])) as *mut u8).unwrap();","   bytes_mut.len = 10;","   bytes_mut.cap = 10;","  bytes_mut.data = ((2 << ORIGINAL_CAPACITY_OFFSET) | (0 << VEC_POS_OFFSET)) as *mut Shared;","   assert_eq!(bytes_mut.len, 10);","}"],[{"start_line":1020,"start_column":23,"end_line":1020,"end_column":35,"positive":false,"negative":false},{"start_line":1020,"start_column":39,"end_line":1020,"end_column":51,"positive":false,"negative":false}]],[["{","  let mut bytes_mut = BytesMut::with_capacity(10);","  bytes_mut.ptr = NonNull::new(Box::into_raw(Box::new([0u8; 10])) as *mut u8).unwrap();","  bytes_mut.len = 10;","  bytes_mut.cap = 10;","  bytes_mut.data = ((2 << ORIGINAL_CAPACITY_OFFSET) | (0 << VEC_POS_OFFSET)) as *mut Shared;","  unsafe {","      bytes_mut.promote_to_shared(1);","  }","  let mut bytes_mut = BytesMut::with_capacity(10);","  bytes_mut.ptr = NonNull::new(Box::into_raw(Box::new([0u8; 10])) as *mut u8).unwrap();","  bytes_mut.len = 10;","  bytes_mut.cap = 10;","  bytes_mut.data = ((2 << ORIGINAL_CAPACITY_OFFSET) | (0 << VEC_POS_OFFSET)) as *mut Shared;","  assert_eq!(bytes_mut.cap, 10);","}"],[{"start_line":1020,"start_column":23,"end_line":1020,"end_column":35,"positive":false,"negative":false},{"start_line":1020,"start_column":39,"end_line":1020,"end_column":51,"positive":false,"negative":false}]],[["{","  let mut bytes_mut = BytesMut::with_capacity(10);  ","  bytes_mut.ptr = NonNull::new(Box::into_raw(Box::new(vec![0u8; 10])) as *mut u8).unwrap();  ","  bytes_mut.len = 10;  ","  bytes_mut.cap = 10;  ","  bytes_mut.data = ((2 << ORIGINAL_CAPACITY_OFFSET) | (0 << VEC_POS_OFFSET)) as *mut Shared;  ","   unsafe {  ","       bytes_mut.promote_to_shared(1);  ","   }  ","  let mut bytes_mut = BytesMut::with_capacity(10);  ","  bytes_mut.ptr = NonNull::new(Box::into_raw(Box::new(vec![0u8; 10])) as *mut u8).unwrap();  ","  bytes_mut.len = 10;  ","  bytes_mut.cap = 10;  ","  bytes_mut.data = ((2 << ORIGINAL_CAPACITY_OFFSET) | (0 << VEC_POS_OFFSET)) as *mut Shared;  ","   assert_eq!(unsafe { (*bytes_mut.data).ref_count.load(Ordering::SeqCst) }, 1);  ","}"],[{"start_line":1020,"start_column":23,"end_line":1020,"end_column":35,"positive":false,"negative":false},{"start_line":1020,"start_column":39,"end_line":1020,"end_column":51,"positive":false,"negative":false}]],[["{","  let mut bytes_mut = BytesMut::with_capacity(15);","  bytes_mut.ptr = NonNull::new(Box::into_raw(Vec::into_boxed_slice(vec![1u8; 15])) as *mut u8).unwrap();","  bytes_mut.len = 15;","  bytes_mut.cap = 15;","  bytes_mut.data = ((3 << ORIGINAL_CAPACITY_OFFSET) | (1 << VEC_POS_OFFSET)) as *mut Shared;","   unsafe {","       bytes_mut.promote_to_shared(1);","   }","   let mut bytes_mut = BytesMut::with_capacity(15);","   let ptr: *mut u8 = Box::into_raw(Vec::into_boxed_slice(vec![1u8; 15])) as *mut u8;","   bytes_mut.ptr = NonNull::new(ptr).unwrap();","   bytes_mut.len = 15;","   bytes_mut.cap = 15;","  bytes_mut.data = (((3 << ORIGINAL_CAPACITY_OFFSET) | (1 << VEC_POS_OFFSET)) as *mut Shared).cast();","  let shared_ptr: *mut Shared = bytes_mut.data;","   assert_eq!(bytes_mut.kind(), KIND_VEC);","}"],[{"start_line":1020,"start_column":23,"end_line":1020,"end_column":35,"positive":false,"negative":false},{"start_line":1020,"start_column":39,"end_line":1020,"end_column":51,"positive":false,"negative":false}]],[["{","  let mut bytes_mut = BytesMut::with_capacity(15);","  bytes_mut.ptr = NonNull::new(Box::into_raw(Box::new(vec![1u8; 15])) as *mut u8).unwrap();","   bytes_mut.len = 15;","   bytes_mut.cap = 15;","   bytes_mut.data = ((3 << ORIGINAL_CAPACITY_OFFSET) | (1 << VEC_POS_OFFSET)) as *mut Shared;","    unsafe {","        bytes_mut.promote_to_shared(1);","    }","   let mut bytes_mut = BytesMut::with_capacity(15);","   let ptr: *mut u8 = Box::into_raw(Box::new(vec![1u8; 15])) as *mut u8;","   bytes_mut.ptr = NonNull::new(ptr).unwrap();","    bytes_mut.len = 15;","    bytes_mut.cap = 15;","   bytes_mut.data = ((3 << ORIGINAL_CAPACITY_OFFSET) | (1 << VEC_POS_OFFSET)) as *mut Shared;","   let shared_ptr: *mut Shared = bytes_mut.data;","   assert_eq!(unsafe { (*shared_ptr).ref_count.load(Ordering::SeqCst) }, 1);","    assert_eq!(unsafe { (*shared_ptr).ref_count.load(Ordering::SeqCst) }, 1);","}"],[{"start_line":1020,"start_column":23,"end_line":1020,"end_column":35,"positive":false,"negative":false},{"start_line":1020,"start_column":39,"end_line":1020,"end_column":51,"positive":false,"negative":false}]],[["{","  let mut bytes_mut = BytesMut::with_capacity(15);","  bytes_mut.ptr = NonNull::new(Box::into_raw(Box::new(vec![1u8; 15])) as *mut u8).unwrap();","  bytes_mut.len = 15;","  bytes_mut.cap = 15;","  bytes_mut.data = &mut bytes_mut as *mut _ as *mut Shared;","  unsafe {","      bytes_mut.promote_to_shared(1);","  }","  let mut bytes_mut = BytesMut::with_capacity(15);","  let ptr: *mut u8 = Box::into_raw(Box::new(vec![1u8; 15])) as *mut u8;","  bytes_mut.ptr = NonNull::new(ptr).unwrap();","  bytes_mut.len = 15;","  bytes_mut.cap = 15;","  bytes_mut.data = &mut bytes_mut as *mut _ as *mut Shared;","  let shared_ptr: *mut Shared = bytes_mut.data;","   assert_ne!(unsafe { (*shared_ptr).ref_count.load(Ordering::SeqCst) }, 2);","}"],[{"start_line":1020,"start_column":23,"end_line":1020,"end_column":35,"positive":false,"negative":false},{"start_line":1020,"start_column":39,"end_line":1020,"end_column":51,"positive":false,"negative":false}]],[["{","  let mut bytes_mut = BytesMut::with_capacity(15);","  bytes_mut.ptr = NonNull::new(Box::into_raw(Box::new([1u8; 15])) as *mut u8).unwrap();","  bytes_mut.len = 15;","   bytes_mut.cap = 15;","   bytes_mut.data = ((3 << ORIGINAL_CAPACITY_OFFSET) | (1 << VEC_POS_OFFSET)) as *mut Shared; // cast to pointer type","   unsafe {","       bytes_mut.promote_to_shared(1);","   }","  let mut bytes_mut = BytesMut::with_capacity(15);","  let ptr: *mut u8 = Box::into_raw(Box::new([1u8; 15])) as *mut u8;","  bytes_mut.ptr = NonNull::new(ptr).unwrap();","  bytes_mut.len = 15;","  bytes_mut.cap = 15;","  bytes_mut.data = ((3 << ORIGINAL_CAPACITY_OFFSET) | (1 << VEC_POS_OFFSET)) as *mut Shared; // cast to pointer type","  let shared_ptr: *mut Shared = bytes_mut.data;","  assert_eq!(unsafe { (*shared_ptr).vec.as_slice() }, &[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1]);","}"],[{"start_line":1020,"start_column":23,"end_line":1020,"end_column":35,"positive":false,"negative":false},{"start_line":1020,"start_column":39,"end_line":1020,"end_column":51,"positive":false,"negative":false}]],[["{","   let mut bytes_mut = BytesMut::with_capacity(10);  ","  bytes_mut.ptr = NonNull::new(Box::into_raw(Box::new([0u8; 10])) as *mut u8).unwrap();  ","  bytes_mut.len = 10;  ","  bytes_mut.cap = 10;  ","  bytes_mut.data = ((2 << ORIGINAL_CAPACITY_OFFSET) | (2 << VEC_POS_OFFSET)) as *mut Shared;  ","  unsafe {  ","      bytes_mut.promote_to_shared(2);  ","  }  ","  let mut bytes_mut = BytesMut::with_capacity(10);  ","  bytes_mut.ptr = NonNull::new(Box::into_raw(Box::new([0u8; 10])) as *mut u8).unwrap();  ","  bytes_mut.len = 10;  ","  bytes_mut.cap = 10;  ","  bytes_mut.data = ((2 << ORIGINAL_CAPACITY_OFFSET) | (2 << VEC_POS_OFFSET)) as *mut Shared;  ","  assert_eq!(bytes_mut.kind(), KIND_VEC);  ","}"],[{"start_line":1020,"start_column":23,"end_line":1020,"end_column":35,"positive":false,"negative":false},{"start_line":1020,"start_column":39,"end_line":1020,"end_column":51,"positive":false,"negative":false}]],[["{","  let mut bytes_mut = BytesMut::with_capacity(10);  ","  bytes_mut.ptr = NonNull::new(Box::into_raw(Box::new([0u8; 10])) as *mut u8).unwrap();  ","  bytes_mut.len = 10;  ","  bytes_mut.cap = 10;  ","  bytes_mut.data = ((2 << ORIGINAL_CAPACITY_OFFSET) | (2 << VEC_POS_OFFSET)) as *mut Shared;  ","  unsafe {  ","      bytes_mut.promote_to_shared(2);  ","  }  ","  let mut bytes_mut = BytesMut::with_capacity(10);  ","  bytes_mut.ptr = NonNull::new(Box::into_raw(Box::new([0u8; 10])) as *mut u8).unwrap();  ","  bytes_mut.len = 10;  ","  bytes_mut.cap = 10;  ","  bytes_mut.data = ((2 << ORIGINAL_CAPACITY_OFFSET) | (2 << VEC_POS_OFFSET)) as *mut Shared;  ","  assert!(bytes_mut.data as usize & KIND_MASK == KIND_VEC);  ","}"],[{"start_line":1020,"start_column":23,"end_line":1020,"end_column":35,"positive":false,"negative":false},{"start_line":1020,"start_column":39,"end_line":1020,"end_column":51,"positive":false,"negative":false}]],[["{","  let mut bytes_mut = BytesMut::with_capacity(10);","  bytes_mut.ptr = NonNull::new(Box::into_raw(Box::new([0u8; 10])) as *mut u8).unwrap();","  bytes_mut.len = 10;","  bytes_mut.cap = 10;","  bytes_mut.data = Box::into_raw(Box::new((2 << ORIGINAL_CAPACITY_OFFSET) | (2 << VEC_POS_OFFSET))) as *mut Shared;","  unsafe {","      bytes_mut.promote_to_shared(2);","  }","  let mut bytes_mut = BytesMut::with_capacity(10);","  bytes_mut.ptr = NonNull::new(Box::into_raw(Box::new([0u8; 10])) as *mut u8).unwrap();","  bytes_mut.len = 10;","  bytes_mut.cap = 10;","  bytes_mut.data = Box::into_raw(Box::new((2 << ORIGINAL_CAPACITY_OFFSET) | (2 << VEC_POS_OFFSET))) as *mut Shared;","  assert!(bytes_mut.len == 10);","}"],[{"start_line":1020,"start_column":23,"end_line":1020,"end_column":35,"positive":false,"negative":false},{"start_line":1020,"start_column":39,"end_line":1020,"end_column":51,"positive":false,"negative":false}]],[["{","  let mut bytes_mut = BytesMut::with_capacity(10);","  bytes_mut.ptr = NonNull::new(Box::into_raw(Box::new(vec![0u8; 10])) as *mut u8).unwrap();","  bytes_mut.len = 10;","  bytes_mut.cap = 10;","  bytes_mut.data = ((2 << ORIGINAL_CAPACITY_OFFSET) | (2 << VEC_POS_OFFSET)) as *mut Shared;","  unsafe {","      bytes_mut.promote_to_shared(2);","  }","  let mut bytes_mut = BytesMut::with_capacity(10);","  bytes_mut.ptr = NonNull::new(Box::into_raw(Box::new(vec![0u8; 10])) as *mut u8).unwrap();","  bytes_mut.len = 10;","  bytes_mut.cap = 10;","  bytes_mut.data = ((2 << ORIGINAL_CAPACITY_OFFSET) | (2 << VEC_POS_OFFSET)) as *mut Shared;","  assert!(bytes_mut.cap == 10);","}"],[{"start_line":1020,"start_column":23,"end_line":1020,"end_column":35,"positive":false,"negative":false},{"start_line":1020,"start_column":39,"end_line":1020,"end_column":51,"positive":false,"negative":false}]],[["{","  let mut bytes_mut = BytesMut::with_capacity(10);","  bytes_mut.ptr = NonNull::new(Box::into_raw(Box::new([0u8; 10])) as *mut u8).unwrap();","   bytes_mut.len = 10;","   bytes_mut.cap = 10;","   bytes_mut.data = (2 << ORIGINAL_CAPACITY_OFFSET) as *mut Shared;  // Ensure type matches","   unsafe {","       bytes_mut.promote_to_shared(1);","   }","   let bytes_mut = BytesMut::with_capacity(10);","   assert_eq!(bytes_mut.len, 10);","}"],[{"start_line":1020,"start_column":23,"end_line":1020,"end_column":35,"positive":false,"negative":false},{"start_line":1020,"start_column":39,"end_line":1020,"end_column":51,"positive":false,"negative":false}]],[["{","    let mut bytes_mut = BytesMut::with_capacity(10);","   bytes_mut.ptr = NonNull::new(Box::into_raw(Box::new([0u8; 10])) as *mut u8).unwrap();","   bytes_mut.len = 10;","   bytes_mut.cap = 10;","  bytes_mut.data = (Box::into_raw(Box::new((2 << ORIGINAL_CAPACITY_OFFSET) | (0 << VEC_POS_OFFSET))) as *mut Shared);","    unsafe {","        bytes_mut.promote_to_shared(1);","    }","    let bytes_mut = BytesMut::with_capacity(10);","    assert_eq!(bytes_mut.cap, 10);","}"],[{"start_line":1020,"start_column":23,"end_line":1020,"end_column":35,"positive":false,"negative":false},{"start_line":1020,"start_column":39,"end_line":1020,"end_column":51,"positive":false,"negative":false}]],[["{","  let mut bytes_mut = BytesMut::with_capacity(10);  ","  bytes_mut.ptr = NonNull::new(Box::into_raw(Box::new(vec![0u8; 10])) as *mut u8).unwrap();  ","   bytes_mut.len = 10;","   bytes_mut.cap = 10;","   bytes_mut.data = (2 << ORIGINAL_CAPACITY_OFFSET) as *mut Shared; // correct type assignment","   unsafe {","       bytes_mut.promote_to_shared(1);","   }","   let bytes_mut = BytesMut::with_capacity(10);","   assert_eq!(bytes_mut.kind(), KIND_VEC);","}"],[{"start_line":1020,"start_column":23,"end_line":1020,"end_column":35,"positive":false,"negative":false},{"start_line":1020,"start_column":39,"end_line":1020,"end_column":51,"positive":false,"negative":false}]],[["{"," let mut bytes_mut = BytesMut::with_capacity(10);  "," bytes_mut.ptr = NonNull::new(Box::into_raw(Box::<[u8; 10]>::new([0u8; 10])) as *mut u8).unwrap();  ","  bytes_mut.len = 10;  ","  bytes_mut.cap = 10;  ","  bytes_mut.data = (2 << ORIGINAL_CAPACITY_OFFSET) as *mut Shared;  ","  unsafe {  ","      bytes_mut.promote_to_shared(1);  ","  }  ","  let mut bytes_mut = BytesMut::with_capacity(10);  ","  assert_eq!(bytes_mut.data as usize & ORIGINAL_CAPACITY_MASK, 2 << ORIGINAL_CAPACITY_OFFSET);  ","}"],[{"start_line":1020,"start_column":23,"end_line":1020,"end_column":35,"positive":false,"negative":false},{"start_line":1020,"start_column":39,"end_line":1020,"end_column":51,"positive":false,"negative":false}]],[["{"," let mut bytes_mut = BytesMut::with_capacity(10);"," bytes_mut.ptr = NonNull::new(Box::into_raw(Box::new([0u8; 10])) as *mut u8).unwrap();"," bytes_mut.len = 10;"," bytes_mut.cap = 10;","  bytes_mut.data = (2 << ORIGINAL_CAPACITY_OFFSET) as *mut Shared; // Cast to the correct type","   unsafe {","       bytes_mut.promote_to_shared(1);","   }","   let bytes_mut = BytesMut::with_capacity(10);","   assert_eq!(bytes_mut.data as usize & NOT_VEC_POS_MASK, 0);","}"],[{"start_line":1020,"start_column":23,"end_line":1020,"end_column":35,"positive":false,"negative":false},{"start_line":1020,"start_column":39,"end_line":1020,"end_column":51,"positive":false,"negative":false}]],[["{","  let mut bytes_mut = BytesMut::with_capacity(10);  ","  bytes_mut.ptr = NonNull::new(Box::into_raw(Box::new([0u8; 10])) as *mut u8).unwrap();  ","  bytes_mut.len = 10;  ","   bytes_mut.cap = 10;  ","   bytes_mut.data = (2 << ORIGINAL_CAPACITY_OFFSET) as *mut Shared;  ","   unsafe {  ","       bytes_mut.promote_to_shared(1);  ","   }  ","   let bytes_mut = BytesMut::with_capacity(10);  ","   assert!(!bytes_mut.data.is_null());  ","}"],[{"start_line":1020,"start_column":23,"end_line":1020,"end_column":35,"positive":false,"negative":false},{"start_line":1020,"start_column":39,"end_line":1020,"end_column":51,"positive":false,"negative":false}]],[["{","  let mut bytes_mut = BytesMut::with_capacity(17);  ","  bytes_mut.ptr = NonNull::new(Box::into_raw(Box::new(vec![1u8; 17])) as *mut u8).unwrap();  ","  bytes_mut.len = 17;  ","  bytes_mut.cap = 17;  ","  bytes_mut.data = ((3 << ORIGINAL_CAPACITY_OFFSET) | (0 << VEC_POS_OFFSET)) as *mut Shared;  ","   unsafe {","       bytes_mut.promote_to_shared(1);","   }","  let mut bytes_mut = BytesMut::with_capacity(17);  ","  bytes_mut.ptr = NonNull::new(Box::into_raw(Box::new(vec![1u8; 17])) as *mut u8).unwrap();  ","  bytes_mut.len = 17;  ","  bytes_mut.cap = 17;  ","  bytes_mut.data = ((3 << ORIGINAL_CAPACITY_OFFSET) | (0 << VEC_POS_OFFSET)) as *mut Shared;  ","  assert_eq!(bytes_mut.data as usize & KIND_MASK, KIND_ARC);  ","}"],[{"start_line":1020,"start_column":23,"end_line":1020,"end_column":35,"positive":false,"negative":false},{"start_line":1020,"start_column":39,"end_line":1020,"end_column":51,"positive":false,"negative":false}]],[["{","   let mut bytes_mut = BytesMut::with_capacity(17);","   bytes_mut.ptr = NonNull::new(Box::into_raw(Box::new(vec![1u8; 17])) as *mut u8).unwrap();","   bytes_mut.len = 17;","   bytes_mut.cap = 17;","  bytes_mut.data = ((3 << ORIGINAL_CAPACITY_OFFSET) | (0 << VEC_POS_OFFSET)) as *mut Shared;","   unsafe {","       bytes_mut.promote_to_shared(1);","   }","   let mut bytes_mut = BytesMut::with_capacity(17);","   bytes_mut.ptr = NonNull::new(Box::into_raw(Box::new(vec![1u8; 17])) as *mut u8).unwrap();","   bytes_mut.len = 17;","   bytes_mut.cap = 17;","  bytes_mut.data = ((3 << ORIGINAL_CAPACITY_OFFSET) | (0 << VEC_POS_OFFSET)) as *mut Shared;","   assert_eq!(bytes_mut.len, 17);","}"],[{"start_line":1020,"start_column":23,"end_line":1020,"end_column":35,"positive":false,"negative":false},{"start_line":1020,"start_column":39,"end_line":1020,"end_column":51,"positive":false,"negative":false}]],[["{","  let mut bytes_mut = BytesMut::with_capacity(17);","  bytes_mut.ptr = NonNull::new(Box::into_raw(Box::new(vec![1u8; 17])) as *mut u8).unwrap();","  bytes_mut.len = 17;","  bytes_mut.cap = 17;","  bytes_mut.data = Box::into_raw(Box::new((3 << ORIGINAL_CAPACITY_OFFSET) | (0 << VEC_POS_OFFSET))) as *mut Shared;","  unsafe {","      bytes_mut.promote_to_shared(1);","  }","  let mut bytes_mut = BytesMut::with_capacity(17);","  bytes_mut.ptr = NonNull::new(Box::into_raw(Box::new(vec![1u8; 17])) as *mut u8).unwrap();","  bytes_mut.len = 17;","  bytes_mut.cap = 17;","  bytes_mut.data = Box::into_raw(Box::new((3 << ORIGINAL_CAPACITY_OFFSET) | (0 << VEC_POS_OFFSET))) as *mut Shared;","  assert_eq!(bytes_mut.cap, 17);","}"],[{"start_line":1020,"start_column":23,"end_line":1020,"end_column":35,"positive":false,"negative":false},{"start_line":1020,"start_column":39,"end_line":1020,"end_column":51,"positive":false,"negative":false}]],[["{","  let mut bytes_mut = BytesMut::with_capacity(17);","  bytes_mut.ptr = NonNull::new(Box::into_raw(Box::new([1u8; 17])) as *mut u8).unwrap();","  bytes_mut.len = 17;","  bytes_mut.cap = 17;","  bytes_mut.data = Box::into_raw(Box::new((3 << ORIGINAL_CAPACITY_OFFSET) | (0 << VEC_POS_OFFSET))) as *mut Shared;","  unsafe {","      bytes_mut.promote_to_shared(1);","  }","  let mut bytes_mut = BytesMut::with_capacity(17);","  bytes_mut.ptr = NonNull::new(Box::into_raw(Box::new([1u8; 17])) as *mut u8).unwrap();","  bytes_mut.len = 17;","  bytes_mut.cap = 17;","  bytes_mut.data = Box::into_raw(Box::new((3 << ORIGINAL_CAPACITY_OFFSET) | (0 << VEC_POS_OFFSET))) as *mut Shared;","   assert!(bytes_mut.ptr.as_ptr() == Box::into_raw(Box::new([1u8; 17])) as *mut u8);","}"],[{"start_line":1020,"start_column":23,"end_line":1020,"end_column":35,"positive":false,"negative":false},{"start_line":1020,"start_column":39,"end_line":1020,"end_column":51,"positive":false,"negative":false}]],[["{","  let mut bytes_mut = BytesMut::with_capacity(17);  ","  bytes_mut.ptr = NonNull::new(Box::into_raw(Box::new(vec![1u8; 17])) as *mut u8).unwrap();  ","  bytes_mut.len = 17;  ","  bytes_mut.cap = 17;  ","  bytes_mut.data = (3 << ORIGINAL_CAPACITY_OFFSET) as *mut Shared;  ","  unsafe {  ","      bytes_mut.promote_to_shared(1);  ","  }  ","  let mut bytes_mut = BytesMut::with_capacity(17);  ","  bytes_mut.ptr = NonNull::new(Box::into_raw(Box::new(vec![1u8; 17])) as *mut u8).unwrap();  ","  bytes_mut.len = 17;  ","  bytes_mut.cap = 17;  ","  bytes_mut.data = (3 << ORIGINAL_CAPACITY_OFFSET) as *mut Shared;  ","  assert!(unsafe { bytes_mut.kind() } == KIND_VEC);  ","}"],[{"start_line":1020,"start_column":23,"end_line":1020,"end_column":35,"positive":false,"negative":false},{"start_line":1020,"start_column":39,"end_line":1020,"end_column":51,"positive":false,"negative":false}]],[["{","   let mut bytes_mut = BytesMut::with_capacity(10);","   bytes_mut.ptr = NonNull::new(Box::into_raw(Box::new(Vec::<u8>::from([7u8; 10]))) as *mut u8).unwrap();","   bytes_mut.len = 10;","   bytes_mut.cap = 10;","  bytes_mut.data = ((2 << ORIGINAL_CAPACITY_OFFSET) | (3 << VEC_POS_OFFSET)) as *mut Shared;","  unsafe {","      bytes_mut.promote_to_shared(1);","  }","  let mut bytes_mut = BytesMut::with_capacity(10);","  bytes_mut.ptr = NonNull::new(Box::into_raw(Box::new(Vec::<u8>::from([7u8; 10]))) as *mut u8).unwrap();","  bytes_mut.len = 10;","  bytes_mut.cap = 10;","  bytes_mut.data = ((2 << ORIGINAL_CAPACITY_OFFSET) | (3 << VEC_POS_OFFSET)) as *mut Shared;","   assert_eq!(bytes_mut.kind(), KIND_VEC);","}"],[{"start_line":1020,"start_column":23,"end_line":1020,"end_column":35,"positive":false,"negative":false},{"start_line":1020,"start_column":39,"end_line":1020,"end_column":51,"positive":false,"negative":false}]],[["{","   let mut bytes_mut = BytesMut::with_capacity(10);","   bytes_mut.ptr = NonNull::new(Box::into_raw(Box::new(vec![7u8; 10])) as *mut u8).unwrap();","   bytes_mut.len = 10;","   bytes_mut.cap = 10;","  bytes_mut.data = ((2 << ORIGINAL_CAPACITY_OFFSET) | (3 << VEC_POS_OFFSET)) as *mut Shared;","  unsafe {","      bytes_mut.promote_to_shared(1);","  }","  let mut bytes_mut = BytesMut::with_capacity(10);","  bytes_mut.ptr = NonNull::new(Box::into_raw(Box::new(vec![7u8; 10])) as *mut u8).unwrap();","  bytes_mut.len = 10;","  bytes_mut.cap = 10;","  bytes_mut.data = ((2 << ORIGINAL_CAPACITY_OFFSET) | (3 << VEC_POS_OFFSET)) as *mut Shared;","   unsafe {","   bytes_mut.promote_to_shared(1);","   }","   assert_eq!(bytes_mut.data as usize & KIND_MASK, KIND_ARC);","}"],[{"start_line":1020,"start_column":23,"end_line":1020,"end_column":35,"positive":false,"negative":false},{"start_line":1020,"start_column":39,"end_line":1020,"end_column":51,"positive":false,"negative":false}]],[["{"," let mut bytes_mut = BytesMut::with_capacity(10);  "," bytes_mut.ptr = NonNull::new(Box::into_raw(Box::new([7u8; 10])) as *mut u8).unwrap();  ","  bytes_mut.len = 10;","  bytes_mut.cap = 10;","  bytes_mut.data = ((2 << ORIGINAL_CAPACITY_OFFSET) | (3 << VEC_POS_OFFSET)) as *mut Shared;","   unsafe {","       bytes_mut.promote_to_shared(1);","   }","  let mut bytes_mut = BytesMut::with_capacity(10);  ","  bytes_mut.ptr = NonNull::new(Box::into_raw(Box::new([7u8; 10])) as *mut u8).unwrap();  ","  bytes_mut.len = 10;  ","  bytes_mut.cap = 10;  ","   bytes_mut.data = ((2 << ORIGINAL_CAPACITY_OFFSET) | (3 << VEC_POS_OFFSET)) as *mut Shared;","    unsafe {","    bytes_mut.promote_to_shared(1);","    }","    assert_eq!(bytes_mut.len, 10);","}"],[{"start_line":1020,"start_column":23,"end_line":1020,"end_column":35,"positive":false,"negative":false},{"start_line":1020,"start_column":39,"end_line":1020,"end_column":51,"positive":false,"negative":false}]],[["{","   let mut bytes_mut = BytesMut::with_capacity(10);","   bytes_mut.ptr = NonNull::new(Box::into_raw(Box::new(vec![7u8; 10])) as *mut u8).unwrap();","   bytes_mut.len = 10;","   bytes_mut.cap = 10;","  bytes_mut.data = ((2 << ORIGINAL_CAPACITY_OFFSET) | (3 << VEC_POS_OFFSET)) as *mut Shared;","  unsafe {","      bytes_mut.promote_to_shared(1);","  }","  let mut bytes_mut = BytesMut::with_capacity(10);","  bytes_mut.ptr = NonNull::new(Box::into_raw(Box::new(vec![7u8; 10])) as *mut u8).unwrap();","  bytes_mut.len = 10;","  bytes_mut.cap = 10;","  bytes_mut.data = ((2 << ORIGINAL_CAPACITY_OFFSET) | (3 << VEC_POS_OFFSET)) as *mut Shared;","   unsafe {","   bytes_mut.promote_to_shared(1);","   }","   assert_eq!(bytes_mut.cap, 10);","}"],[{"start_line":1020,"start_column":23,"end_line":1020,"end_column":35,"positive":false,"negative":false},{"start_line":1020,"start_column":39,"end_line":1020,"end_column":51,"positive":false,"negative":false}]],[["{","    let mut bytes_mut = BytesMut::with_capacity(16);","    unsafe {","        bytes_mut.promote_to_shared(1);","    }","    let mut bytes_mut = BytesMut::with_capacity(16);","    unsafe {","    bytes_mut.promote_to_shared(1);","    }","    assert_eq!(bytes_mut.kind(), KIND_ARC);","}"],[{"start_line":1020,"start_column":23,"end_line":1020,"end_column":35,"positive":true,"negative":false},{"start_line":1020,"start_column":39,"end_line":1020,"end_column":51,"positive":false,"negative":false}]],[["{","    let mut bytes_mut = BytesMut::with_capacity(16);","    unsafe {","        bytes_mut.promote_to_shared(1);","    }","    let mut bytes_mut = BytesMut::with_capacity(16);","    unsafe {","    bytes_mut.promote_to_shared(1);","    }","    assert!(bytes_mut.len() > 0);","}"],[{"start_line":1020,"start_column":23,"end_line":1020,"end_column":35,"positive":true,"negative":false},{"start_line":1020,"start_column":39,"end_line":1020,"end_column":51,"positive":false,"negative":false}]],[["{","    let mut bytes_mut = BytesMut::with_capacity(16);","    unsafe {","        bytes_mut.promote_to_shared(1);","    }","    let mut bytes_mut = BytesMut::with_capacity(16);","    unsafe {","    bytes_mut.promote_to_shared(1);","    }","    assert!(bytes_mut.capacity() >= 16);","}"],[{"start_line":1020,"start_column":23,"end_line":1020,"end_column":35,"positive":true,"negative":false},{"start_line":1020,"start_column":39,"end_line":1020,"end_column":51,"positive":false,"negative":false}]],[["{","    let mut bytes_mut = BytesMut::with_capacity(16);","    unsafe {","        bytes_mut.promote_to_shared(1);","    }","    let mut bytes_mut = BytesMut::with_capacity(16);","    unsafe {","    bytes_mut.promote_to_shared(1);","    }","    assert!(unsafe { !bytes_mut.data.is_null() });","}"],[{"start_line":1020,"start_column":23,"end_line":1020,"end_column":35,"positive":true,"negative":false},{"start_line":1020,"start_column":39,"end_line":1020,"end_column":51,"positive":false,"negative":false}]],[["{","    let mut bytes_mut = BytesMut::with_capacity(32);","    unsafe {","        bytes_mut.promote_to_shared(2);","    }","    let bytes_mut = BytesMut::with_capacity(32);","    assert_eq!(bytes_mut.len(), 0);","}"],[{"start_line":1020,"start_column":23,"end_line":1020,"end_column":35,"positive":false,"negative":true},{"start_line":1020,"start_column":39,"end_line":1020,"end_column":51,"positive":true,"negative":false}]],[["{","    let mut bytes_mut = BytesMut::with_capacity(32);","    unsafe {","        bytes_mut.promote_to_shared(2);","    }","    let bytes_mut = BytesMut::with_capacity(32);","    assert_eq!(bytes_mut.capacity(), 32);","}"],[{"start_line":1020,"start_column":23,"end_line":1020,"end_column":35,"positive":false,"negative":true},{"start_line":1020,"start_column":39,"end_line":1020,"end_column":51,"positive":true,"negative":false}]],[["{","    let mut bytes_mut = BytesMut::with_capacity(32);","    unsafe {","        bytes_mut.promote_to_shared(2);","    }","    let bytes_mut = BytesMut::with_capacity(32);","    assert!(bytes_mut.is_empty());","}"],[{"start_line":1020,"start_column":23,"end_line":1020,"end_column":35,"positive":false,"negative":true},{"start_line":1020,"start_column":39,"end_line":1020,"end_column":51,"positive":true,"negative":false}]],[["{","   let mut bytes_mut = BytesMut::with_capacity(32);","   unsafe {","       bytes_mut.promote_to_shared(2);","   }","   let mut bytes_mut = BytesMut::with_capacity(32);","   unsafe {","       bytes_mut.promote_to_shared(2);","   }","   assert_eq!(bytes_mut.kind(), KIND_ARC);","}"],[{"start_line":1020,"start_column":23,"end_line":1020,"end_column":35,"positive":false,"negative":true},{"start_line":1020,"start_column":39,"end_line":1020,"end_column":51,"positive":true,"negative":false}]],[["{","   let mut bytes_mut = BytesMut::with_capacity(32);","   unsafe {","       bytes_mut.promote_to_shared(2);","   }","   let mut bytes_mut = BytesMut::with_capacity(32);","   unsafe {","       bytes_mut.promote_to_shared(2);","    }","    assert_eq!(bytes_mut.data as usize & KIND_MASK, KIND_ARC);","}"],[{"start_line":1020,"start_column":23,"end_line":1020,"end_column":35,"positive":false,"negative":true},{"start_line":1020,"start_column":39,"end_line":1020,"end_column":51,"positive":true,"negative":false}]],[["{","   let mut bytes_mut = BytesMut::with_capacity(32);","   unsafe {","       bytes_mut.promote_to_shared(2);","   }","   let mut bytes_mut = BytesMut::with_capacity(32);","   unsafe {","       bytes_mut.promote_to_shared(2);","   }","    assert_eq!(bytes_mut.data as usize & ORIGINAL_CAPACITY_MASK, 0);","}"],[{"start_line":1020,"start_column":23,"end_line":1020,"end_column":35,"positive":false,"negative":true},{"start_line":1020,"start_column":39,"end_line":1020,"end_column":51,"positive":true,"negative":false}]],[["{","    let mut bytes_mut = BytesMut::new();","    unsafe {","        bytes_mut.promote_to_shared(0);","    }","    let mut bytes_mut = BytesMut::new();","    assert!(bytes_mut.kind() == KIND_VEC);","}"],[{"start_line":1020,"start_column":23,"end_line":1020,"end_column":35,"positive":false,"negative":true},{"start_line":1020,"start_column":39,"end_line":1020,"end_column":51,"positive":false,"negative":true}]],[["{","    let mut bytes_mut = BytesMut::new();","    unsafe {","        bytes_mut.promote_to_shared(0);","    }","    let mut bytes_mut = BytesMut::new();","    assert!(bytes_mut.capacity() == 0);","}"],[{"start_line":1020,"start_column":23,"end_line":1020,"end_column":35,"positive":false,"negative":true},{"start_line":1020,"start_column":39,"end_line":1020,"end_column":51,"positive":false,"negative":true}]],[["{","    let mut bytes_mut = BytesMut::new();","    unsafe {","        bytes_mut.promote_to_shared(0);","    }","    let mut bytes_mut = BytesMut::new();","    assert!(bytes_mut.len() == 0);","}"],[{"start_line":1020,"start_column":23,"end_line":1020,"end_column":35,"positive":false,"negative":true},{"start_line":1020,"start_column":39,"end_line":1020,"end_column":51,"positive":false,"negative":true}]],[["{","    let mut bytes_mut = BytesMut::new();","    unsafe {","        bytes_mut.promote_to_shared(0);","    }","    let mut bytes_mut = BytesMut::new();","    assert!(bytes_mut.is_empty() == true);","}"],[{"start_line":1020,"start_column":23,"end_line":1020,"end_column":35,"positive":false,"negative":true},{"start_line":1020,"start_column":39,"end_line":1020,"end_column":51,"positive":false,"negative":true}]],[["{","    let mut bytes_mut = BytesMut::new();","    unsafe {","        bytes_mut.promote_to_shared(3);","    }","    let mut bytes_mut = BytesMut::new();","    assert_eq!(bytes_mut.kind(), KIND_VEC);","}"],[{"start_line":1020,"start_column":23,"end_line":1020,"end_column":35,"positive":false,"negative":true},{"start_line":1020,"start_column":39,"end_line":1020,"end_column":51,"positive":false,"negative":true}]],[["{","    let mut bytes_mut = BytesMut::new();","    unsafe {","        bytes_mut.promote_to_shared(3);","    }","    let mut bytes_mut = BytesMut::new();","    assert!(bytes_mut.ptr.as_ptr().is_null());","}"],[{"start_line":1020,"start_column":23,"end_line":1020,"end_column":35,"positive":false,"negative":true},{"start_line":1020,"start_column":39,"end_line":1020,"end_column":51,"positive":false,"negative":true}]],[["{","    let mut bytes_mut = BytesMut::new();","    unsafe {","        bytes_mut.promote_to_shared(3);","    }","    let mut bytes_mut = BytesMut::new();","    assert_eq!(bytes_mut.len(), 0);","}"],[{"start_line":1020,"start_column":23,"end_line":1020,"end_column":35,"positive":false,"negative":true},{"start_line":1020,"start_column":39,"end_line":1020,"end_column":51,"positive":false,"negative":true}]],[["{","    let mut bytes_mut = BytesMut::new();","    unsafe {","        bytes_mut.promote_to_shared(3);","    }","    let mut bytes_mut = BytesMut::new();","    assert_eq!(bytes_mut.cap, 0);","}"],[{"start_line":1020,"start_column":23,"end_line":1020,"end_column":35,"positive":false,"negative":true},{"start_line":1020,"start_column":39,"end_line":1020,"end_column":51,"positive":false,"negative":true}]],[["{","    let mut bytes_mut = BytesMut::new();","    unsafe {","        bytes_mut.promote_to_shared(3);","    }","    let mut bytes_mut = BytesMut::new();","    assert!(bytes_mut.data as usize & KIND_MASK == KIND_VEC);","}"],[{"start_line":1020,"start_column":23,"end_line":1020,"end_column":35,"positive":false,"negative":true},{"start_line":1020,"start_column":39,"end_line":1020,"end_column":51,"positive":false,"negative":true}]],[["{","    let mut bytes_mut = BytesMut::new();","    unsafe {","        bytes_mut.promote_to_shared(3);","    }","    let mut bytes_mut = BytesMut::new();","    assert!(bytes_mut.data as usize & ORIGINAL_CAPACITY_MASK == 0);","}"],[{"start_line":1020,"start_column":23,"end_line":1020,"end_column":35,"positive":false,"negative":true},{"start_line":1020,"start_column":39,"end_line":1020,"end_column":51,"positive":false,"negative":true}]],[["{","  let mut bytes_mut = BytesMut::with_capacity(16);  ","  unsafe {  ","      bytes_mut.data = (KIND_VEC << VEC_POS_OFFSET) as *mut Shared; // Set kind to KIND_VEC  ","       bytes_mut.ptr = NonNull::new(bytes_mut.data as *mut _).unwrap(); // Assure it points to a valid memory  ","       bytes_mut.len = 5; // Set length  ","        bytes_mut.cap = 16; // Set capacity","        bytes_mut.promote_to_shared(1);","    }","    let mut bytes_mut = BytesMut::with_capacity(16);","    assert_eq!(bytes_mut.len, 5);","}"],[{"start_line":1020,"start_column":23,"end_line":1020,"end_column":35,"positive":false,"negative":false},{"start_line":1020,"start_column":39,"end_line":1020,"end_column":51,"positive":false,"negative":false}]]]}