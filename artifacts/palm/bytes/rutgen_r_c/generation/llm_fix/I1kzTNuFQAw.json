{
  "name": "bytes::loom::sync::atomic::<core::sync::atomic::AtomicPtr<T> as loom::sync::atomic::AtomicMut<T>>::with_mut",
  "name_with_impl": "bytes::loom::sync::atomic::{impl#0}::with_mut",
  "mod_info": {
    "name": "loom::sync::atomic",
    "loc": "src/loom.rs:3:5:23:6"
  },
  "visible": true,
  "loc": "src/loom.rs:16:13:21:14",
  "fn_tests": [
    {
      "chain_id": 1,
      "prompt_conds": [],
      "input_infer": "",
      "answers": [
        {
          "uses": [],
          "has_test_mod": false,
          "common": [],
          "chain_tests": [
            {
              "attrs": [],
              "prefix": [],
              "oracles": [],
              "codes": [
                [
                  "{",
                  "  let mut value: i32 = 42;  ",
                  "  let mut ptr = AtomicPtr::new(&mut value);  ",
                  "  ",
                  "  ptr.with_mut(|p| {  ",
                  "      unsafe { **p += 1 };  ",
                  "  });  ",
                  "",
                  "  assert_eq!(unsafe { *ptr.load(Ordering::SeqCst) }, 43);  ",
                  "}"
                ]
              ],
              "can_compile": [
                {
                  "Ok": null
                }
              ],
              "repaired": [
                true
              ]
            },
            {
              "attrs": [],
              "prefix": [],
              "oracles": [],
              "codes": [
                [
                  "{",
                  "   let mut ptr: AtomicPtr<i32> = AtomicPtr::new(std::ptr::null_mut());",
                  "   ",
                  "   let result = std::panic::catch_unwind(std::panic::AssertUnwindSafe(|| {",
                  "       ptr.with_mut(|p| {",
                  "           assert!(p.is_null());",
                  "       });",
                  "   }));",
                  "   ",
                  "   assert!(result.is_err());",
                  "}"
                ]
              ],
              "can_compile": [
                {
                  "Ok": null
                }
              ],
              "repaired": [
                true
              ]
            },
            {
              "attrs": [],
              "prefix": [],
              "oracles": [],
              "codes": [
                [
                  "{",
                  "   let mut value: f64 = 3.14;",
                  "   let mut ptr = AtomicPtr::new(&mut value);",
                  "   ",
                  "   ptr.with_mut(|p| {",
                  "       unsafe { **p = 2.71; }",
                  "   });",
                  "   ",
                  "   assert_eq!(unsafe { *ptr.load(Ordering::SeqCst) }, 2.71);",
                  "}"
                ]
              ],
              "can_compile": [
                {
                  "Ok": null
                }
              ],
              "repaired": [
                true
              ]
            },
            {
              "attrs": [],
              "prefix": [],
              "oracles": [],
              "codes": [
                [
                  "{",
                  "  let mut value: u64 = 100;  ",
                  "  let mut ptr = AtomicPtr::new(&mut value);  ",
                  "  ",
                  "  for _ in 0..5 {  ",
                  "      ptr.with_mut(|p| {  ",
                  "          unsafe { **p += 10 };  ",
                  "      });  ",
                  "  }  ",
                  "  ",
                  "  assert_eq!(unsafe { *ptr.load(Ordering::SeqCst) }, 150);  ",
                  "}"
                ]
              ],
              "can_compile": [
                {
                  "Ok": null
                }
              ],
              "repaired": [
                true
              ]
            }
          ]
        }
      ]
    }
  ]
}