{
  "name": "serde_json::de::de::StreamDeserializer<'de, R, T>::peek_end_of_value",
  "name_with_impl": "serde_json::de::{impl#20}::peek_end_of_value",
  "mod_info": {
    "name": "de",
    "loc": "src/lib.rs:418:1:418:12"
  },
  "visible": false,
  "loc": "src/de.rs:2416:5:2429:6",
  "fn_tests": [
    {
      "chain_id": 2,
      "prompt_conds": [
        "// constraint: self.de.peek() matches core::result::Result::Ok(val) is true\n",
        "// constraint: self.de.peek() matches core::result::Result::Ok(val) is true\n",
        "// constraint: self.de.peek() matches core::result::Result::Err(err) is true\n",
        "// constraint: self.de.peek() matches core::result::Result::Err(err) is false\n",
        "// constraint: self.de.peek() matches core::result::Result::Ok(val) is false\n",
        "// expected return value/type: Err(Error::syntax(\n                    ErrorCode::TrailingCharacters,\n                    position.line,\n                    position.column,\n                ))\n"
      ],
      "input_infer": "",
      "answers": [
        {
          "uses": [],
          "has_test_mod": false,
          "common": [],
          "chain_tests": []
        }
      ]
    },
    {
      "chain_id": 13,
      "prompt_conds": [
        "// constraint: self.de.peek() matches core::result::Result::Ok(val) is true\n",
        "// constraint: self.de.peek() matches core::result::Result::Ok(val) is true\n",
        "// constraint: self.de.peek() matches core::result::Result::Err(err) is true\n",
        "// constraint: self.de.peek() matches  is true\n",
        "// constraint: match $e {\n            core::result::Result::Ok(val) => val,\n            core::result::Result::Err(err) => return core::result::Result::Err(err),\n        } matches None or Some(b' ' | b'\\n' | b'\\t' | b'\\r' | b'\"' | b'[' | b']' | b'{' | b'}' | b',' | b':') is true\n",
        "// expected return value/type: Ok(())\n"
      ],
      "input_infer": "",
      "answers": [
        {
          "uses": [],
          "has_test_mod": false,
          "common": [],
          "chain_tests": [
            {
              "attrs": [],
              "prefix": [],
              "oracles": [],
              "codes": [
                [
                  "{",
                  "    struct TestReader {",
                  "        data: Vec<u8>,",
                  "        position: usize,",
                  "    }",
                  "",
                  "    impl TestReader {",
                  "        fn new(data: Vec<u8>) -> Self {",
                  "            TestReader { data, position: 0 }",
                  "        }",
                  "        ",
                  "        fn peek(&mut self) -> Result<Option<u8>> {",
                  "            if self.position < self.data.len() {",
                  "                Ok(Some(self.data[self.position]))",
                  "            } else {",
                  "                Ok(None)",
                  "            }",
                  "        }",
                  "        ",
                  "        fn read(&mut self) -> Result<Option<u8>> {",
                  "            if self.position < self.data.len() {",
                  "                self.position += 1;",
                  "                Ok(Some(self.data[self.position - 1]))",
                  "            } else {",
                  "                Ok(None)",
                  "            }",
                  "        }",
                  "        ",
                  "       fn peek_position(&self) -> read::Position {  ",
                  "           read::Position {  ",
                  "               line: 1,  ",
                  "               column: (self.position + 1) as usize,  ",
                  "           }  ",
                  "       }  ",
                  "   }  ",
                  "",
                  "    struct Deserializer<R> {",
                  "        read: R,",
                  "    }",
                  "    ",
                  "    impl<R> Deserializer<R> {",
                  "        fn new(read: R) -> Self {",
                  "            Deserializer { read }",
                  "        }",
                  "    }",
                  "",
                  "    struct StreamDeserializer<R> {",
                  "        de: Deserializer<R>,",
                  "    }",
                  "    ",
                  "    impl<R> StreamDeserializer<R>",
                  "    where R: std::ops::Deref<Target = TestReader>, {",
                  "        fn peek_end_of_value(&mut self) -> Result<()> {",
                  "            match self.de.read.peek() {",
                  "                Ok(Some(b' ')) | Ok(Some(b'\\n')) | Ok(Some(b'\\t')) | Ok(Some(b'\\r')) | ",
                  "                Ok(Some(b'\"')) | Ok(Some(b'[')) | Ok(Some(b']')) | Ok(Some(b'{')) | ",
                  "                Ok(Some(b'}')) | Ok(Some(b',')) | Ok(Some(b':')) | Ok(None) => Ok(()),",
                  "                Ok(Some(_)) => {",
                  "                    let position = self.de.read.peek_position();",
                  "                    Err(Error::syntax(ErrorCode::TrailingCharacters, position.line, position.column))",
                  "                }",
                  "                Err(_) => panic!(\"Unexpected error\"),",
                  "            }",
                  "        }",
                  "    }",
                  "",
                  "    let reader = TestReader::new(vec![b' ']);",
                  "    let mut deserializer = StreamDeserializer { de: Deserializer::new(reader) };",
                  "    assert!(deserializer.peek_end_of_value().is_ok());",
                  "}"
                ]
              ],
              "can_compile": [
                {
                  "Err": "   Compiling serde_json v1.0.140 (/home/abezbm/rust-utgen-test-crates-new/json)\nerror[E0599]: the method `peek_end_of_value` exists for struct `StreamDeserializer<TestReader>`, but its trait bounds were not satisfied\n    --> src/de.rs:2780:26\n     |\n2713 |     struct TestReader {\n     |     ----------------- doesn't satisfy `TestReader: Deref`\n...\n2758 |     struct StreamDeserializer<R> {\n     |     ---------------------------- method `peek_end_of_value` not found for this struct\n...\n2780 |     assert!(deserializer.peek_end_of_value().is_ok());\n     |                          ^^^^^^^^^^^^^^^^^ method cannot be called on `StreamDeserializer<TestReader>` due to unsatisfied trait bounds\n     |\nnote: trait bound `TestReader: Deref` was not satisfied\n    --> src/de.rs:2763:14\n     |\n2762 |     impl<R> StreamDeserializer<R>\n     |             ---------------------\n2763 |     where R: std::ops::Deref<Target = TestReader>, {\n     |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ unsatisfied trait bound introduced here\nnote: the trait `Deref` must be implemented\n    --> /home/abezbm/.rustup/toolchains/nightly-2024-07-21-x86_64-unknown-linux-gnu/lib/rustlib/src/rust/library/core/src/ops/deref.rs:136:1\n     |\n136  | pub trait Deref {\n     | ^^^^^^^^^^^^^^^\n\nerror[E0596]: cannot borrow data in dereference of `R` as mutable\n    --> src/de.rs:2765:19\n     |\n2765 |             match self.de.read.peek() {\n     |                   ^^^^^^^^^^^^ cannot borrow as mutable\n     |\n     = help: trait `DerefMut` is required to modify through a dereference, but it is not implemented for `R`\n\nSome errors have detailed explanations: E0596, E0599.\nFor more information about an error, try `rustc --explain E0596`.\nerror: could not compile `serde_json` (lib test) due to 2 previous errors\n"
                }
              ],
              "repaired": [
                true
              ]
            },
            {
              "attrs": [],
              "prefix": [],
              "oracles": [],
              "codes": [
                [
                  "{",
                  "    struct TestReader {",
                  "        data: Vec<u8>,",
                  "        position: usize,",
                  "    }",
                  "",
                  "    impl TestReader {",
                  "        fn new(data: Vec<u8>) -> Self {",
                  "            TestReader { data, position: 0 }",
                  "        }",
                  "",
                  "        fn peek(&mut self) -> Result<Option<u8>> {",
                  "            if self.position < self.data.len() {",
                  "                Ok(Some(self.data[self.position]))",
                  "            } else {",
                  "                Ok(None)",
                  "            }",
                  "        }",
                  "",
                  "        fn read(&mut self) -> Result<Option<u8>> {",
                  "            if self.position < self.data.len() {",
                  "                self.position += 1;",
                  "                Ok(Some(self.data[self.position - 1]))",
                  "            } else {",
                  "                Ok(None)",
                  "            }",
                  "        }",
                  "",
                  "       fn peek_position(&self) -> crate::read::Position {  ",
                  "           crate::read::Position {  ",
                  "               line: 1,  ",
                  "               column: (self.position + 1) as usize,  ",
                  "           }  ",
                  "       }  ",
                  "    }",
                  "",
                  "   struct Deserializer<R> {",
                  "       read: R,",
                  "   }",
                  "",
                  "   impl<R> Deserializer<R> {",
                  "       fn new(read: R) -> Self {",
                  "           Deserializer { read }",
                  "       }",
                  "    }",
                  "",
                  "    struct StreamDeserializer<R> {",
                  "        de: Deserializer<R>,",
                  "    }",
                  "",
                  "   impl<R> StreamDeserializer<R>",
                  "   where R: std::ops::Deref<Target = TestReader> + std::ops::DerefMut, {",
                  "       fn peek_end_of_value(&mut self) -> Result<()> {",
                  "            match self.de.read.peek() {",
                  "                Ok(Some(b' ')) | Ok(Some(b'\\n')) | Ok(Some(b'\\t')) | Ok(Some(b'\\r')) | ",
                  "                Ok(Some(b'\"')) | Ok(Some(b'[')) | Ok(Some(b']')) | Ok(Some(b'{')) | ",
                  "                Ok(Some(b'}')) | Ok(Some(b',')) | Ok(Some(b':')) | Ok(None) => Ok(()),",
                  "                Ok(Some(_)) => {",
                  "                    let position = self.de.read.peek_position();",
                  "                    Err(Error::syntax(ErrorCode::TrailingCharacters, position.line, position.column))",
                  "                }",
                  "                Err(_) => panic!(\"Unexpected error\"),",
                  "            }",
                  "        }",
                  "    }",
                  "",
                  "    let reader = TestReader::new(vec![b'a']);",
                  "    let mut deserializer = StreamDeserializer { de: Deserializer::new(reader) };",
                  "    match deserializer.peek_end_of_value() {",
                  "        Err(Error { err: Box { .. } }) => {}",
                  "        _ => panic!(\"Expected an error for trailing character, but got OK\"),",
                  "    }",
                  "}"
                ]
              ],
              "can_compile": [
                {
                  "Err": "   Compiling serde_json v1.0.140 (/home/abezbm/rust-utgen-test-crates-new/json)\nerror[E0599]: the method `peek_end_of_value` exists for struct `StreamDeserializer<TestReader>`, but its trait bounds were not satisfied\n    --> src/de.rs:2780:24\n     |\n2713 |     struct TestReader {\n     |     ----------------- doesn't satisfy `TestReader: DerefMut` or `TestReader: Deref`\n...\n2758 |     struct StreamDeserializer<R> {\n     |     ---------------------------- method `peek_end_of_value` not found for this struct\n...\n2780 |     match deserializer.peek_end_of_value() {\n     |                        ^^^^^^^^^^^^^^^^^ method cannot be called on `StreamDeserializer<TestReader>` due to unsatisfied trait bounds\n     |\nnote: the following trait bounds were not satisfied:\n      `TestReader: DerefMut`\n      `TestReader: Deref`\n    --> src/de.rs:2763:13\n     |\n2762 |    impl<R> StreamDeserializer<R>\n     |            ---------------------\n2763 |    where R: std::ops::Deref<Target = TestReader> + std::ops::DerefMut, {\n     |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^   ^^^^^^^^^^^^^^^^^^ unsatisfied trait bound introduced here\n     |             |\n     |             unsatisfied trait bound introduced here\nnote: the traits `Deref` and `DerefMut` must be implemented\n    --> /home/abezbm/.rustup/toolchains/nightly-2024-07-21-x86_64-unknown-linux-gnu/lib/rustlib/src/rust/library/core/src/ops/deref.rs:136:1\n     |\n136  | pub trait Deref {\n     | ^^^^^^^^^^^^^^^\n...\n264  | pub trait DerefMut: Deref {\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^\n\nFor more information about this error, try `rustc --explain E0599`.\nerror: could not compile `serde_json` (lib test) due to 1 previous error\n"
                }
              ],
              "repaired": [
                true
              ]
            },
            {
              "attrs": [],
              "prefix": [],
              "oracles": [],
              "codes": [
                [
                  "{",
                  "    struct TestReader {",
                  "        data: Vec<u8>,",
                  "        position: usize,",
                  "    }",
                  "",
                  "    impl TestReader {",
                  "        fn new(data: Vec<u8>) -> Self {",
                  "            TestReader { data, position: 0 }",
                  "        }",
                  "",
                  "        fn peek(&mut self) -> Result<Option<u8>> {",
                  "            if self.position < self.data.len() {",
                  "                Ok(Some(self.data[self.position]))",
                  "            } else {",
                  "                Ok(None)",
                  "            }",
                  "        }",
                  "",
                  "       fn peek_position(&self) -> read::Position {  ",
                  "           read::Position {  ",
                  "                line: 1,",
                  "                column: 1,",
                  "            }",
                  "        }",
                  "    }",
                  "",
                  "   struct Deserializer<R> {  ",
                  "       read: R,  ",
                  "   }  ",
                  " ",
                  "   impl<R> Deserializer<R> {  ",
                  "       fn new(read: R) -> Self {  ",
                  "           Deserializer { read }  ",
                  "       }  ",
                  "   }  ",
                  " ",
                  "   struct StreamDeserializer<R> {  ",
                  "       de: Deserializer<R>,  ",
                  "   }  ",
                  " ",
                  "   impl<R> StreamDeserializer<R>  ",
                  "   where R: std::ops::Deref<Target = TestReader> + std::ops::DerefMut, {  ",
                  "       fn peek_end_of_value(&mut self) -> Result<()> {  ",
                  "           match self.de.read.peek() {  ",
                  "                Ok(Some(b' ')) | Ok(Some(b'\\n')) | Ok(Some(b'\\t')) | Ok(Some(b'\\r')) | ",
                  "                Ok(Some(b'\"')) | Ok(Some(b'[')) | Ok(Some(b']')) | Ok(Some(b'{')) | ",
                  "                Ok(Some(b'}')) | Ok(Some(b',')) | Ok(Some(b':')) | Ok(None) => Ok(()),",
                  "                Ok(Some(_)) => {",
                  "                    let position = self.de.read.peek_position();",
                  "                    Err(Error::syntax(ErrorCode::TrailingCharacters, position.line, position.column))",
                  "                }",
                  "                Err(_) => panic!(\"Unexpected error\"),",
                  "            }",
                  "        }",
                  "    }",
                  "",
                  "    let reader = TestReader::new(vec![]);",
                  "    let mut deserializer = StreamDeserializer { de: Deserializer::new(reader) };",
                  "    assert!(deserializer.peek_end_of_value().is_ok());",
                  "}"
                ]
              ],
              "can_compile": [
                {
                  "Err": "   Compiling serde_json v1.0.140 (/home/abezbm/rust-utgen-test-crates-new/json)\nerror[E0599]: the method `peek_end_of_value` exists for struct `StreamDeserializer<TestReader>`, but its trait bounds were not satisfied\n    --> src/de.rs:2771:26\n     |\n2713 |     struct TestReader {\n     |     ----------------- doesn't satisfy `TestReader: DerefMut` or `TestReader: Deref`\n...\n2749 |    struct StreamDeserializer<R> {  \n     |    ---------------------------- method `peek_end_of_value` not found for this struct\n...\n2771 |     assert!(deserializer.peek_end_of_value().is_ok());\n     |                          ^^^^^^^^^^^^^^^^^ method cannot be called on `StreamDeserializer<TestReader>` due to unsatisfied trait bounds\n     |\nnote: the following trait bounds were not satisfied:\n      `TestReader: DerefMut`\n      `TestReader: Deref`\n    --> src/de.rs:2754:13\n     |\n2753 |    impl<R> StreamDeserializer<R>  \n     |            ---------------------\n2754 |    where R: std::ops::Deref<Target = TestReader> + std::ops::DerefMut, {  \n     |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^   ^^^^^^^^^^^^^^^^^^ unsatisfied trait bound introduced here\n     |             |\n     |             unsatisfied trait bound introduced here\nnote: the traits `Deref` and `DerefMut` must be implemented\n    --> /home/abezbm/.rustup/toolchains/nightly-2024-07-21-x86_64-unknown-linux-gnu/lib/rustlib/src/rust/library/core/src/ops/deref.rs:136:1\n     |\n136  | pub trait Deref {\n     | ^^^^^^^^^^^^^^^\n...\n264  | pub trait DerefMut: Deref {\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^\n\nFor more information about this error, try `rustc --explain E0599`.\nerror: could not compile `serde_json` (lib test) due to 1 previous error\n"
                }
              ],
              "repaired": [
                true
              ]
            }
          ]
        }
      ]
    }
  ]
}