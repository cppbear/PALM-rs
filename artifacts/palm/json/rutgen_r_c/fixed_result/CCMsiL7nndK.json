{"function_name":"serde_json::ser::format_escaped_str","tests":4,"tests_lines":[69,48,44,22],"oracles":4,"oracles_compiled":4,"oracles_compiled_rate":100.0,"tests_compiled":4,"tests_compiled_rate":100.0,"oracles_run":4,"oracles_passed":4,"oracles_passed_rate":100.0,"tests_run":4,"tests_passed":4,"tests_passed_rate":100.0,"lines":9,"lines_covered":9,"lines_coveraged_rate":100.0,"branches":1,"branches_covered":1,"branches_coverage_rate":100.0,"codes_lines":[2081,2082,2083,2084,2085,2086,2087,2088,2089],"codes_lines_covered":[[["{","    struct MockWriter;","","    impl io::Write for MockWriter {","        fn write(&mut self, _: &[u8]) -> io::Result<usize> {","            Ok(0)","        }","","        fn flush(&mut self) -> io::Result<()> {","            Ok(())","        }","    }","","    struct MockFormatter {","        should_err: bool,","    }","","    impl MockFormatter {","        fn new(should_err: bool) -> Self {","            MockFormatter { should_err }","        }","    }","","    impl Formatter for MockFormatter {","        fn begin_string<W>(&mut self, _: &mut W) -> io::Result<()>","        where","            W: ?Sized + io::Write,","        {","            if self.should_err {","                Err(io::Error::new(io::ErrorKind::Other, \"begin_string error\"))","            } else {","                Ok(())","            }","        }","","        fn end_string<W>(&mut self, _: &mut W) -> io::Result<()> ","        where","            W: ?Sized + io::Write,","        {","            Ok(())","        }","","        fn write_string_fragment<W>(&mut self, _: &mut W, _: &str) -> io::Result<()>","        where","            W: ?Sized + io::Write,","        {","            Ok(())","        }","","        fn write_char_escape<W>(&mut self, _: &mut W, _: CharEscape) -> io::Result<()>","        where","            W: ?Sized + io::Write,","        {","            Ok(())","        }","    }","","    let mut writer = MockWriter;","    let mut formatter_err = MockFormatter::new(true);","    ","    let result = format_escaped_str(&mut writer, &mut formatter_err, \"test\");","    ","    assert!(result.is_err());","","    let mut formatter_ok = MockFormatter::new(false);","    let result_ok = format_escaped_str(&mut writer, &mut formatter_ok, \"test\");","    ","    assert!(result_ok.is_ok());","}"],[2081,2082,2083,2084,2085,2086,2087,2088,2089]],[["{","    struct MockWriter {","        output: String,","    }","","    impl io::Write for MockWriter {","        fn write(&mut self, buf: &[u8]) -> io::Result<usize> {","            self.output.push_str(std::str::from_utf8(buf).unwrap());","            Ok(buf.len())","        }","        fn flush(&mut self) -> io::Result<()> {","            Ok(())","        }","    }","","    struct MockFormatter {","        begin_called: bool,","    }","","    impl MockFormatter {","        fn new() -> Self {","            MockFormatter { begin_called: false }","        }","    }","","       impl Formatter for MockFormatter {","           fn begin_string<W>(&mut self, _writer: &mut W) -> io::Result<()>","           where","               W: ?Sized + io::Write,","           {","               self.begin_called = true;","               Ok(())","           }","           fn end_string<W>(&mut self, _writer: &mut W) -> io::Result<()>","           where","               W: ?Sized + io::Write,","           {","            Ok(())","        }","    }","","    let mut writer = MockWriter { output: String::new() };","    let mut formatter = MockFormatter::new();","    let result = format_escaped_str(&mut writer, &mut formatter, \"test\\\\nvalue\");","    ","    assert!(result.is_ok());","    assert!(formatter.begin_called);","}"],[2081,2082,2083,2084,2085,2086,2087,2088,2089]],[["{","    struct MockFailingWriter;","","    impl io::Write for MockFailingWriter {","        fn write(&mut self, _buf: &[u8]) -> io::Result<usize> {","            Err(io::Error::new(io::ErrorKind::Other, \"write error\"))","        }","        fn flush(&mut self) -> io::Result<()> {","            Ok(())","        }","    }","","    struct MockFormatter {","        begin_called: bool,","    }","","    impl MockFormatter {","        fn new() -> Self {","            MockFormatter { begin_called: false }","        }","    }","","    impl Formatter for MockFormatter {","      fn begin_string<W>(&mut self, _writer: &mut W) -> io::Result<()>  ","      where  ","          W: ?Sized + io::Write,  ","      {  ","          self.begin_called = true;  ","          Ok(())  ","      }  ","      fn end_string<W>(&mut self, _writer: &mut W) -> io::Result<()>   ","      where  ","          W: ?Sized + io::Write,  ","      {  ","           Ok(())  ","        }","    }","","    let mut writer = MockFailingWriter;","    let mut formatter = MockFormatter::new();","    let result = format_escaped_str(&mut writer, &mut formatter, \"test\\\\nvalue\");","    ","    assert!(result.is_err());","}"],[2081,2082,2083,2084,2085,2086,2087,2089]],[["{","    struct PanicFormatter;","","   impl Formatter for PanicFormatter {  ","       fn begin_string<W>(&mut self, _writer: &mut W) -> io::Result<()>  ","       where  ","           W: ?Sized + io::Write,  ","       {  ","           panic!(\"Panic in begin string\");  ","       }  ","       fn end_string<W>(&mut self, _writer: &mut W) -> io::Result<()>  ","       where  ","           W: ?Sized + io::Write,  ","       {  ","           Ok(())  ","        }","    }","","    let mut writer = vec![];","    let mut formatter = PanicFormatter;","    let _ = format_escaped_str(&mut writer, &mut formatter, \"test panic\");","}"],[2081,2082,2083,2084,2085,2086,2087]]],"codes_branches":[],"codes_branches_covered":[[["{","    struct MockWriter;","","    impl io::Write for MockWriter {","        fn write(&mut self, _: &[u8]) -> io::Result<usize> {","            Ok(0)","        }","","        fn flush(&mut self) -> io::Result<()> {","            Ok(())","        }","    }","","    struct MockFormatter {","        should_err: bool,","    }","","    impl MockFormatter {","        fn new(should_err: bool) -> Self {","            MockFormatter { should_err }","        }","    }","","    impl Formatter for MockFormatter {","        fn begin_string<W>(&mut self, _: &mut W) -> io::Result<()>","        where","            W: ?Sized + io::Write,","        {","            if self.should_err {","                Err(io::Error::new(io::ErrorKind::Other, \"begin_string error\"))","            } else {","                Ok(())","            }","        }","","        fn end_string<W>(&mut self, _: &mut W) -> io::Result<()> ","        where","            W: ?Sized + io::Write,","        {","            Ok(())","        }","","        fn write_string_fragment<W>(&mut self, _: &mut W, _: &str) -> io::Result<()>","        where","            W: ?Sized + io::Write,","        {","            Ok(())","        }","","        fn write_char_escape<W>(&mut self, _: &mut W, _: CharEscape) -> io::Result<()>","        where","            W: ?Sized + io::Write,","        {","            Ok(())","        }","    }","","    let mut writer = MockWriter;","    let mut formatter_err = MockFormatter::new(true);","    ","    let result = format_escaped_str(&mut writer, &mut formatter_err, \"test\");","    ","    assert!(result.is_err());","","    let mut formatter_ok = MockFormatter::new(false);","    let result_ok = format_escaped_str(&mut writer, &mut formatter_ok, \"test\");","    ","    assert!(result_ok.is_ok());","}"],[]],[["{","    struct MockWriter {","        output: String,","    }","","    impl io::Write for MockWriter {","        fn write(&mut self, buf: &[u8]) -> io::Result<usize> {","            self.output.push_str(std::str::from_utf8(buf).unwrap());","            Ok(buf.len())","        }","        fn flush(&mut self) -> io::Result<()> {","            Ok(())","        }","    }","","    struct MockFormatter {","        begin_called: bool,","    }","","    impl MockFormatter {","        fn new() -> Self {","            MockFormatter { begin_called: false }","        }","    }","","       impl Formatter for MockFormatter {","           fn begin_string<W>(&mut self, _writer: &mut W) -> io::Result<()>","           where","               W: ?Sized + io::Write,","           {","               self.begin_called = true;","               Ok(())","           }","           fn end_string<W>(&mut self, _writer: &mut W) -> io::Result<()>","           where","               W: ?Sized + io::Write,","           {","            Ok(())","        }","    }","","    let mut writer = MockWriter { output: String::new() };","    let mut formatter = MockFormatter::new();","    let result = format_escaped_str(&mut writer, &mut formatter, \"test\\\\nvalue\");","    ","    assert!(result.is_ok());","    assert!(formatter.begin_called);","}"],[]],[["{","    struct MockFailingWriter;","","    impl io::Write for MockFailingWriter {","        fn write(&mut self, _buf: &[u8]) -> io::Result<usize> {","            Err(io::Error::new(io::ErrorKind::Other, \"write error\"))","        }","        fn flush(&mut self) -> io::Result<()> {","            Ok(())","        }","    }","","    struct MockFormatter {","        begin_called: bool,","    }","","    impl MockFormatter {","        fn new() -> Self {","            MockFormatter { begin_called: false }","        }","    }","","    impl Formatter for MockFormatter {","      fn begin_string<W>(&mut self, _writer: &mut W) -> io::Result<()>  ","      where  ","          W: ?Sized + io::Write,  ","      {  ","          self.begin_called = true;  ","          Ok(())  ","      }  ","      fn end_string<W>(&mut self, _writer: &mut W) -> io::Result<()>   ","      where  ","          W: ?Sized + io::Write,  ","      {  ","           Ok(())  ","        }","    }","","    let mut writer = MockFailingWriter;","    let mut formatter = MockFormatter::new();","    let result = format_escaped_str(&mut writer, &mut formatter, \"test\\\\nvalue\");","    ","    assert!(result.is_err());","}"],[]],[["{","    struct PanicFormatter;","","   impl Formatter for PanicFormatter {  ","       fn begin_string<W>(&mut self, _writer: &mut W) -> io::Result<()>  ","       where  ","           W: ?Sized + io::Write,  ","       {  ","           panic!(\"Panic in begin string\");  ","       }  ","       fn end_string<W>(&mut self, _writer: &mut W) -> io::Result<()>  ","       where  ","           W: ?Sized + io::Write,  ","       {  ","           Ok(())  ","        }","    }","","    let mut writer = vec![];","    let mut formatter = PanicFormatter;","    let _ = format_escaped_str(&mut writer, &mut formatter, \"test panic\");","}"],[]]]}