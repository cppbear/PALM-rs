{"function_name":"serde_json::ser::format_escaped_str","file_path":"/home/abezbm/rust-utgen-test-crates-new/json/src/ser.rs","work_dir":"/home/abezbm/rust-utgen-test-crates-new/json","tests":18,"tests_lines":[44,44,44,44,44,44,44,44,44,34,36,33,34,35,31,32,32,33],"oracles":6,"oracles_compiled":5,"oracles_compiled_rate":83.33333333333334,"tests_compiled":12,"tests_compiled_rate":66.66666666666666,"oracles_run":5,"oracles_passed":1,"oracles_passed_rate":20.0,"tests_run":12,"tests_passed":1,"tests_passed_rate":8.333333333333332,"lines":9,"lines_covered":9,"lines_coveraged_rate":100.0,"branches":1,"branches_covered":1,"branches_coverage_rate":100.0,"codes_lines":[2081,2082,2083,2084,2085,2086,2087,2088,2089],"codes_lines_covered":[[["{","    struct MockWriter;","","    impl io::Write for MockWriter {","        fn write(&mut self, buf: &[u8]) -> io::Result<usize> {","            Err(io::Error::new(io::ErrorKind::Other, \"write error\"))","        }","","        fn flush(&mut self) -> io::Result<()> {","            Ok(())","        }","    }","","    struct MockFormatter;","","    impl Formatter for MockFormatter {","        fn begin_string<W: ?Sized + io::Write>(&mut self, _: &mut W) -> io::Result<()> {","            Err(io::Error::new(io::ErrorKind::Other, \"begin_string error\"))","        }","","        fn end_string<W: ?Sized + io::Write>(&mut self, _: &mut W) -> io::Result<()> {","            Ok(())","        }","","        fn write_string_fragment<W: ?Sized + io::Write>(&mut self, _: &mut W, _: &str) -> io::Result<()> {","            Ok(())","        }","","        fn write_char_escape<W: ?Sized + io::Write>(&mut self, _: &mut W, _: CharEscape) -> io::Result<()> {","            Ok(())","        }","    }","","    let mut writer = MockWriter;","    let mut formatter = MockFormatter;","    let value = \"\";","    ","    let _ = format_escaped_str(&mut writer, &mut formatter, value);","    let mut writer = MockWriter;","    let mut formatter = MockFormatter;","    let value = \"\";","    let result = format_escaped_str(&mut writer, &mut formatter, value);","    assert!(result.is_err());","}"],[2081,2082,2083,2084,2085,2086,2089]],[["{","    struct MockWriter;","","    impl io::Write for MockWriter {","        fn write(&mut self, buf: &[u8]) -> io::Result<usize> {","            Err(io::Error::new(io::ErrorKind::Other, \"write error\"))","        }","","        fn flush(&mut self) -> io::Result<()> {","            Ok(())","        }","    }","","    struct MockFormatter;","","    impl Formatter for MockFormatter {","        fn begin_string<W: ?Sized + io::Write>(&mut self, _: &mut W) -> io::Result<()> {","            Err(io::Error::new(io::ErrorKind::Other, \"begin_string error\"))","        }","","        fn end_string<W: ?Sized + io::Write>(&mut self, _: &mut W) -> io::Result<()> {","            Ok(())","        }","","        fn write_string_fragment<W: ?Sized + io::Write>(&mut self, _: &mut W, _: &str) -> io::Result<()> {","            Ok(())","        }","","        fn write_char_escape<W: ?Sized + io::Write>(&mut self, _: &mut W, _: CharEscape) -> io::Result<()> {","            Ok(())","        }","    }","","    let mut writer = MockWriter;","    let mut formatter = MockFormatter;","    let value = \"\";","    ","    let _ = format_escaped_str(&mut writer, &mut formatter, value);","    let mut writer = MockWriter;","    let mut formatter = MockFormatter;","    let value = \"\";","    let result = format_escaped_str(&mut writer, &mut formatter, value);","    assert_eq!(result.unwrap_err().kind(), io::ErrorKind::Other);","}"],[2081,2082,2083,2084,2085,2086,2089]],[["{","    struct MockWriter;","","    impl io::Write for MockWriter {","        fn write(&mut self, buf: &[u8]) -> io::Result<usize> {","            Err(io::Error::new(io::ErrorKind::Other, \"write error\"))","        }","","        fn flush(&mut self) -> io::Result<()> {","            Ok(())","        }","    }","","    struct MockFormatter;","","    impl Formatter for MockFormatter {","        fn begin_string<W: ?Sized + io::Write>(&mut self, _: &mut W) -> io::Result<()> {","            Err(io::Error::new(io::ErrorKind::Other, \"begin_string error\"))","        }","","        fn end_string<W: ?Sized + io::Write>(&mut self, _: &mut W) -> io::Result<()> {","            Ok(())","        }","","        fn write_string_fragment<W: ?Sized + io::Write>(&mut self, _: &mut W, _: &str) -> io::Result<()> {","            Ok(())","        }","","        fn write_char_escape<W: ?Sized + io::Write>(&mut self, _: &mut W, _: CharEscape) -> io::Result<()> {","            Ok(())","        }","    }","","    let mut writer = MockWriter;","    let mut formatter = MockFormatter;","    let value = \"\";","    ","    let _ = format_escaped_str(&mut writer, &mut formatter, value);","    let mut writer = MockWriter;","    let mut formatter = MockFormatter;","    let value = \"\";","    let result = format_escaped_str(&mut writer, &mut formatter, value);","    assert_eq!(result.unwrap_err().to_string(), \"begin_string error\");","}"],[2081,2082,2083,2084,2085,2086,2089]],[["{","    struct MockWriter;","","    impl io::Write for MockWriter {","        fn write(&mut self, buf: &[u8]) -> io::Result<usize> {","            Err(io::Error::new(io::ErrorKind::Other, \"write error\"))","        }","","        fn flush(&mut self) -> io::Result<()> {","            Ok(())","        }","    }","","    struct MockFormatter;","","    impl Formatter for MockFormatter {","        fn begin_string<W: ?Sized + io::Write>(&mut self, _: &mut W) -> io::Result<()> {","            Err(io::Error::new(io::ErrorKind::Other, \"begin_string error\"))","        }","","        fn end_string<W: ?Sized + io::Write>(&mut self, _: &mut W) -> io::Result<()> {","            Ok(())","        }","","        fn write_string_fragment<W: ?Sized + io::Write>(&mut self, _: &mut W, _: &str) -> io::Result<()> {","            Ok(())","        }","","        fn write_char_escape<W: ?Sized + io::Write>(&mut self, _: &mut W, _: CharEscape) -> io::Result<()> {","            Ok(())","        }","    }","","    let mut writer = MockWriter;","    let mut formatter = MockFormatter;","    let value = \"Hello, World! Special chars: \\n\\t\\\\\\\"\";","","    let _ = format_escaped_str(&mut writer, &mut formatter, value);","    let mut writer = MockWriter;","    let mut formatter = MockFormatter;","    let value = \"Hello, World! Special chars: \\n\\t\\\\\\\"\";","    let result = format_escaped_str(&mut writer, &mut formatter, value);","    assert!(result.is_err());","}"],[2081,2082,2083,2084,2085,2086,2089]],[["{","    struct MockWriter;","","    impl io::Write for MockWriter {","        fn write(&mut self, buf: &[u8]) -> io::Result<usize> {","            Err(io::Error::new(io::ErrorKind::Other, \"write error\"))","        }","","        fn flush(&mut self) -> io::Result<()> {","            Ok(())","        }","    }","","    struct MockFormatter;","","    impl Formatter for MockFormatter {","        fn begin_string<W: ?Sized + io::Write>(&mut self, _: &mut W) -> io::Result<()> {","            Err(io::Error::new(io::ErrorKind::Other, \"begin_string error\"))","        }","","        fn end_string<W: ?Sized + io::Write>(&mut self, _: &mut W) -> io::Result<()> {","            Ok(())","        }","","        fn write_string_fragment<W: ?Sized + io::Write>(&mut self, _: &mut W, _: &str) -> io::Result<()> {","            Ok(())","        }","","        fn write_char_escape<W: ?Sized + io::Write>(&mut self, _: &mut W, _: CharEscape) -> io::Result<()> {","            Ok(())","        }","    }","","    let mut writer = MockWriter;","    let mut formatter = MockFormatter;","    let value = \"Hello, World! Special chars: \\n\\t\\\\\\\"\";","","    let _ = format_escaped_str(&mut writer, &mut formatter, value);","    let mut writer = MockWriter;","    let mut formatter = MockFormatter;","    let value = \"Hello, World! Special chars: \\n\\t\\\\\\\"\";","    let result = format_escaped_str(&mut writer, &mut formatter, value);","    assert_eq!(result.unwrap_err().kind(), io::ErrorKind::Other);","}"],[2081,2082,2083,2084,2085,2086,2089]],[["{","    struct MockWriter;","","    impl io::Write for MockWriter {","        fn write(&mut self, buf: &[u8]) -> io::Result<usize> {","            Err(io::Error::new(io::ErrorKind::Other, \"write error\"))","        }","","        fn flush(&mut self) -> io::Result<()> {","            Ok(())","        }","    }","","    struct MockFormatter;","","    impl Formatter for MockFormatter {","        fn begin_string<W: ?Sized + io::Write>(&mut self, _: &mut W) -> io::Result<()> {","            Err(io::Error::new(io::ErrorKind::Other, \"begin_string error\"))","        }","","        fn end_string<W: ?Sized + io::Write>(&mut self, _: &mut W) -> io::Result<()> {","            Ok(())","        }","","        fn write_string_fragment<W: ?Sized + io::Write>(&mut self, _: &mut W, _: &str) -> io::Result<()> {","            Ok(())","        }","","        fn write_char_escape<W: ?Sized + io::Write>(&mut self, _: &mut W, _: CharEscape) -> io::Result<()> {","            Ok(())","        }","    }","","    let mut writer = MockWriter;","    let mut formatter = MockFormatter;","    let value = \"Hello, World! Special chars: \\n\\t\\\\\\\"\";","","    let _ = format_escaped_str(&mut writer, &mut formatter, value);","    let mut writer = MockWriter;","    let mut formatter = MockFormatter;","    let value = \"Hello, World! Special chars: \\n\\t\\\\\\\"\";","    let result = format_escaped_str(&mut writer, &mut formatter, value);","    assert_eq!(result.unwrap_err().to_string(), \"begin_string error\");","}"],[2081,2082,2083,2084,2085,2086,2089]],[["{","    struct MockWriter;","","    impl io::Write for MockWriter {","        fn write(&mut self, buf: &[u8]) -> io::Result<usize> {","            Err(io::Error::new(io::ErrorKind::Other, \"write error\"))","        }","","        fn flush(&mut self) -> io::Result<()> {","            Ok(())","        }","    }","","    struct MockFormatter;","","    impl Formatter for MockFormatter {","        fn begin_string<W: ?Sized + io::Write>(&mut self, _: &mut W) -> io::Result<()> {","            Err(io::Error::new(io::ErrorKind::Other, \"begin_string error\"))","        }","","        fn end_string<W: ?Sized + io::Write>(&mut self, _: &mut W) -> io::Result<()> {","            Ok(())","        }","","        fn write_string_fragment<W: ?Sized + io::Write>(&mut self, _: &mut W, _: &str) -> io::Result<()> {","            Ok(())","        }","","        fn write_char_escape<W: ?Sized + io::Write>(&mut self, _: &mut W, _: CharEscape) -> io::Result<()> {","            Ok(())","        }","    }","","    let mut writer = MockWriter;","    let mut formatter = MockFormatter;","    let value = \"This is a very long string that is meant to trigger the formatter's write error.\";","","    let _ = format_escaped_str(&mut writer, &mut formatter, value);","    let mut writer = MockWriter;","    let mut formatter = MockFormatter;","    let value = \"This is a very long string that is meant to trigger the formatter's write error.\";","    let result = format_escaped_str(&mut writer, &mut formatter, value);","    assert!(result.is_err());","}"],[2081,2082,2083,2084,2085,2086,2089]],[["{","    struct MockWriter;","","    impl io::Write for MockWriter {","        fn write(&mut self, buf: &[u8]) -> io::Result<usize> {","            Err(io::Error::new(io::ErrorKind::Other, \"write error\"))","        }","","        fn flush(&mut self) -> io::Result<()> {","            Ok(())","        }","    }","","    struct MockFormatter;","","    impl Formatter for MockFormatter {","        fn begin_string<W: ?Sized + io::Write>(&mut self, _: &mut W) -> io::Result<()> {","            Err(io::Error::new(io::ErrorKind::Other, \"begin_string error\"))","        }","","        fn end_string<W: ?Sized + io::Write>(&mut self, _: &mut W) -> io::Result<()> {","            Ok(())","        }","","        fn write_string_fragment<W: ?Sized + io::Write>(&mut self, _: &mut W, _: &str) -> io::Result<()> {","            Ok(())","        }","","        fn write_char_escape<W: ?Sized + io::Write>(&mut self, _: &mut W, _: CharEscape) -> io::Result<()> {","            Ok(())","        }","    }","","    let mut writer = MockWriter;","    let mut formatter = MockFormatter;","    let value = \"This is a very long string that is meant to trigger the formatter's write error.\";","","    let _ = format_escaped_str(&mut writer, &mut formatter, value);","    let mut writer = MockWriter;","    let mut formatter = MockFormatter;","    let value = \"This is a very long string that is meant to trigger the formatter's write error.\";","    let result = format_escaped_str(&mut writer, &mut formatter, value);","    assert_eq!(result.unwrap_err().kind(), io::ErrorKind::Other);","}"],[2081,2082,2083,2084,2085,2086,2089]],[["{","    struct MockWriter;","","    impl io::Write for MockWriter {","        fn write(&mut self, buf: &[u8]) -> io::Result<usize> {","            Err(io::Error::new(io::ErrorKind::Other, \"write error\"))","        }","","        fn flush(&mut self) -> io::Result<()> {","            Ok(())","        }","    }","","    struct MockFormatter;","","    impl Formatter for MockFormatter {","        fn begin_string<W: ?Sized + io::Write>(&mut self, _: &mut W) -> io::Result<()> {","            Err(io::Error::new(io::ErrorKind::Other, \"begin_string error\"))","        }","","        fn end_string<W: ?Sized + io::Write>(&mut self, _: &mut W) -> io::Result<()> {","            Ok(())","        }","","        fn write_string_fragment<W: ?Sized + io::Write>(&mut self, _: &mut W, _: &str) -> io::Result<()> {","            Ok(())","        }","","        fn write_char_escape<W: ?Sized + io::Write>(&mut self, _: &mut W, _: CharEscape) -> io::Result<()> {","            Ok(())","        }","    }","","    let mut writer = MockWriter;","    let mut formatter = MockFormatter;","    let value = \"This is a very long string that is meant to trigger the formatter's write error.\";","","    let _ = format_escaped_str(&mut writer, &mut formatter, value);","    let mut writer = MockWriter;","    let mut formatter = MockFormatter;","    let value = \"This is a very long string that is meant to trigger the formatter's write error.\";","    let result = format_escaped_str(&mut writer, &mut formatter, value);","    assert_eq!(result.unwrap_err().to_string(), \"begin_string error\");","}"],[2081,2082,2083,2084,2085,2086,2089]],[["{","    struct TestFormatter {","        should_fail: bool,","    }","","    impl Formatter for TestFormatter {","        fn begin_string<W: ?Sized + io::Write>(&mut self, _writer: &mut W) -> io::Result<()> {","            Ok(())","        }","","        fn end_string<W: ?Sized + io::Write>(&mut self, _writer: &mut W) -> io::Result<()> {","            Ok(())","        }","","        fn write_string_fragment<W: ?Sized + io::Write>(&mut self, _writer: &mut W, _value: &str) -> io::Result<()> {","            Ok(())","        }","","        fn write_char_escape<W: ?Sized + io::Write>(&mut self, _writer: &mut W, _char_escape: CharEscape) -> io::Result<()> {","            Ok(())","        }","    }","","    let mut writer = Vec::new();","    let mut formatter = TestFormatter { should_fail: false };","    let value = \"Hello\\nWorld\";","","    let _ = format_escaped_str(&mut writer, &mut formatter, value);","    let mut writer = Vec::new();","    let mut formatter = TestFormatter { should_fail: false };","    let value = \"Hello\\nWorld\";","    let result = format_escaped_str(&mut writer, &mut formatter, value);","    assert!(result.is_ok());","}"],[2081,2082,2083,2084,2085,2086,2087,2088,2089]],[["{","    struct TestFormatter {","        should_fail: bool,","    }","","    impl Formatter for TestFormatter {","        fn begin_string<W: ?Sized + io::Write>(&mut self, _writer: &mut W) -> io::Result<()> {","            Ok(())","        }","","        fn end_string<W: ?Sized + io::Write>(&mut self, _writer: &mut W) -> io::Result<()> {","            Ok(())","        }","","        fn write_string_fragment<W: ?Sized + io::Write>(&mut self, _writer: &mut W, _value: &str) -> io::Result<()> {","            Ok(())","        }","","        fn write_char_escape<W: ?Sized + io::Write>(&mut self, _writer: &mut W, _char_escape: CharEscape) -> io::Result<()> {","            Ok(())","        }","    }","","    let mut writer = Vec::new();","    let mut formatter = TestFormatter { should_fail: false };","    let value = \"Hello\\nWorld\";","","    let _ = format_escaped_str(&mut writer, &mut formatter, value);","    let mut writer = Vec::new();","    let mut formatter = TestFormatter { should_fail: false };","    let value = \"Hello\\nWorld\";","    let result = format_escaped_str(&mut writer, &mut formatter, value);","    formatter.should_fail = true;","    let result_with_failure = format_escaped_str(&mut writer, &mut formatter, value);","    assert!(result_with_failure.is_err());","}"],[2081,2082,2083,2084,2085,2086,2087,2088,2089]],[["{","    struct TestFormatter {","        should_fail: bool,","    }","","    impl Formatter for TestFormatter {","        fn begin_string<W: ?Sized + io::Write>(&mut self, _writer: &mut W) -> io::Result<()> {","            Ok(())","        }","","        fn end_string<W: ?Sized + io::Write>(&mut self, _writer: &mut W) -> io::Result<()> {","            Ok(())","        }","","        fn write_string_fragment<W: ?Sized + io::Write>(&mut self, _writer: &mut W, _value: &str) -> io::Result<()> {","            Ok(())","        }","","        fn write_char_escape<W: ?Sized + io::Write>(&mut self, _writer: &mut W, _char_escape: CharEscape) -> io::Result<()> {","            Ok(())","        }","    }","","    let mut writer = Vec::new();","    let mut formatter = TestFormatter { should_fail: false };","    let value = \"Hello\\tWorld, \\\"Test\\\"\";","","    let _ = format_escaped_str(&mut writer, &mut formatter, value);","    let mut writer = Vec::new();","    let mut formatter = TestFormatter { should_fail: false };","    let value = \"Hello\\tWorld, \\\"Test\\\"\";","    formatter.should_fail = true;","    assert!(format_escaped_str(&mut writer, &mut formatter, value).is_err());","}"],[2081,2082,2083,2084,2085,2086,2087,2088,2089]]],"codes_branches":[],"codes_branches_covered":[[["{","    struct MockWriter;","","    impl io::Write for MockWriter {","        fn write(&mut self, buf: &[u8]) -> io::Result<usize> {","            Err(io::Error::new(io::ErrorKind::Other, \"write error\"))","        }","","        fn flush(&mut self) -> io::Result<()> {","            Ok(())","        }","    }","","    struct MockFormatter;","","    impl Formatter for MockFormatter {","        fn begin_string<W: ?Sized + io::Write>(&mut self, _: &mut W) -> io::Result<()> {","            Err(io::Error::new(io::ErrorKind::Other, \"begin_string error\"))","        }","","        fn end_string<W: ?Sized + io::Write>(&mut self, _: &mut W) -> io::Result<()> {","            Ok(())","        }","","        fn write_string_fragment<W: ?Sized + io::Write>(&mut self, _: &mut W, _: &str) -> io::Result<()> {","            Ok(())","        }","","        fn write_char_escape<W: ?Sized + io::Write>(&mut self, _: &mut W, _: CharEscape) -> io::Result<()> {","            Ok(())","        }","    }","","    let mut writer = MockWriter;","    let mut formatter = MockFormatter;","    let value = \"\";","    ","    let _ = format_escaped_str(&mut writer, &mut formatter, value);","    let mut writer = MockWriter;","    let mut formatter = MockFormatter;","    let value = \"\";","    let result = format_escaped_str(&mut writer, &mut formatter, value);","    assert!(result.is_err());","}"],[]],[["{","    struct MockWriter;","","    impl io::Write for MockWriter {","        fn write(&mut self, buf: &[u8]) -> io::Result<usize> {","            Err(io::Error::new(io::ErrorKind::Other, \"write error\"))","        }","","        fn flush(&mut self) -> io::Result<()> {","            Ok(())","        }","    }","","    struct MockFormatter;","","    impl Formatter for MockFormatter {","        fn begin_string<W: ?Sized + io::Write>(&mut self, _: &mut W) -> io::Result<()> {","            Err(io::Error::new(io::ErrorKind::Other, \"begin_string error\"))","        }","","        fn end_string<W: ?Sized + io::Write>(&mut self, _: &mut W) -> io::Result<()> {","            Ok(())","        }","","        fn write_string_fragment<W: ?Sized + io::Write>(&mut self, _: &mut W, _: &str) -> io::Result<()> {","            Ok(())","        }","","        fn write_char_escape<W: ?Sized + io::Write>(&mut self, _: &mut W, _: CharEscape) -> io::Result<()> {","            Ok(())","        }","    }","","    let mut writer = MockWriter;","    let mut formatter = MockFormatter;","    let value = \"\";","    ","    let _ = format_escaped_str(&mut writer, &mut formatter, value);","    let mut writer = MockWriter;","    let mut formatter = MockFormatter;","    let value = \"\";","    let result = format_escaped_str(&mut writer, &mut formatter, value);","    assert_eq!(result.unwrap_err().kind(), io::ErrorKind::Other);","}"],[]],[["{","    struct MockWriter;","","    impl io::Write for MockWriter {","        fn write(&mut self, buf: &[u8]) -> io::Result<usize> {","            Err(io::Error::new(io::ErrorKind::Other, \"write error\"))","        }","","        fn flush(&mut self) -> io::Result<()> {","            Ok(())","        }","    }","","    struct MockFormatter;","","    impl Formatter for MockFormatter {","        fn begin_string<W: ?Sized + io::Write>(&mut self, _: &mut W) -> io::Result<()> {","            Err(io::Error::new(io::ErrorKind::Other, \"begin_string error\"))","        }","","        fn end_string<W: ?Sized + io::Write>(&mut self, _: &mut W) -> io::Result<()> {","            Ok(())","        }","","        fn write_string_fragment<W: ?Sized + io::Write>(&mut self, _: &mut W, _: &str) -> io::Result<()> {","            Ok(())","        }","","        fn write_char_escape<W: ?Sized + io::Write>(&mut self, _: &mut W, _: CharEscape) -> io::Result<()> {","            Ok(())","        }","    }","","    let mut writer = MockWriter;","    let mut formatter = MockFormatter;","    let value = \"\";","    ","    let _ = format_escaped_str(&mut writer, &mut formatter, value);","    let mut writer = MockWriter;","    let mut formatter = MockFormatter;","    let value = \"\";","    let result = format_escaped_str(&mut writer, &mut formatter, value);","    assert_eq!(result.unwrap_err().to_string(), \"begin_string error\");","}"],[]],[["{","    struct MockWriter;","","    impl io::Write for MockWriter {","        fn write(&mut self, buf: &[u8]) -> io::Result<usize> {","            Err(io::Error::new(io::ErrorKind::Other, \"write error\"))","        }","","        fn flush(&mut self) -> io::Result<()> {","            Ok(())","        }","    }","","    struct MockFormatter;","","    impl Formatter for MockFormatter {","        fn begin_string<W: ?Sized + io::Write>(&mut self, _: &mut W) -> io::Result<()> {","            Err(io::Error::new(io::ErrorKind::Other, \"begin_string error\"))","        }","","        fn end_string<W: ?Sized + io::Write>(&mut self, _: &mut W) -> io::Result<()> {","            Ok(())","        }","","        fn write_string_fragment<W: ?Sized + io::Write>(&mut self, _: &mut W, _: &str) -> io::Result<()> {","            Ok(())","        }","","        fn write_char_escape<W: ?Sized + io::Write>(&mut self, _: &mut W, _: CharEscape) -> io::Result<()> {","            Ok(())","        }","    }","","    let mut writer = MockWriter;","    let mut formatter = MockFormatter;","    let value = \"Hello, World! Special chars: \\n\\t\\\\\\\"\";","","    let _ = format_escaped_str(&mut writer, &mut formatter, value);","    let mut writer = MockWriter;","    let mut formatter = MockFormatter;","    let value = \"Hello, World! Special chars: \\n\\t\\\\\\\"\";","    let result = format_escaped_str(&mut writer, &mut formatter, value);","    assert!(result.is_err());","}"],[]],[["{","    struct MockWriter;","","    impl io::Write for MockWriter {","        fn write(&mut self, buf: &[u8]) -> io::Result<usize> {","            Err(io::Error::new(io::ErrorKind::Other, \"write error\"))","        }","","        fn flush(&mut self) -> io::Result<()> {","            Ok(())","        }","    }","","    struct MockFormatter;","","    impl Formatter for MockFormatter {","        fn begin_string<W: ?Sized + io::Write>(&mut self, _: &mut W) -> io::Result<()> {","            Err(io::Error::new(io::ErrorKind::Other, \"begin_string error\"))","        }","","        fn end_string<W: ?Sized + io::Write>(&mut self, _: &mut W) -> io::Result<()> {","            Ok(())","        }","","        fn write_string_fragment<W: ?Sized + io::Write>(&mut self, _: &mut W, _: &str) -> io::Result<()> {","            Ok(())","        }","","        fn write_char_escape<W: ?Sized + io::Write>(&mut self, _: &mut W, _: CharEscape) -> io::Result<()> {","            Ok(())","        }","    }","","    let mut writer = MockWriter;","    let mut formatter = MockFormatter;","    let value = \"Hello, World! Special chars: \\n\\t\\\\\\\"\";","","    let _ = format_escaped_str(&mut writer, &mut formatter, value);","    let mut writer = MockWriter;","    let mut formatter = MockFormatter;","    let value = \"Hello, World! Special chars: \\n\\t\\\\\\\"\";","    let result = format_escaped_str(&mut writer, &mut formatter, value);","    assert_eq!(result.unwrap_err().kind(), io::ErrorKind::Other);","}"],[]],[["{","    struct MockWriter;","","    impl io::Write for MockWriter {","        fn write(&mut self, buf: &[u8]) -> io::Result<usize> {","            Err(io::Error::new(io::ErrorKind::Other, \"write error\"))","        }","","        fn flush(&mut self) -> io::Result<()> {","            Ok(())","        }","    }","","    struct MockFormatter;","","    impl Formatter for MockFormatter {","        fn begin_string<W: ?Sized + io::Write>(&mut self, _: &mut W) -> io::Result<()> {","            Err(io::Error::new(io::ErrorKind::Other, \"begin_string error\"))","        }","","        fn end_string<W: ?Sized + io::Write>(&mut self, _: &mut W) -> io::Result<()> {","            Ok(())","        }","","        fn write_string_fragment<W: ?Sized + io::Write>(&mut self, _: &mut W, _: &str) -> io::Result<()> {","            Ok(())","        }","","        fn write_char_escape<W: ?Sized + io::Write>(&mut self, _: &mut W, _: CharEscape) -> io::Result<()> {","            Ok(())","        }","    }","","    let mut writer = MockWriter;","    let mut formatter = MockFormatter;","    let value = \"Hello, World! Special chars: \\n\\t\\\\\\\"\";","","    let _ = format_escaped_str(&mut writer, &mut formatter, value);","    let mut writer = MockWriter;","    let mut formatter = MockFormatter;","    let value = \"Hello, World! Special chars: \\n\\t\\\\\\\"\";","    let result = format_escaped_str(&mut writer, &mut formatter, value);","    assert_eq!(result.unwrap_err().to_string(), \"begin_string error\");","}"],[]],[["{","    struct MockWriter;","","    impl io::Write for MockWriter {","        fn write(&mut self, buf: &[u8]) -> io::Result<usize> {","            Err(io::Error::new(io::ErrorKind::Other, \"write error\"))","        }","","        fn flush(&mut self) -> io::Result<()> {","            Ok(())","        }","    }","","    struct MockFormatter;","","    impl Formatter for MockFormatter {","        fn begin_string<W: ?Sized + io::Write>(&mut self, _: &mut W) -> io::Result<()> {","            Err(io::Error::new(io::ErrorKind::Other, \"begin_string error\"))","        }","","        fn end_string<W: ?Sized + io::Write>(&mut self, _: &mut W) -> io::Result<()> {","            Ok(())","        }","","        fn write_string_fragment<W: ?Sized + io::Write>(&mut self, _: &mut W, _: &str) -> io::Result<()> {","            Ok(())","        }","","        fn write_char_escape<W: ?Sized + io::Write>(&mut self, _: &mut W, _: CharEscape) -> io::Result<()> {","            Ok(())","        }","    }","","    let mut writer = MockWriter;","    let mut formatter = MockFormatter;","    let value = \"This is a very long string that is meant to trigger the formatter's write error.\";","","    let _ = format_escaped_str(&mut writer, &mut formatter, value);","    let mut writer = MockWriter;","    let mut formatter = MockFormatter;","    let value = \"This is a very long string that is meant to trigger the formatter's write error.\";","    let result = format_escaped_str(&mut writer, &mut formatter, value);","    assert!(result.is_err());","}"],[]],[["{","    struct MockWriter;","","    impl io::Write for MockWriter {","        fn write(&mut self, buf: &[u8]) -> io::Result<usize> {","            Err(io::Error::new(io::ErrorKind::Other, \"write error\"))","        }","","        fn flush(&mut self) -> io::Result<()> {","            Ok(())","        }","    }","","    struct MockFormatter;","","    impl Formatter for MockFormatter {","        fn begin_string<W: ?Sized + io::Write>(&mut self, _: &mut W) -> io::Result<()> {","            Err(io::Error::new(io::ErrorKind::Other, \"begin_string error\"))","        }","","        fn end_string<W: ?Sized + io::Write>(&mut self, _: &mut W) -> io::Result<()> {","            Ok(())","        }","","        fn write_string_fragment<W: ?Sized + io::Write>(&mut self, _: &mut W, _: &str) -> io::Result<()> {","            Ok(())","        }","","        fn write_char_escape<W: ?Sized + io::Write>(&mut self, _: &mut W, _: CharEscape) -> io::Result<()> {","            Ok(())","        }","    }","","    let mut writer = MockWriter;","    let mut formatter = MockFormatter;","    let value = \"This is a very long string that is meant to trigger the formatter's write error.\";","","    let _ = format_escaped_str(&mut writer, &mut formatter, value);","    let mut writer = MockWriter;","    let mut formatter = MockFormatter;","    let value = \"This is a very long string that is meant to trigger the formatter's write error.\";","    let result = format_escaped_str(&mut writer, &mut formatter, value);","    assert_eq!(result.unwrap_err().kind(), io::ErrorKind::Other);","}"],[]],[["{","    struct MockWriter;","","    impl io::Write for MockWriter {","        fn write(&mut self, buf: &[u8]) -> io::Result<usize> {","            Err(io::Error::new(io::ErrorKind::Other, \"write error\"))","        }","","        fn flush(&mut self) -> io::Result<()> {","            Ok(())","        }","    }","","    struct MockFormatter;","","    impl Formatter for MockFormatter {","        fn begin_string<W: ?Sized + io::Write>(&mut self, _: &mut W) -> io::Result<()> {","            Err(io::Error::new(io::ErrorKind::Other, \"begin_string error\"))","        }","","        fn end_string<W: ?Sized + io::Write>(&mut self, _: &mut W) -> io::Result<()> {","            Ok(())","        }","","        fn write_string_fragment<W: ?Sized + io::Write>(&mut self, _: &mut W, _: &str) -> io::Result<()> {","            Ok(())","        }","","        fn write_char_escape<W: ?Sized + io::Write>(&mut self, _: &mut W, _: CharEscape) -> io::Result<()> {","            Ok(())","        }","    }","","    let mut writer = MockWriter;","    let mut formatter = MockFormatter;","    let value = \"This is a very long string that is meant to trigger the formatter's write error.\";","","    let _ = format_escaped_str(&mut writer, &mut formatter, value);","    let mut writer = MockWriter;","    let mut formatter = MockFormatter;","    let value = \"This is a very long string that is meant to trigger the formatter's write error.\";","    let result = format_escaped_str(&mut writer, &mut formatter, value);","    assert_eq!(result.unwrap_err().to_string(), \"begin_string error\");","}"],[]],[["{","    struct TestFormatter {","        should_fail: bool,","    }","","    impl Formatter for TestFormatter {","        fn begin_string<W: ?Sized + io::Write>(&mut self, _writer: &mut W) -> io::Result<()> {","            Ok(())","        }","","        fn end_string<W: ?Sized + io::Write>(&mut self, _writer: &mut W) -> io::Result<()> {","            Ok(())","        }","","        fn write_string_fragment<W: ?Sized + io::Write>(&mut self, _writer: &mut W, _value: &str) -> io::Result<()> {","            Ok(())","        }","","        fn write_char_escape<W: ?Sized + io::Write>(&mut self, _writer: &mut W, _char_escape: CharEscape) -> io::Result<()> {","            Ok(())","        }","    }","","    let mut writer = Vec::new();","    let mut formatter = TestFormatter { should_fail: false };","    let value = \"Hello\\nWorld\";","","    let _ = format_escaped_str(&mut writer, &mut formatter, value);","    let mut writer = Vec::new();","    let mut formatter = TestFormatter { should_fail: false };","    let value = \"Hello\\nWorld\";","    let result = format_escaped_str(&mut writer, &mut formatter, value);","    assert!(result.is_ok());","}"],[]],[["{","    struct TestFormatter {","        should_fail: bool,","    }","","    impl Formatter for TestFormatter {","        fn begin_string<W: ?Sized + io::Write>(&mut self, _writer: &mut W) -> io::Result<()> {","            Ok(())","        }","","        fn end_string<W: ?Sized + io::Write>(&mut self, _writer: &mut W) -> io::Result<()> {","            Ok(())","        }","","        fn write_string_fragment<W: ?Sized + io::Write>(&mut self, _writer: &mut W, _value: &str) -> io::Result<()> {","            Ok(())","        }","","        fn write_char_escape<W: ?Sized + io::Write>(&mut self, _writer: &mut W, _char_escape: CharEscape) -> io::Result<()> {","            Ok(())","        }","    }","","    let mut writer = Vec::new();","    let mut formatter = TestFormatter { should_fail: false };","    let value = \"Hello\\nWorld\";","","    let _ = format_escaped_str(&mut writer, &mut formatter, value);","    let mut writer = Vec::new();","    let mut formatter = TestFormatter { should_fail: false };","    let value = \"Hello\\nWorld\";","    let result = format_escaped_str(&mut writer, &mut formatter, value);","    formatter.should_fail = true;","    let result_with_failure = format_escaped_str(&mut writer, &mut formatter, value);","    assert!(result_with_failure.is_err());","}"],[]],[["{","    struct TestFormatter {","        should_fail: bool,","    }","","    impl Formatter for TestFormatter {","        fn begin_string<W: ?Sized + io::Write>(&mut self, _writer: &mut W) -> io::Result<()> {","            Ok(())","        }","","        fn end_string<W: ?Sized + io::Write>(&mut self, _writer: &mut W) -> io::Result<()> {","            Ok(())","        }","","        fn write_string_fragment<W: ?Sized + io::Write>(&mut self, _writer: &mut W, _value: &str) -> io::Result<()> {","            Ok(())","        }","","        fn write_char_escape<W: ?Sized + io::Write>(&mut self, _writer: &mut W, _char_escape: CharEscape) -> io::Result<()> {","            Ok(())","        }","    }","","    let mut writer = Vec::new();","    let mut formatter = TestFormatter { should_fail: false };","    let value = \"Hello\\tWorld, \\\"Test\\\"\";","","    let _ = format_escaped_str(&mut writer, &mut formatter, value);","    let mut writer = Vec::new();","    let mut formatter = TestFormatter { should_fail: false };","    let value = \"Hello\\tWorld, \\\"Test\\\"\";","    formatter.should_fail = true;","    assert!(format_escaped_str(&mut writer, &mut formatter, value).is_err());","}"],[]]]}