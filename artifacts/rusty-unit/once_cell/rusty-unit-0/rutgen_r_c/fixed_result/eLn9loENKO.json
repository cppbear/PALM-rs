{
    "function_name": "once_cell::race::once_box::race::once_box::OnceBox<T>::init",
    "tests": 5,
    "tests_lines": [
        12,
        13,
        18,
        10,
        19
    ],
    "oracles": 5,
    "oracles_compiled": 4,
    "oracles_compiled_rate": 80.0,
    "tests_compiled": 4,
    "tests_compiled_rate": 80.0,
    "oracles_run": 4,
    "oracles_passed": 4,
    "oracles_passed_rate": 100.0,
    "tests_run": 4,
    "tests_passed": 4,
    "tests_passed_rate": 100.0,
    "lines": 15,
    "lines_covered": 15,
    "lines_coveraged_rate": 100.0,
    "branches": 2,
    "branches_covered": 2,
    "branches_coverage_rate": 100.0,
    "codes_lines": [
        462,
        463,
        464,
        465,
        466,
        467,
        468,
        469,
        470,
        471,
        472,
        473,
        474,
        475,
        476
    ],
    "codes_lines_covered": [
        [
            [
                "{",
                "   #[derive(Debug)]",
                "   struct TestStruct;",
                "   ",
                "   let once_box: OnceBox<TestStruct> = OnceBox::new();",
                "   ",
                "   let result: Result<&TestStruct, &str> = once_box.init(|| {",
                "       // Simulating a scenario where `None` would occur.",
                "       if true { Err(\"None case simulated\") } else { Ok(Box::new(TestStruct)) }",
                "   });",
                "   ",
                "   assert!(result.is_err());",
                "}"
            ],
            [
                462,
                463,
                476
            ]
        ],
        [
            [
                "{",
                "  #[derive(Debug, PartialEq)]  ",
                "  struct TestStruct;  ",
                " ",
                "  let once_box: OnceBox<TestStruct> = OnceBox::new();  ",
                " ",
                "  let first_result: Result<&TestStruct, &str> = once_box.init(|| {  ",
                "       Err(\"Initial error\")  ",
                "   });  ",
                " ",
                "   assert!(first_result.is_err());  ",
                "   assert_eq!(first_result, Err(\"Initial error\"));  ",
                " ",
                "   let second_result: Result<&TestStruct, &str> = once_box.init(|| {  ",
                "       Ok(Box::new(TestStruct))  ",
                "   });  ",
                " ",
                "}"
            ],
            [
                462,
                463,
                464,
                465,
                466,
                467,
                468,
                469,
                470,
                471,
                474,
                475,
                476
            ]
        ],
        [
            [
                "{",
                "   struct TestValue(u32);",
                "   ",
                "   let once_box = OnceBox::<TestValue>::new();",
                "   ",
                "   let result: Result<&TestValue, ()> = once_box.init(|| Ok(Box::new(TestValue(42))));",
                "   ",
                "   assert!(result.is_ok());",
                "   assert_eq!(unsafe { (*result.unwrap()).0 }, 42);",
                "}"
            ],
            [
                462,
                463,
                464,
                465,
                466,
                467,
                468,
                469,
                470,
                471,
                474,
                475,
                476
            ]
        ],
        [
            [
                "{",
                "   struct TestValue(u32);",
                "   ",
                "   let once_box = OnceBox::<TestValue>::new();",
                "",
                "   // Simulate a race condition by setting the initial value after calling init",
                "   let initial_set = once_box.inner.compare_exchange(",
                "       ptr::null_mut(),",
                "       Box::into_raw(Box::new(TestValue(100))),",
                "       Ordering::Release,",
                "       Ordering::Acquire,",
                "   );",
                "",
                "   // The following call to init should trigger the Err(old) case.",
                "   let result: Result<&TestValue, ()> = once_box.init(|| Ok(Box::new(TestValue(42))));",
                "",
                "   assert!(result.is_ok());",
                "   assert_eq!(unsafe { (*result.unwrap()).0 }, 100); // should return the originally set value",
                "}"
            ],
            [
                462,
                463,
                464,
                465,
                466,
                467,
                468,
                469,
                470,
                471,
                472,
                473,
                474,
                475,
                476
            ]
        ]
    ],
    "codes_branches": [
        {
            "start_line": 471,
            "start_column": 20,
            "end_line": 471,
            "end_column": 28,
            "positive": true,
            "negative": true
        }
    ],
    "codes_branches_covered": [
        [
            [
                "{",
                "   #[derive(Debug)]",
                "   struct TestStruct;",
                "   ",
                "   let once_box: OnceBox<TestStruct> = OnceBox::new();",
                "   ",
                "   let result: Result<&TestStruct, &str> = once_box.init(|| {",
                "       // Simulating a scenario where `None` would occur.",
                "       if true { Err(\"None case simulated\") } else { Ok(Box::new(TestStruct)) }",
                "   });",
                "   ",
                "   assert!(result.is_err());",
                "}"
            ],
            [
                {
                    "start_line": 471,
                    "start_column": 20,
                    "end_line": 471,
                    "end_column": 28,
                    "positive": false,
                    "negative": false
                }
            ]
        ],
        [
            [
                "{",
                "  #[derive(Debug, PartialEq)]  ",
                "  struct TestStruct;  ",
                " ",
                "  let once_box: OnceBox<TestStruct> = OnceBox::new();  ",
                " ",
                "  let first_result: Result<&TestStruct, &str> = once_box.init(|| {  ",
                "       Err(\"Initial error\")  ",
                "   });  ",
                " ",
                "   assert!(first_result.is_err());  ",
                "   assert_eq!(first_result, Err(\"Initial error\"));  ",
                " ",
                "   let second_result: Result<&TestStruct, &str> = once_box.init(|| {  ",
                "       Ok(Box::new(TestStruct))  ",
                "   });  ",
                " ",
                "}"
            ],
            [
                {
                    "start_line": 471,
                    "start_column": 20,
                    "end_line": 471,
                    "end_column": 28,
                    "positive": false,
                    "negative": true
                }
            ]
        ],
        [
            [
                "{",
                "   struct TestValue(u32);",
                "   ",
                "   let once_box = OnceBox::<TestValue>::new();",
                "   ",
                "   let result: Result<&TestValue, ()> = once_box.init(|| Ok(Box::new(TestValue(42))));",
                "   ",
                "   assert!(result.is_ok());",
                "   assert_eq!(unsafe { (*result.unwrap()).0 }, 42);",
                "}"
            ],
            [
                {
                    "start_line": 471,
                    "start_column": 20,
                    "end_line": 471,
                    "end_column": 28,
                    "positive": false,
                    "negative": true
                }
            ]
        ],
        [
            [
                "{",
                "   struct TestValue(u32);",
                "   ",
                "   let once_box = OnceBox::<TestValue>::new();",
                "",
                "   // Simulate a race condition by setting the initial value after calling init",
                "   let initial_set = once_box.inner.compare_exchange(",
                "       ptr::null_mut(),",
                "       Box::into_raw(Box::new(TestValue(100))),",
                "       Ordering::Release,",
                "       Ordering::Acquire,",
                "   );",
                "",
                "   // The following call to init should trigger the Err(old) case.",
                "   let result: Result<&TestValue, ()> = once_box.init(|| Ok(Box::new(TestValue(42))));",
                "",
                "   assert!(result.is_ok());",
                "   assert_eq!(unsafe { (*result.unwrap()).0 }, 100); // should return the originally set value",
                "}"
            ],
            [
                {
                    "start_line": 471,
                    "start_column": 20,
                    "end_line": 471,
                    "end_column": 28,
                    "positive": true,
                    "negative": false
                }
            ]
        ]
    ],
    "file_path": "/home/abezbm/rusty-unit/evaluation/once_cell/rusty-unit-0/src/race.rs"
}