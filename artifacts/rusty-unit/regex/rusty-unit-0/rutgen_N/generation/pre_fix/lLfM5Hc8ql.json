{
  "name": "regex::backtrack::backtrack::Bounded<'a, 'm, 'r, 's, I>::clear",
  "name_with_impl": "regex::backtrack::{impl#1}::clear",
  "mod_info": {
    "name": "backtrack",
    "loc": "src/lib.rs:647:1:647:15"
  },
  "visible": false,
  "loc": "src/backtrack.rs:117:5:146:6",
  "fn_tests": [
    {
      "chain_id": 0,
      "prompt_conds": [],
      "input_infer": "",
      "answers": [
        {
          "uses": [],
          "has_test_mod": false,
          "common": [
            "#[derive(Default)]",
            "struct MockMemory {",
            "    jobs: Vec<u8>,",
            "    visited: Vec<u64>,",
            "}",
            "",
            "struct BacktrackEngine<'a> {",
            "    prog: &'a [u8],",
            "    input: &'a [u8],",
            "    m: MockMemory,",
            "}",
            "",
            "impl<'a> BacktrackEngine<'a> {",
            "    fn clear(&mut self) {",
            "        self.m.jobs.clear();",
            "        let visited_len = (self.prog.len() * (self.input.len() + 1) + 63) / 64;",
            "        self.m.visited.truncate(visited_len);",
            "        for v in &mut self.m.visited {",
            "            *v = 0;",
            "        }",
            "        if visited_len > self.m.visited.len() {",
            "            let len = self.m.visited.len();",
            "            self.m.visited.reserve_exact(visited_len - len);",
            "            for _ in 0..(visited_len - len) {",
            "                self.m.visited.push(0);",
            "            }",
            "        }",
            "    }",
            "}"
          ],
          "chain_tests": [
            {
              "attrs": [],
              "prefix": [],
              "oracles": [],
              "codes": [
                [
                  "{",
                  "    let mut engine = BacktrackEngine {",
                  "        prog: &[1, 2, 3],",
                  "        input: &[4, 5, 6],",
                  "        m: MockMemory::default(),",
                  "    };",
                  "    ",
                  "    engine.clear();",
                  "    ",
                  "    assert!(engine.m.jobs.is_empty());",
                  "    assert!(engine.m.visited.is_empty());",
                  "}"
                ]
              ],
              "can_compile": [
                {
                  "Ok": null
                }
              ],
              "repaired": [
                false
              ]
            },
            {
              "attrs": [],
              "prefix": [],
              "oracles": [],
              "codes": [
                [
                  "{",
                  "    let mut engine = BacktrackEngine {",
                  "        prog: &[1, 2, 3],",
                  "        input: &[4, 5, 6],",
                  "        m: MockMemory {",
                  "            jobs: vec![1, 2, 3],",
                  "            visited: vec![1, 2],",
                  "        },",
                  "    };",
                  "    ",
                  "    engine.clear();",
                  "    ",
                  "    assert!(engine.m.jobs.is_empty());",
                  "    assert!(engine.m.visited.is_empty());",
                  "}"
                ]
              ],
              "can_compile": [
                {
                  "Ok": null
                }
              ],
              "repaired": [
                false
              ]
            },
            {
              "attrs": [],
              "prefix": [],
              "oracles": [],
              "codes": [
                [
                  "{",
                  "    let mut engine = BacktrackEngine {",
                  "        prog: &[1, 2, 3],",
                  "        input: &[4, 5],",
                  "        m: MockMemory {",
                  "            jobs: vec![],",
                  "            visited: vec![1, 2, 3, 4],",
                  "        },",
                  "    };",
                  "    ",
                  "    engine.clear();",
                  "    ",
                  "    assert_eq!(engine.m.visited.len(), 5); // 5 = (3 * (2 + 1) + 63) / 64",
                  "    assert!(engine.m.visited.iter().all(|&v| v == 0));",
                  "}"
                ]
              ],
              "can_compile": [
                {
                  "Ok": null
                }
              ],
              "repaired": [
                false
              ]
            }
          ]
        }
      ]
    }
  ]
}