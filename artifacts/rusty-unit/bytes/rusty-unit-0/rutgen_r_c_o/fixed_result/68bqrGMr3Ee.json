{
    "function_name": "bytes::bytes::shallow_clone_arc",
    "file_path": "/home/abezbm/rusty-unit/evaluation/bytes/rusty-unit-0/src/bytes.rs",
    "work_dir": "/home/abezbm/rust-utgen-test-crates-new/bytes",
    "tests": 33,
    "tests_lines": [
        27,
        27,
        27,
        27,
        28,
        26,
        28,
        28,
        28,
        26,
        26,
        26,
        26,
        26,
        26,
        27,
        26,
        26,
        31,
        31,
        31,
        31,
        28,
        28,
        29,
        29,
        29,
        29,
        31,
        32,
        32,
        32,
        32
    ],
    "oracles": 7,
    "oracles_compiled": 5,
    "oracles_compiled_rate": 71.42857142857143,
    "tests_compiled": 14,
    "tests_compiled_rate": 42.42424242424242,
    "oracles_run": 5,
    "oracles_passed": 3,
    "oracles_passed_rate": 60.0,
    "tests_run": 14,
    "tests_passed": 7,
    "tests_passed_rate": 50.0,
    "lines": 14,
    "lines_covered": 13,
    "lines_coveraged_rate": 92.85714285714286,
    "branches": 2,
    "branches_covered": 1,
    "branches_coverage_rate": 50.0,
    "codes_lines": [
        1477,
        1478,
        1479,
        1480,
        1481,
        1482,
        1483,
        1484,
        1485,
        1486,
        1487,
        1488,
        1489,
        1490
    ],
    "codes_lines_covered": [
        [
            [
                "{",
                "   struct Shared {",
                "       buf: *mut u8,",
                "       cap: usize,",
                "       ref_cnt: AtomicUsize,",
                "   }",
                "   ",
                "   let mut shared = Box::new(super::Shared {",
                "       buf: std::ptr::null_mut(),",
                "       cap: 0,",
                "       ref_cnt: AtomicUsize::new(usize::MAX),",
                "   });",
                "   let shared_ptr = Box::into_raw(shared);",
                "   let ptr = &30u8 as *const u8;",
                "   let len = 1usize;",
                "",
                "   unsafe {",
                "       shallow_clone_arc(shared_ptr as *mut super::Shared, ptr, len);",
                "   }",
                "   let mut shared = Box::new(super::Shared { buf: std::ptr::null_mut(), cap: 0, ref_cnt: AtomicUsize::new(usize::MAX), });",
                "   let shared_ptr = Box::into_raw(shared);",
                "   let ptr = &30u8 as *const u8;",
                "   let len = 1usize;",
                "   let result = unsafe { shallow_clone_arc(shared_ptr as *mut super::Shared, ptr, len) };",
                "   assert_eq!(result.ptr, ptr);",
                "}"
            ],
            []
        ],
        [
            [
                "{",
                "   struct Shared {",
                "       buf: *mut u8,",
                "       cap: usize,",
                "       ref_cnt: AtomicUsize,",
                "   }",
                "   ",
                "   let mut shared = Box::new(super::Shared {",
                "       buf: std::ptr::null_mut(),",
                "       cap: 0,",
                "       ref_cnt: AtomicUsize::new(usize::MAX),",
                "   });",
                "   let shared_ptr = Box::into_raw(shared);",
                "   let ptr = &30u8 as *const u8;",
                "   let len = 1usize;",
                "",
                "   unsafe {",
                "       shallow_clone_arc(shared_ptr, ptr, len);",
                "   }",
                "   let mut shared = Box::new(super::Shared { buf: std::ptr::null_mut(), cap: 0, ref_cnt: AtomicUsize::new(usize::MAX), });",
                "   let shared_ptr = Box::into_raw(shared);",
                "   let ptr = &30u8 as *const u8;",
                "   let len = 1usize;",
                "   let result = unsafe { shallow_clone_arc(shared_ptr, ptr, len) };",
                "   assert_eq!(result.len, len);",
                "}"
            ],
            []
        ],
        [
            [
                "{",
                "   struct SharedArc {",
                "       buf: *mut u8,",
                "       cap: usize,",
                "       ref_cnt: AtomicUsize,",
                "   }",
                "   ",
                "   let mut shared = Box::new(SharedArc {",
                "       buf: std::ptr::null_mut(),",
                "       cap: 0,",
                "       ref_cnt: AtomicUsize::new(usize::MAX),",
                "   });",
                "   let shared_ptr = Box::into_raw(shared);",
                "   let ptr = &30u8 as *const u8;",
                "   let len = 1usize;",
                "   ",
                "   unsafe {",
                "       shallow_clone_arc(shared_ptr as *mut _, ptr, len);",
                "   }",
                "   let mut shared = Box::new(SharedArc { buf: std::ptr::null_mut(), cap: 0, ref_cnt: AtomicUsize::new(usize::MAX), });",
                "   let shared_ptr = Box::into_raw(shared);",
                "   let ptr = &30u8 as *const u8;",
                "   let len = 1usize;",
                "   let result = unsafe { shallow_clone_arc(shared_ptr as *mut _, ptr, len) };",
                "  assert!(result.data.load(Ordering::Relaxed) == shared_ptr as *mut _);  ",
                "}"
            ],
            []
        ],
        [
            [
                "{",
                "   struct Shared {",
                "       buf: *mut u8,",
                "       cap: usize,",
                "       ref_cnt: AtomicUsize,",
                "   }",
                "   ",
                "   let mut shared = Box::new(Shared {",
                "       buf: std::ptr::null_mut(),",
                "       cap: 0,",
                "       ref_cnt: AtomicUsize::new(usize::MAX >> 1),",
                "   });",
                "   let shared_ptr = Box::into_raw(shared);",
                "   let ptr = &40u8 as *const u8;",
                "   let len = usize::MAX;",
                "",
                "   unsafe {",
                "      let _result: Bytes = unsafe { shallow_clone_arc(shared_ptr as *mut super::Shared, ptr, len) };",
                "  }",
                "  let mut shared = Box::new(Shared { buf: std::ptr::null_mut(), cap: 0, ref_cnt: AtomicUsize::new(usize::MAX >> 1) });",
                "  let shared_ptr = Box::into_raw(shared);",
                "  let ptr = &40u8 as *const u8;",
                "  let len = usize::MAX;",
                "  let _result: Bytes = unsafe { shallow_clone_arc(shared_ptr as *mut super::Shared, ptr, len) };",
                "   assert_eq!(_result.ptr, ptr);",
                "}"
            ],
            [
                1477,
                1478,
                1479,
                1480,
                1482,
                1483,
                1484,
                1485,
                1486,
                1487,
                1488,
                1489,
                1490
            ]
        ],
        [
            [
                "{",
                "   struct Shared {",
                "       buf: *mut u8,",
                "       cap: usize,",
                "       ref_cnt: AtomicUsize,",
                "   }",
                "   ",
                "   let mut shared = Box::new(crate::bytes::Shared {",
                "       buf: std::ptr::null_mut(),",
                "       cap: 0,",
                "       ref_cnt: AtomicUsize::new(usize::MAX >> 1),",
                "   });",
                "   let shared_ptr = Box::into_raw(shared);",
                "   let ptr = &40u8 as *const u8;",
                "   let len = usize::MAX;",
                "",
                "   unsafe {",
                "       let _result = shallow_clone_arc(shared_ptr.cast(), ptr, len);",
                "   }",
                "   let mut shared = Box::new(crate::bytes::Shared { buf: std::ptr::null_mut(), cap: 0, ref_cnt: AtomicUsize::new(usize::MAX >> 1) });",
                "  let shared_ptr = Box::into_raw(shared);  ",
                "  let ptr = &40u8 as *const u8;  ",
                "  let len = usize::MAX;  ",
                "  let _result;  ",
                "  unsafe { _result = shallow_clone_arc(shared_ptr.cast(), ptr, len); }  ",
                "  assert_eq!(_result.len, len);  ",
                "}"
            ],
            [
                1477,
                1478,
                1479,
                1480,
                1482,
                1483,
                1484,
                1485,
                1486,
                1487,
                1488,
                1489,
                1490
            ]
        ],
        [
            [
                "   {",
                "       use core::ptr;",
                "       ",
                "       #[repr(C)]",
                "       struct MockShared {",
                "           buf: *mut u8,",
                "           cap: usize,",
                "           ref_cnt: AtomicUsize,",
                "       }",
                "       ",
                "       let mut mock_shared = MockShared {",
                "           buf: ptr::null_mut(),",
                "           cap: 0,",
                "           ref_cnt: AtomicUsize::new(usize::MAX >> 1),",
                "       };",
                "       ",
                "       let shared_ptr = &mut mock_shared as *mut MockShared as *mut Shared;",
                "       ",
                "       let ptr: *const u8 = ptr::null();",
                "       let len: usize = 0;",
                "       ",
                "       unsafe {",
                "           shallow_clone_arc(shared_ptr, ptr, len);",
                "       }",
                "       // Removed the redundant initialization of mock_shared",
                "       // let shared_ptr = &mut mock_shared as *mut MockShared as *mut Shared; // this line is now redundant",
                "    let ptr: *const u8 = ptr::null();",
                "    let len: usize = 0;",
                "    let result = unsafe { shallow_clone_arc(shared_ptr, ptr, len) };",
                "    assert_eq!(result.ptr, ptr);",
                "}"
            ],
            [
                1477,
                1478,
                1479,
                1480,
                1482,
                1483,
                1484,
                1485,
                1486,
                1487,
                1488,
                1489,
                1490
            ]
        ],
        [
            [
                "{",
                "    use core::ptr;",
                "",
                "    #[repr(C)]",
                "    struct MockShared {",
                "        buf: *mut u8,",
                "        cap: usize,",
                "        ref_cnt: AtomicUsize,",
                "    }",
                "",
                "    let mut mock_shared = MockShared {",
                "        buf: ptr::null_mut(),",
                "        cap: 0,",
                "        ref_cnt: AtomicUsize::new(usize::MAX >> 1),",
                "    };",
                "",
                "    let shared_ptr = &mut mock_shared as *mut MockShared as *mut Shared;",
                "",
                "    let data: [u8; 5] = [1, 2, 3, 4, 5];",
                "    let ptr: *const u8 = data.as_ptr();",
                "    let len: usize = data.len();",
                "",
                "    unsafe {",
                "        shallow_clone_arc(shared_ptr, ptr, len);",
                "    }",
                "    let mock_shared_ref_cnt = unsafe { (*shared_ptr).ref_cnt.load(Ordering::Relaxed) };",
                "    assert_eq!(mock_shared_ref_cnt, usize::MAX >> 1);",
                "}"
            ],
            [
                1477,
                1478,
                1479,
                1480,
                1482,
                1483,
                1484,
                1485,
                1486,
                1487,
                1488,
                1489,
                1490
            ]
        ],
        [
            [
                "{",
                "    use core::ptr;",
                "",
                "    #[repr(C)]",
                "    struct MockShared {",
                "        buf: *mut u8,",
                "        cap: usize,",
                "        ref_cnt: AtomicUsize,",
                "    }",
                "",
                "    let mut mock_shared = MockShared {",
                "        buf: ptr::null_mut(),",
                "        cap: 0,",
                "        ref_cnt: AtomicUsize::new(usize::MAX >> 1),",
                "    };",
                "",
                "    let shared_ptr = &mut mock_shared as *mut MockShared as *mut Shared;",
                "",
                "    let data: [u8; 5] = [1, 2, 3, 4, 5];",
                "    let ptr: *const u8 = data.as_ptr();",
                "    let len: usize = data.len();",
                "",
                "    unsafe {",
                "        shallow_clone_arc(shared_ptr, ptr, len);",
                "    }",
                "    let mock_shared_ref_cnt = unsafe { (*shared_ptr).ref_cnt.load(Ordering::Relaxed) };",
                "    assert!(mock_shared.ref_cnt.load(Ordering::Relaxed) == (usize::MAX >> 1) + 1);",
                "}"
            ],
            [
                1477,
                1478,
                1479,
                1480,
                1482,
                1483,
                1484,
                1485,
                1486,
                1487,
                1488,
                1489,
                1490
            ]
        ],
        [
            [
                "{",
                "    use core::ptr;",
                "",
                "    #[repr(C)]",
                "    struct MockShared {",
                "        buf: *mut u8,",
                "        cap: usize,",
                "        ref_cnt: AtomicUsize,",
                "    }",
                "",
                "    let mut mock_shared = MockShared {",
                "        buf: ptr::null_mut(),",
                "        cap: 0,",
                "        ref_cnt: AtomicUsize::new(usize::MAX >> 1),",
                "    };",
                "",
                "    let shared_ptr = &mut mock_shared as *mut MockShared as *mut Shared;",
                "",
                "    let data: [u8; 5] = [1, 2, 3, 4, 5];",
                "    let ptr: *const u8 = data.as_ptr();",
                "    let len: usize = data.len();",
                "",
                "    unsafe {",
                "        shallow_clone_arc(shared_ptr, ptr, len);",
                "    }",
                "    let mock_shared_ref_cnt = unsafe { (*shared_ptr).ref_cnt.load(Ordering::Relaxed) };",
                "    let returned_bytes = unsafe { shallow_clone_arc(shared_ptr, ptr, len) };",
                "    assert_eq!(returned_bytes.ptr, ptr);",
                "}"
            ],
            [
                1477,
                1478,
                1479,
                1480,
                1482,
                1483,
                1484,
                1485,
                1486,
                1487,
                1488,
                1489,
                1490
            ]
        ],
        [
            [
                "{",
                "    use core::ptr;",
                "",
                "    #[repr(C)]",
                "    struct MockShared {",
                "        buf: *mut u8,",
                "        cap: usize,",
                "        ref_cnt: AtomicUsize,",
                "    }",
                "",
                "    let mut mock_shared = MockShared {",
                "        buf: ptr::null_mut(),",
                "        cap: 0,",
                "        ref_cnt: AtomicUsize::new(usize::MAX >> 1),",
                "    };",
                "",
                "    let shared_ptr = &mut mock_shared as *mut MockShared as *mut Shared;",
                "",
                "    let data: [u8; 5] = [1, 2, 3, 4, 5];",
                "    let ptr: *const u8 = data.as_ptr();",
                "    let len: usize = data.len();",
                "",
                "    unsafe {",
                "        shallow_clone_arc(shared_ptr, ptr, len);",
                "    }",
                "    let mock_shared_ref_cnt = unsafe { (*shared_ptr).ref_cnt.load(Ordering::Relaxed) };",
                "    let returned_bytes = unsafe { shallow_clone_arc(shared_ptr, ptr, len) };",
                "    assert_eq!(returned_bytes.len, len);",
                "}"
            ],
            [
                1477,
                1478,
                1479,
                1480,
                1482,
                1483,
                1484,
                1485,
                1486,
                1487,
                1488,
                1489,
                1490
            ]
        ],
        [
            [
                "{",
                "    use core::ptr;",
                "",
                "    #[repr(C)]",
                "    struct MockShared {",
                "        buf: *mut u8,",
                "        cap: usize,",
                "        ref_cnt: AtomicUsize,",
                "    }",
                "",
                "    let mut mock_shared = MockShared {",
                "        buf: ptr::null_mut(),",
                "        cap: 0,",
                "        ref_cnt: AtomicUsize::new(usize::MAX >> 1),",
                "    };",
                "",
                "    let shared_ptr = &mut mock_shared as *mut MockShared as *mut Shared;",
                "",
                "    let data: [u8; 5] = [1, 2, 3, 4, 5];",
                "    let ptr: *const u8 = data.as_ptr();",
                "    let len: usize = data.len();",
                "",
                "    unsafe {",
                "        shallow_clone_arc(shared_ptr, ptr, len);",
                "    }",
                "    let mock_shared_ref_cnt = unsafe { (*shared_ptr).ref_cnt.load(Ordering::Relaxed) };",
                "    let returned_bytes = unsafe { shallow_clone_arc(shared_ptr, ptr, len) };",
                "    assert_eq!(returned_bytes.data.load(Ordering::Relaxed), shared_ptr as *mut ());",
                "}"
            ],
            [
                1477,
                1478,
                1479,
                1480,
                1482,
                1483,
                1484,
                1485,
                1486,
                1487,
                1488,
                1489,
                1490
            ]
        ],
        [
            [
                "{",
                "    use core::ptr;",
                "",
                "    #[repr(C)]",
                "    struct MockShared {",
                "        buf: *mut u8,",
                "        cap: usize,",
                "        ref_cnt: AtomicUsize,",
                "    }",
                "",
                "    let mut mock_shared = MockShared {",
                "        buf: ptr::null_mut(),",
                "        cap: 0,",
                "        ref_cnt: AtomicUsize::new(usize::MAX), // Set to max to trigger panic",
                "    };",
                "",
                "    let shared_ptr = &mut mock_shared as *mut MockShared as *mut Shared;",
                "",
                "    let ptr: *const u8 = ptr::null();",
                "    let len: usize = 0;",
                "",
                "    unsafe {",
                "        shallow_clone_arc(shared_ptr, ptr, len);",
                "    }",
                "    let mock_shared = MockShared {",
                "    buf: ptr::null_mut(),",
                "    cap: 0,",
                "    ref_cnt: AtomicUsize::new(usize::MAX >> 1), // Set to max / 2 to prevent panic",
                "    };",
                "    assert_eq!(mock_shared.ref_cnt.load(Ordering::Relaxed), usize::MAX >> 1);",
                "}"
            ],
            []
        ],
        [
            [
                "{",
                "    use core::ptr;",
                "",
                "    #[repr(C)]",
                "    struct MockShared {",
                "        buf: *mut u8,",
                "        cap: usize,",
                "        ref_cnt: AtomicUsize,",
                "    }",
                "",
                "    let mut mock_shared = MockShared {",
                "        buf: ptr::null_mut(),",
                "        cap: 0,",
                "        ref_cnt: AtomicUsize::new(usize::MAX), // Set to max to trigger panic",
                "    };",
                "",
                "    let shared_ptr = &mut mock_shared as *mut MockShared as *mut Shared;",
                "",
                "    let ptr: *const u8 = ptr::null();",
                "    let len: usize = 0;",
                "",
                "    unsafe {",
                "        shallow_clone_arc(shared_ptr, ptr, len);",
                "    }",
                "    let mock_shared = MockShared {",
                "    buf: ptr::null_mut(),",
                "    cap: 0,",
                "    ref_cnt: AtomicUsize::new(usize::MAX >> 1), // Set to max / 2 to prevent panic",
                "    };",
                "    let returned_bytes = unsafe { shallow_clone_arc(shared_ptr, ptr, len) };",
                "    assert_eq!(returned_bytes.ptr, ptr);",
                "}"
            ],
            []
        ],
        [
            [
                "{",
                "    use core::ptr;",
                "",
                "    #[repr(C)]",
                "    struct MockShared {",
                "        buf: *mut u8,",
                "        cap: usize,",
                "        ref_cnt: AtomicUsize,",
                "    }",
                "",
                "    let mut mock_shared = MockShared {",
                "        buf: ptr::null_mut(),",
                "        cap: 0,",
                "        ref_cnt: AtomicUsize::new(usize::MAX), // Set to max to trigger panic",
                "    };",
                "",
                "    let shared_ptr = &mut mock_shared as *mut MockShared as *mut Shared;",
                "",
                "    let ptr: *const u8 = ptr::null();",
                "    let len: usize = 0;",
                "",
                "    unsafe {",
                "        shallow_clone_arc(shared_ptr, ptr, len);",
                "    }",
                "    let mock_shared = MockShared {",
                "    buf: ptr::null_mut(),",
                "    cap: 0,",
                "    ref_cnt: AtomicUsize::new(usize::MAX >> 1), // Set to max / 2 to prevent panic",
                "    };",
                "    let returned_bytes = unsafe { shallow_clone_arc(shared_ptr, ptr, len) };",
                "    assert_eq!(returned_bytes.len, len);",
                "}"
            ],
            []
        ]
    ],
    "codes_branches": [
        {
            "start_line": 1480,
            "start_column": 8,
            "end_line": 1480,
            "end_column": 34,
            "positive": false,
            "negative": true
        }
    ],
    "codes_branches_covered": [
        [
            [
                "{",
                "   struct Shared {",
                "       buf: *mut u8,",
                "       cap: usize,",
                "       ref_cnt: AtomicUsize,",
                "   }",
                "   ",
                "   let mut shared = Box::new(super::Shared {",
                "       buf: std::ptr::null_mut(),",
                "       cap: 0,",
                "       ref_cnt: AtomicUsize::new(usize::MAX),",
                "   });",
                "   let shared_ptr = Box::into_raw(shared);",
                "   let ptr = &30u8 as *const u8;",
                "   let len = 1usize;",
                "",
                "   unsafe {",
                "       shallow_clone_arc(shared_ptr as *mut super::Shared, ptr, len);",
                "   }",
                "   let mut shared = Box::new(super::Shared { buf: std::ptr::null_mut(), cap: 0, ref_cnt: AtomicUsize::new(usize::MAX), });",
                "   let shared_ptr = Box::into_raw(shared);",
                "   let ptr = &30u8 as *const u8;",
                "   let len = 1usize;",
                "   let result = unsafe { shallow_clone_arc(shared_ptr as *mut super::Shared, ptr, len) };",
                "   assert_eq!(result.ptr, ptr);",
                "}"
            ],
            [
                {
                    "start_line": 1480,
                    "start_column": 8,
                    "end_line": 1480,
                    "end_column": 34,
                    "positive": false,
                    "negative": false
                }
            ]
        ],
        [
            [
                "{",
                "   struct Shared {",
                "       buf: *mut u8,",
                "       cap: usize,",
                "       ref_cnt: AtomicUsize,",
                "   }",
                "   ",
                "   let mut shared = Box::new(super::Shared {",
                "       buf: std::ptr::null_mut(),",
                "       cap: 0,",
                "       ref_cnt: AtomicUsize::new(usize::MAX),",
                "   });",
                "   let shared_ptr = Box::into_raw(shared);",
                "   let ptr = &30u8 as *const u8;",
                "   let len = 1usize;",
                "",
                "   unsafe {",
                "       shallow_clone_arc(shared_ptr, ptr, len);",
                "   }",
                "   let mut shared = Box::new(super::Shared { buf: std::ptr::null_mut(), cap: 0, ref_cnt: AtomicUsize::new(usize::MAX), });",
                "   let shared_ptr = Box::into_raw(shared);",
                "   let ptr = &30u8 as *const u8;",
                "   let len = 1usize;",
                "   let result = unsafe { shallow_clone_arc(shared_ptr, ptr, len) };",
                "   assert_eq!(result.len, len);",
                "}"
            ],
            [
                {
                    "start_line": 1480,
                    "start_column": 8,
                    "end_line": 1480,
                    "end_column": 34,
                    "positive": false,
                    "negative": false
                }
            ]
        ],
        [
            [
                "{",
                "   struct SharedArc {",
                "       buf: *mut u8,",
                "       cap: usize,",
                "       ref_cnt: AtomicUsize,",
                "   }",
                "   ",
                "   let mut shared = Box::new(SharedArc {",
                "       buf: std::ptr::null_mut(),",
                "       cap: 0,",
                "       ref_cnt: AtomicUsize::new(usize::MAX),",
                "   });",
                "   let shared_ptr = Box::into_raw(shared);",
                "   let ptr = &30u8 as *const u8;",
                "   let len = 1usize;",
                "   ",
                "   unsafe {",
                "       shallow_clone_arc(shared_ptr as *mut _, ptr, len);",
                "   }",
                "   let mut shared = Box::new(SharedArc { buf: std::ptr::null_mut(), cap: 0, ref_cnt: AtomicUsize::new(usize::MAX), });",
                "   let shared_ptr = Box::into_raw(shared);",
                "   let ptr = &30u8 as *const u8;",
                "   let len = 1usize;",
                "   let result = unsafe { shallow_clone_arc(shared_ptr as *mut _, ptr, len) };",
                "  assert!(result.data.load(Ordering::Relaxed) == shared_ptr as *mut _);  ",
                "}"
            ],
            [
                {
                    "start_line": 1480,
                    "start_column": 8,
                    "end_line": 1480,
                    "end_column": 34,
                    "positive": false,
                    "negative": false
                }
            ]
        ],
        [
            [
                "{",
                "   struct Shared {",
                "       buf: *mut u8,",
                "       cap: usize,",
                "       ref_cnt: AtomicUsize,",
                "   }",
                "   ",
                "   let mut shared = Box::new(Shared {",
                "       buf: std::ptr::null_mut(),",
                "       cap: 0,",
                "       ref_cnt: AtomicUsize::new(usize::MAX >> 1),",
                "   });",
                "   let shared_ptr = Box::into_raw(shared);",
                "   let ptr = &40u8 as *const u8;",
                "   let len = usize::MAX;",
                "",
                "   unsafe {",
                "      let _result: Bytes = unsafe { shallow_clone_arc(shared_ptr as *mut super::Shared, ptr, len) };",
                "  }",
                "  let mut shared = Box::new(Shared { buf: std::ptr::null_mut(), cap: 0, ref_cnt: AtomicUsize::new(usize::MAX >> 1) });",
                "  let shared_ptr = Box::into_raw(shared);",
                "  let ptr = &40u8 as *const u8;",
                "  let len = usize::MAX;",
                "  let _result: Bytes = unsafe { shallow_clone_arc(shared_ptr as *mut super::Shared, ptr, len) };",
                "   assert_eq!(_result.ptr, ptr);",
                "}"
            ],
            [
                {
                    "start_line": 1480,
                    "start_column": 8,
                    "end_line": 1480,
                    "end_column": 34,
                    "positive": false,
                    "negative": true
                }
            ]
        ],
        [
            [
                "{",
                "   struct Shared {",
                "       buf: *mut u8,",
                "       cap: usize,",
                "       ref_cnt: AtomicUsize,",
                "   }",
                "   ",
                "   let mut shared = Box::new(crate::bytes::Shared {",
                "       buf: std::ptr::null_mut(),",
                "       cap: 0,",
                "       ref_cnt: AtomicUsize::new(usize::MAX >> 1),",
                "   });",
                "   let shared_ptr = Box::into_raw(shared);",
                "   let ptr = &40u8 as *const u8;",
                "   let len = usize::MAX;",
                "",
                "   unsafe {",
                "       let _result = shallow_clone_arc(shared_ptr.cast(), ptr, len);",
                "   }",
                "   let mut shared = Box::new(crate::bytes::Shared { buf: std::ptr::null_mut(), cap: 0, ref_cnt: AtomicUsize::new(usize::MAX >> 1) });",
                "  let shared_ptr = Box::into_raw(shared);  ",
                "  let ptr = &40u8 as *const u8;  ",
                "  let len = usize::MAX;  ",
                "  let _result;  ",
                "  unsafe { _result = shallow_clone_arc(shared_ptr.cast(), ptr, len); }  ",
                "  assert_eq!(_result.len, len);  ",
                "}"
            ],
            [
                {
                    "start_line": 1480,
                    "start_column": 8,
                    "end_line": 1480,
                    "end_column": 34,
                    "positive": false,
                    "negative": true
                }
            ]
        ],
        [
            [
                "   {",
                "       use core::ptr;",
                "       ",
                "       #[repr(C)]",
                "       struct MockShared {",
                "           buf: *mut u8,",
                "           cap: usize,",
                "           ref_cnt: AtomicUsize,",
                "       }",
                "       ",
                "       let mut mock_shared = MockShared {",
                "           buf: ptr::null_mut(),",
                "           cap: 0,",
                "           ref_cnt: AtomicUsize::new(usize::MAX >> 1),",
                "       };",
                "       ",
                "       let shared_ptr = &mut mock_shared as *mut MockShared as *mut Shared;",
                "       ",
                "       let ptr: *const u8 = ptr::null();",
                "       let len: usize = 0;",
                "       ",
                "       unsafe {",
                "           shallow_clone_arc(shared_ptr, ptr, len);",
                "       }",
                "       // Removed the redundant initialization of mock_shared",
                "       // let shared_ptr = &mut mock_shared as *mut MockShared as *mut Shared; // this line is now redundant",
                "    let ptr: *const u8 = ptr::null();",
                "    let len: usize = 0;",
                "    let result = unsafe { shallow_clone_arc(shared_ptr, ptr, len) };",
                "    assert_eq!(result.ptr, ptr);",
                "}"
            ],
            [
                {
                    "start_line": 1480,
                    "start_column": 8,
                    "end_line": 1480,
                    "end_column": 34,
                    "positive": false,
                    "negative": true
                }
            ]
        ],
        [
            [
                "{",
                "    use core::ptr;",
                "",
                "    #[repr(C)]",
                "    struct MockShared {",
                "        buf: *mut u8,",
                "        cap: usize,",
                "        ref_cnt: AtomicUsize,",
                "    }",
                "",
                "    let mut mock_shared = MockShared {",
                "        buf: ptr::null_mut(),",
                "        cap: 0,",
                "        ref_cnt: AtomicUsize::new(usize::MAX >> 1),",
                "    };",
                "",
                "    let shared_ptr = &mut mock_shared as *mut MockShared as *mut Shared;",
                "",
                "    let data: [u8; 5] = [1, 2, 3, 4, 5];",
                "    let ptr: *const u8 = data.as_ptr();",
                "    let len: usize = data.len();",
                "",
                "    unsafe {",
                "        shallow_clone_arc(shared_ptr, ptr, len);",
                "    }",
                "    let mock_shared_ref_cnt = unsafe { (*shared_ptr).ref_cnt.load(Ordering::Relaxed) };",
                "    assert_eq!(mock_shared_ref_cnt, usize::MAX >> 1);",
                "}"
            ],
            [
                {
                    "start_line": 1480,
                    "start_column": 8,
                    "end_line": 1480,
                    "end_column": 34,
                    "positive": false,
                    "negative": true
                }
            ]
        ],
        [
            [
                "{",
                "    use core::ptr;",
                "",
                "    #[repr(C)]",
                "    struct MockShared {",
                "        buf: *mut u8,",
                "        cap: usize,",
                "        ref_cnt: AtomicUsize,",
                "    }",
                "",
                "    let mut mock_shared = MockShared {",
                "        buf: ptr::null_mut(),",
                "        cap: 0,",
                "        ref_cnt: AtomicUsize::new(usize::MAX >> 1),",
                "    };",
                "",
                "    let shared_ptr = &mut mock_shared as *mut MockShared as *mut Shared;",
                "",
                "    let data: [u8; 5] = [1, 2, 3, 4, 5];",
                "    let ptr: *const u8 = data.as_ptr();",
                "    let len: usize = data.len();",
                "",
                "    unsafe {",
                "        shallow_clone_arc(shared_ptr, ptr, len);",
                "    }",
                "    let mock_shared_ref_cnt = unsafe { (*shared_ptr).ref_cnt.load(Ordering::Relaxed) };",
                "    assert!(mock_shared.ref_cnt.load(Ordering::Relaxed) == (usize::MAX >> 1) + 1);",
                "}"
            ],
            [
                {
                    "start_line": 1480,
                    "start_column": 8,
                    "end_line": 1480,
                    "end_column": 34,
                    "positive": false,
                    "negative": true
                }
            ]
        ],
        [
            [
                "{",
                "    use core::ptr;",
                "",
                "    #[repr(C)]",
                "    struct MockShared {",
                "        buf: *mut u8,",
                "        cap: usize,",
                "        ref_cnt: AtomicUsize,",
                "    }",
                "",
                "    let mut mock_shared = MockShared {",
                "        buf: ptr::null_mut(),",
                "        cap: 0,",
                "        ref_cnt: AtomicUsize::new(usize::MAX >> 1),",
                "    };",
                "",
                "    let shared_ptr = &mut mock_shared as *mut MockShared as *mut Shared;",
                "",
                "    let data: [u8; 5] = [1, 2, 3, 4, 5];",
                "    let ptr: *const u8 = data.as_ptr();",
                "    let len: usize = data.len();",
                "",
                "    unsafe {",
                "        shallow_clone_arc(shared_ptr, ptr, len);",
                "    }",
                "    let mock_shared_ref_cnt = unsafe { (*shared_ptr).ref_cnt.load(Ordering::Relaxed) };",
                "    let returned_bytes = unsafe { shallow_clone_arc(shared_ptr, ptr, len) };",
                "    assert_eq!(returned_bytes.ptr, ptr);",
                "}"
            ],
            [
                {
                    "start_line": 1480,
                    "start_column": 8,
                    "end_line": 1480,
                    "end_column": 34,
                    "positive": false,
                    "negative": true
                }
            ]
        ],
        [
            [
                "{",
                "    use core::ptr;",
                "",
                "    #[repr(C)]",
                "    struct MockShared {",
                "        buf: *mut u8,",
                "        cap: usize,",
                "        ref_cnt: AtomicUsize,",
                "    }",
                "",
                "    let mut mock_shared = MockShared {",
                "        buf: ptr::null_mut(),",
                "        cap: 0,",
                "        ref_cnt: AtomicUsize::new(usize::MAX >> 1),",
                "    };",
                "",
                "    let shared_ptr = &mut mock_shared as *mut MockShared as *mut Shared;",
                "",
                "    let data: [u8; 5] = [1, 2, 3, 4, 5];",
                "    let ptr: *const u8 = data.as_ptr();",
                "    let len: usize = data.len();",
                "",
                "    unsafe {",
                "        shallow_clone_arc(shared_ptr, ptr, len);",
                "    }",
                "    let mock_shared_ref_cnt = unsafe { (*shared_ptr).ref_cnt.load(Ordering::Relaxed) };",
                "    let returned_bytes = unsafe { shallow_clone_arc(shared_ptr, ptr, len) };",
                "    assert_eq!(returned_bytes.len, len);",
                "}"
            ],
            [
                {
                    "start_line": 1480,
                    "start_column": 8,
                    "end_line": 1480,
                    "end_column": 34,
                    "positive": false,
                    "negative": true
                }
            ]
        ],
        [
            [
                "{",
                "    use core::ptr;",
                "",
                "    #[repr(C)]",
                "    struct MockShared {",
                "        buf: *mut u8,",
                "        cap: usize,",
                "        ref_cnt: AtomicUsize,",
                "    }",
                "",
                "    let mut mock_shared = MockShared {",
                "        buf: ptr::null_mut(),",
                "        cap: 0,",
                "        ref_cnt: AtomicUsize::new(usize::MAX >> 1),",
                "    };",
                "",
                "    let shared_ptr = &mut mock_shared as *mut MockShared as *mut Shared;",
                "",
                "    let data: [u8; 5] = [1, 2, 3, 4, 5];",
                "    let ptr: *const u8 = data.as_ptr();",
                "    let len: usize = data.len();",
                "",
                "    unsafe {",
                "        shallow_clone_arc(shared_ptr, ptr, len);",
                "    }",
                "    let mock_shared_ref_cnt = unsafe { (*shared_ptr).ref_cnt.load(Ordering::Relaxed) };",
                "    let returned_bytes = unsafe { shallow_clone_arc(shared_ptr, ptr, len) };",
                "    assert_eq!(returned_bytes.data.load(Ordering::Relaxed), shared_ptr as *mut ());",
                "}"
            ],
            [
                {
                    "start_line": 1480,
                    "start_column": 8,
                    "end_line": 1480,
                    "end_column": 34,
                    "positive": false,
                    "negative": true
                }
            ]
        ],
        [
            [
                "{",
                "    use core::ptr;",
                "",
                "    #[repr(C)]",
                "    struct MockShared {",
                "        buf: *mut u8,",
                "        cap: usize,",
                "        ref_cnt: AtomicUsize,",
                "    }",
                "",
                "    let mut mock_shared = MockShared {",
                "        buf: ptr::null_mut(),",
                "        cap: 0,",
                "        ref_cnt: AtomicUsize::new(usize::MAX), // Set to max to trigger panic",
                "    };",
                "",
                "    let shared_ptr = &mut mock_shared as *mut MockShared as *mut Shared;",
                "",
                "    let ptr: *const u8 = ptr::null();",
                "    let len: usize = 0;",
                "",
                "    unsafe {",
                "        shallow_clone_arc(shared_ptr, ptr, len);",
                "    }",
                "    let mock_shared = MockShared {",
                "    buf: ptr::null_mut(),",
                "    cap: 0,",
                "    ref_cnt: AtomicUsize::new(usize::MAX >> 1), // Set to max / 2 to prevent panic",
                "    };",
                "    assert_eq!(mock_shared.ref_cnt.load(Ordering::Relaxed), usize::MAX >> 1);",
                "}"
            ],
            [
                {
                    "start_line": 1480,
                    "start_column": 8,
                    "end_line": 1480,
                    "end_column": 34,
                    "positive": false,
                    "negative": false
                }
            ]
        ],
        [
            [
                "{",
                "    use core::ptr;",
                "",
                "    #[repr(C)]",
                "    struct MockShared {",
                "        buf: *mut u8,",
                "        cap: usize,",
                "        ref_cnt: AtomicUsize,",
                "    }",
                "",
                "    let mut mock_shared = MockShared {",
                "        buf: ptr::null_mut(),",
                "        cap: 0,",
                "        ref_cnt: AtomicUsize::new(usize::MAX), // Set to max to trigger panic",
                "    };",
                "",
                "    let shared_ptr = &mut mock_shared as *mut MockShared as *mut Shared;",
                "",
                "    let ptr: *const u8 = ptr::null();",
                "    let len: usize = 0;",
                "",
                "    unsafe {",
                "        shallow_clone_arc(shared_ptr, ptr, len);",
                "    }",
                "    let mock_shared = MockShared {",
                "    buf: ptr::null_mut(),",
                "    cap: 0,",
                "    ref_cnt: AtomicUsize::new(usize::MAX >> 1), // Set to max / 2 to prevent panic",
                "    };",
                "    let returned_bytes = unsafe { shallow_clone_arc(shared_ptr, ptr, len) };",
                "    assert_eq!(returned_bytes.ptr, ptr);",
                "}"
            ],
            [
                {
                    "start_line": 1480,
                    "start_column": 8,
                    "end_line": 1480,
                    "end_column": 34,
                    "positive": false,
                    "negative": false
                }
            ]
        ],
        [
            [
                "{",
                "    use core::ptr;",
                "",
                "    #[repr(C)]",
                "    struct MockShared {",
                "        buf: *mut u8,",
                "        cap: usize,",
                "        ref_cnt: AtomicUsize,",
                "    }",
                "",
                "    let mut mock_shared = MockShared {",
                "        buf: ptr::null_mut(),",
                "        cap: 0,",
                "        ref_cnt: AtomicUsize::new(usize::MAX), // Set to max to trigger panic",
                "    };",
                "",
                "    let shared_ptr = &mut mock_shared as *mut MockShared as *mut Shared;",
                "",
                "    let ptr: *const u8 = ptr::null();",
                "    let len: usize = 0;",
                "",
                "    unsafe {",
                "        shallow_clone_arc(shared_ptr, ptr, len);",
                "    }",
                "    let mock_shared = MockShared {",
                "    buf: ptr::null_mut(),",
                "    cap: 0,",
                "    ref_cnt: AtomicUsize::new(usize::MAX >> 1), // Set to max / 2 to prevent panic",
                "    };",
                "    let returned_bytes = unsafe { shallow_clone_arc(shared_ptr, ptr, len) };",
                "    assert_eq!(returned_bytes.len, len);",
                "}"
            ],
            [
                {
                    "start_line": 1480,
                    "start_column": 8,
                    "end_line": 1480,
                    "end_column": 34,
                    "positive": false,
                    "negative": false
                }
            ]
        ]
    ]
}